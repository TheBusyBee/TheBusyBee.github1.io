function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=new Array(b);b--;)c[b]=a[b];return c}function $w(a){return Object.isString(a)?(a=a.strip(),a?a.split(/\s+/):[]):[]}function $H(a){return new Hash(a)}function $R(a,b,c){return new ObjectRange(a,b,c)}function $(a){if(arguments.length>1){for(var b=0,c=[],d=arguments.length;d>b;b++)c.push($(arguments[b]));return c}return Object.isString(a)&&(a=document.getElementById(a)),Element.extend(a)}function rand(){return Math.random()}function addCal(a,b){b||(b={});var c,d={ifFormat:"%b %d, %Y",weekNumbers:!1,align:"Br",inputField:a,button:a+"_trigger"};for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);Calendar.setup.call(Calendar.setup,d)}function cd_db_field_validate(a,b){var c=databases.validate_webform(a);if(c){var d=Event.element(b);if("form"==d.nodeName.toLowerCase())try{d=d.select('input[type="submit"]')[0]}catch(e){}d.value="Saving...",d.disabled=!0}return c}var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=p,r=x.map,s=r&&r["*"];if(a&&"."===a.charAt(0)&&(c?(q=getOwn(x.pkgs,c)?p=[c]:p.slice(0,p.length-1),a=q.concat(a.split("/")),b(a),f=getOwn(x.pkgs,e=a[0]),a=a.join("/"),f&&a===e+"/"+f.main&&(a=e)):0===a.indexOf("./")&&(a=a.substring(2))),d&&r&&(p||s)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),p)for(j=p.length;j>0;j-=1)if(g=getOwn(r,p.slice(0,j).join("/")),g&&(g=getOwn(g,k))){l=g,m=i;break}if(l)break;!n&&s&&getOwn(s,k)&&(n=getOwn(s,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(d(a),b.shift(),u.require.undef(a),u.require([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(E+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):c(a,l,e):(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(F+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c,f,g=1e3*x.waitSeconds,h=g&&u.startTime+g<(new Date).getTime(),i=[],k=[],l=!1,o=!0;if(!s){if(s=!0,eachProp(z,function(c){if(a=c.map,b=a.id,c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&h)e(b)?(f=!0,l=!0):(i.push(b),d(b));else if(!c.inited&&c.fetched&&a.isDefine&&(l=!0,!a.prefix))return o=!1}),h&&i.length)return c=makeError("timeout","Load timeout for modules: "+i,null,i),c.contextName=u.contextName,j(c);o&&each(k,function(a){m(a,{},{})}),h&&!f||!l||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E=1,F=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b,c=getOwn(x.pkgs,a.map.id);return b=c?getOwn(x.config,a.map.id+"/"+c.main):getOwn(x.config,a.map.id),b||{}},exports:C[a.map.id]}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,o=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(m=d.normalize(m,function(a){return c(a,n,!0)})||""),f=g(a.prefix+"!"+m,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),void(k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),o([f],e)}),void d.load(a.name,o,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.pkgs,c=x.shim,d={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?"map"===b?(x.map||(x.map={}),mixin(x[b],a,!0,!0)):mixin(x[b],a,!0):x[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=b),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,d){function e(c,f,i){var k,l,m;return d.enableBuildCallback&&f&&isFunction(f)&&(f.__requireJsBuild=!0),"string"==typeof c?isFunction(f)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,e):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=d.skipMap,m.init(c,f,i,{enabled:!0}),n()}),e)}return d=d||{},mixin(e,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(e.undef=function(a){k();var c=g(a,b,!0),d=getOwn(y,a);delete C[a],delete D[c.url],delete A[a],d&&(d.events.defined&&(A[a]=d.events),l(a))}),e},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{for(d=x.paths,e=x.pkgs,h=a.split("/"),i=h.length;i>0;i-=1){if(j=h.slice(0,i).join("/"),f=getOwn(e,j),l=getOwn(d,j)){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(f){g=a===f.name?f.location+"/"+f.main:f.location,h.splice(0,i,g);break}}k=h.join("/"),k+=b||(/\?/.test(k)||c?"":".js"),k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+k}return x.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+x.urlArgs):k},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),d.type=e.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),require.config({paths:{ace:"components/3rdparty-ace/lib",d3:"components/3rdparty-d3/d3",modernizr:"components/3rdparty-modernizr/modernizr",uuid:"components/3rdparty-node-uuid/uuid",nvd3:"components/3rdparty-nvd3/nvd3","cdfront-accounts":"components/cdfront-accounts/dist/js","cdfront-activity":"components/cdfront-activity/dist/js",api:"/zf-front.php",appcore:"components/cdfront-appcore/dist/js","cdfront-audit":"components/cdfront-audit/dist/js","cdfront-calendar":"components/cdfront-calendar/src/js","cdfront-cloudedit":"components/cdfront-cloudedit/src/js","cdfront-comments":"components/cdfront-comments/src/js","cdfront-customnav":"components/cdfront-customnav/src/js","cdfront-files":"components/cdfront-files/dist/js","cdfront-legacy-tinymce":"components/cdfront-legacy-tinymce/dist/js/tiny_mce","cdfront-mentions":"components/cdfront-mentions/src/js","cdfront-pdf":"components/cdfront-pdf/src/js","cdfront-projects":"components/cdfront-projects/dist/js","cdfront-propforms":"components/cdfront-propforms/dist/js","cdfront-reporting":"components/cdfront-reporting/dist/js","cdfront-roles":"components/cdfront-roles/src/js","cdfront-search":"components/cdfront-search/src/js","cdfront-spaces":"components/cdfront-spaces/src/js","cdfront-summary":"components/cdfront-summary/dist/js","cdfront-tags":"components/cdfront-tags/src/js","cdfront-timetracking":"components/cdfront-timetracking/dist/js",uicore:"components/cdfront-uicore/dist/js",almond:"components/cdfront-uicore/dist/js/lib/requirejs/almond",text:"components/cdfront-uicore/dist/js/lib/requirejs/text",hbs:"components/cdfront-uicore/dist/js/lib/requirejs/hbs",underscore:"components/3rdparty-underscore/underscore",jquery:"components/cdfront-uicore/dist/js/lib/extended-jquery",handlebars:"components/cdfront-uicore/dist/js/lib/extended-handlebars",backbone:"components/cdfront-uicore/dist/js/lib/extended-backbone",clsextend:"components/cdfront-uicore/dist/js/lib/clsextend",mixin:"components/cdfront-uicore/dist/js/lib/mixin",events:"components/cdfront-uicore/dist/js/mixins/events",dombind:"components/cdfront-uicore/dist/js/mixins/View/dombind",ignite:"components/cdfront-uicore/dist/js/ignite",moment:"components/moment/moment","moment-timezone":"components/moment-timezone/moment-timezone",validator:"components/validator-js/validator.min",app:"js/CD","filepicker.io":"//api.filepicker.io/v2/filepicker"},hbs:{disableI18n:!0,disableHelpers:!0},map:{"*":{"api/env":"/zf-front.php/home/external/client/env"}}}),function(){var a=Math.random().toString().slice(2);require.config({baseUrl:"/s.v20160129154533".replace(/#+ver#+/,a),map:{"*":{"api/env":"/zf-front.php/home/external/client/"+a+"/env"}}})}(),require.syncdefine=function(a){return a=a||"_",function(){var b=require.s.contexts[a].nextTick=function(a){a()},c=require.apply(this,arguments);return require.s.contexts[a].nextTick=b,c}},define("components/3rdparty-jquery/jquery",[],function(){var a={amd:{jQuery:!1}};return function(b,c){function d(a){var b=a.length,c=gb.type(a);return gb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a){var b=pb[a]={};return gb.each(a.match(ib)||[],function(a,c){b[c]=!0}),b}function f(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=gb.expando+Math.random()}function g(a,b,d){var e;if(d===c&&1===a.nodeType)if(e="data-"+b.replace(tb,"-$1").toLowerCase(),d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:sb.test(d)?JSON.parse(d):d}catch(f){}qb.set(a,b,d)}else d=c;return d}function h(){return!0}function i(){return!1}function j(){try{return U.activeElement}catch(a){}}function k(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function l(a,b,c){if(gb.isFunction(b))return gb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return gb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Db.test(b))return gb.filter(b,a,c);b=gb.filter(b,a)}return gb.grep(a,function(a){return cb.call(b,a)>=0!==c})}function m(a,b){return gb.nodeName(a,"table")&&gb.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ob.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=a.length,d=0;c>d;d++)rb.set(a[d],"globalEval",!b||rb.get(b[d],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(rb.hasData(a)&&(f=rb.access(a),g=rb.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)gb.event.add(b,e,j[e][c])}qb.hasData(a)&&(h=qb.access(a),i=gb.extend({},h),qb.set(b,i))}}function r(a,b){var d=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===c||b&&gb.nodeName(a,b)?gb.merge([a],d):d}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Lb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=ac.length;e--;)if(b=ac[e]+c,b in a)return b;return d}function u(a,b){return a=b||a,"none"===gb.css(a,"display")||!gb.contains(a.ownerDocument,a)}function v(a){return b.getComputedStyle(a,null)}function w(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=rb.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&u(d)&&(f[g]=rb.access(d,"olddisplay",A(d.nodeName)))):f[g]||(e=u(d),(c&&"none"!==c||!e)&&rb.set(d,"olddisplay",e?c:gb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function x(a,b,c){var d=Vb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function y(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=gb.css(a,c+_b[f],!0,e)),d?("content"===c&&(g-=gb.css(a,"padding"+_b[f],!0,e)),"margin"!==c&&(g-=gb.css(a,"border"+_b[f]+"Width",!0,e))):(g+=gb.css(a,"padding"+_b[f],!0,e),"padding"!==c&&(g+=gb.css(a,"border"+_b[f]+"Width",!0,e)));return g}function z(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=v(a),g=gb.support.boxSizing&&"border-box"===gb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Rb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Wb.test(e))return e;d=g&&(gb.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+y(a,b,c||(g?"border":"content"),d,f)+"px"}function A(a){var b=U,c=Yb[a];return c||(c=B(a,b),"none"!==c&&c||(Sb=(Sb||gb("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Sb[0].contentWindow||Sb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=B(a,b),Sb.detach()),Yb[a]=c),c}function B(a,b){var c=gb(b.createElement(a)).appendTo(b.body),d=gb.css(c[0],"display");return c.remove(),d}function C(a,b,c,d){var e;if(gb.isArray(b))gb.each(b,function(b,e){c||cc.test(a)?d(a,e):C(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==gb.type(b))d(a,b);else for(e in b)C(a+"["+e+"]",b[e],c,d)}function D(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ib)||[];if(gb.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function E(a,b,d,e){function f(i){var j;return g[i]=!0,gb.each(a[i]||[],function(a,i){var k=i(b,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):c:(b.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===tc;return f(b.dataTypes[0])||!g["*"]&&f("*")}function F(a,b){var d,e,f=gb.ajaxSettings.flatOptions||{};for(d in b)b[d]!==c&&((f[d]?a:e||(e={}))[d]=b[d]);return e&&gb.extend(!0,a,e),a}function G(a,b,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),e===c&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):c}function H(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function I(){return setTimeout(function(){Cc=c}),Cc=gb.now()}function J(a,b,c){for(var d,e=(Ic[b]||[]).concat(Ic["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f=0,g=Hc.length,h=gb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Cc||I(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:gb.extend({},b),opts:gb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Cc||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=gb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=Hc[f].call(j,a,k,j.opts))return d;return gb.map(k,J,j),gb.isFunction(j.opts.start)&&j.opts.start.call(a,j),gb.fx.timer(gb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function L(a,b){var c,d,e,f,g;for(c in a)if(d=gb.camelCase(c),e=b[d],f=a[c],gb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=gb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,d){var e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&u(a),o=rb.get(a,"fxshow");d.queue||(i=gb._queueHooks(a,"fx"),null==i.unqueued&&(i.unqueued=0,j=i.empty.fire,i.empty.fire=function(){i.unqueued||j()}),i.unqueued++,k.always(function(){k.always(function(){i.unqueued--,gb.queue(a,"fx").length||i.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(d.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===gb.css(a,"display")&&"none"===gb.css(a,"float")&&(m.display="inline-block")),d.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=d.overflow[0],m.overflowX=d.overflow[1],m.overflowY=d.overflow[2]}));for(e in b)if(f=b[e],Ec.exec(f)){if(delete b[e],g=g||"toggle"===f,f===(n?"hide":"show")){if("show"!==f||!o||o[e]===c)continue;n=!0}l[e]=o&&o[e]||gb.style(a,e)}if(!gb.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=rb.access(a,"fxshow",{}),g&&(o.hidden=!n),n?gb(a).show():k.done(function(){gb(a).hide()}),k.done(function(){var b;rb.remove(a,"fxshow");for(b in l)gb.style(a,b,l[b])});for(e in l)h=J(n?o[e]:0,e,k),e in o||(o[e]=h.start,n&&(h.end=h.start,h.start="width"===e||"height"===e?1:0))}}function N(a,b,c,d,e){return new N.prototype.init(a,b,c,d,e)}function O(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=_b[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function P(a){return gb.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q,R,S=typeof c,T=b.location,U=b.document,V=U.documentElement,W=b.jQuery,X=b.$,Y={},Z=[],$="2.0.3",_=Z.concat,ab=Z.push,bb=Z.slice,cb=Z.indexOf,db=Y.toString,eb=Y.hasOwnProperty,fb=$.trim,gb=function(a,b){return new gb.fn.init(a,b,Q)},hb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ib=/\S+/g,jb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,kb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,lb=/^-ms-/,mb=/-([\da-z])/gi,nb=function(a,b){return b.toUpperCase()},ob=function(){U.removeEventListener("DOMContentLoaded",ob,!1),b.removeEventListener("load",ob,!1),gb.ready()};gb.fn=gb.prototype={jquery:$,constructor:gb,init:function(a,b,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:jb.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof gb?b[0]:b,gb.merge(this,gb.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:U,!0)),kb.test(e[1])&&gb.isPlainObject(b))for(e in b)gb.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=U.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=U,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):gb.isFunction(a)?d.ready(a):(a.selector!==c&&(this.selector=a.selector,this.context=a.context),gb.makeArray(a,this))},selector:"",length:0,toArray:function(){return bb.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=gb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return gb.each(this,a,b)},ready:function(a){return gb.ready.promise().done(a),this},slice:function(){return this.pushStack(bb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(gb.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ab,sort:[].sort,splice:[].splice},gb.fn.init.prototype=gb.fn,gb.extend=gb.fn.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||gb.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(b in a)d=h[b],e=a[b],h!==e&&(k&&e&&(gb.isPlainObject(e)||(f=gb.isArray(e)))?(f?(f=!1,g=d&&gb.isArray(d)?d:[]):g=d&&gb.isPlainObject(d)?d:{},h[b]=gb.extend(k,g,e)):e!==c&&(h[b]=e));return h},gb.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),noConflict:function(a){return b.$===gb&&(b.$=X),a&&b.jQuery===gb&&(b.jQuery=W),gb},isReady:!1,readyWait:1,holdReady:function(a){a?gb.readyWait++:gb.ready(!0)
},ready:function(a){(a===!0?--gb.readyWait:gb.isReady)||(gb.isReady=!0,a!==!0&&--gb.readyWait>0||(R.resolveWith(U,[gb]),gb.fn.trigger&&gb(U).trigger("ready").off("ready")))},isFunction:function(a){return"function"===gb.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?Y[db.call(a)]||"object":typeof a},isPlainObject:function(a){if("object"!==gb.type(a)||a.nodeType||gb.isWindow(a))return!1;try{if(a.constructor&&!eb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||U;var d=kb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=gb.buildFragment([a],b,e),e&&gb(e).remove(),gb.merge([],d.childNodes))},parseJSON:JSON.parse,parseXML:function(a){var b,d;if(!a||"string"!=typeof a)return null;try{d=new DOMParser,b=d.parseFromString(a,"text/xml")}catch(e){b=c}return(!b||b.getElementsByTagName("parsererror").length)&&gb.error("Invalid XML: "+a),b},noop:function(){},globalEval:function(a){var b,c=eval;a=gb.trim(a),a&&(1===a.indexOf("use strict")?(b=U.createElement("script"),b.text=a,U.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(lb,"ms-").replace(mb,nb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,g=a.length,h=d(a);if(c){if(h)for(;g>f&&(e=b.apply(a[f],c),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],c),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":fb.call(a)},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?gb.merge(c,"string"==typeof a?[a]:a):ab.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:cb.call(b,a,c)},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=b[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,c){var e,f=0,g=a.length,h=d(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,c),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,c),null!=e&&(i[i.length]=e);return _.apply([],i)},guid:1,proxy:function(a,b){var d,e,f;return"string"==typeof b&&(d=a[b],b=a,a=d),gb.isFunction(a)?(e=bb.call(arguments,2),f=function(){return a.apply(b||this,e.concat(bb.call(arguments)))},f.guid=a.guid=a.guid||gb.guid++,f):c},access:function(a,b,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===gb.type(d)){f=!0;for(i in d)gb.access(a,b,i,d[i],!0,g,h)}else if(e!==c&&(f=!0,gb.isFunction(e)||(h=!0),k&&(h?(b.call(a,e),b=null):(k=b,b=function(a,b,c){return k.call(gb(a),c)})),b))for(;j>i;i++)b(a[i],d,h?e:e.call(a[i],i,b(a[i],d)));return f?a:k?b.call(a):j?b(a[0],d):g},now:Date.now,swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),gb.ready.promise=function(a){return R||(R=gb.Deferred(),"complete"===U.readyState?setTimeout(gb.ready):(U.addEventListener("DOMContentLoaded",ob,!1),b.addEventListener("load",ob,!1))),R.promise(a)},gb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){Y["[object "+b+"]"]=b.toLowerCase()}),Q=gb(U),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=tb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ab.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return ab.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wb,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=nb.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return ab.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(kb,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){(!d||(e=lb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=mb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(kb," ")}),h=h.slice(d.length));for(g in z.filter)!(e=rb[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?cb.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):ab.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return cb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(kb,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}ab.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xb,yb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=rb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xb,yb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return ab.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,nb.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,ab=Z.push,bb=Z.slice,cb=Z.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},db="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",eb="[\\x20\\t\\r\\n\\f]",fb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",hb=fb.replace("w","w#"),ib="\\["+eb+"*("+fb+")"+eb+"*(?:([*^$|!~]?=)"+eb+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+hb+")|)|)"+eb+"*\\]",jb=":("+fb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ib.replace(3,8)+")*)|.*)\\)|)",kb=RegExp("^"+eb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+eb+"+$","g"),lb=RegExp("^"+eb+"*,"+eb+"*"),mb=RegExp("^"+eb+"*([>+~]|"+eb+")"+eb+"*"),nb=RegExp(eb+"*[+~]"),ob=RegExp("="+eb+"*([^\\]'\"]*)"+eb+"*\\]","g"),pb=RegExp(jb),qb=RegExp("^"+hb+"$"),rb={ID:RegExp("^#("+fb+")"),CLASS:RegExp("^\\.("+fb+")"),TAG:RegExp("^("+fb.replace("w","w*")+")"),ATTR:RegExp("^"+ib),PSEUDO:RegExp("^"+jb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+eb+"*(even|odd|(([+-]|)(\\d*)n|)"+eb+"*(?:([+-]|)"+eb+"*(\\d+)|))"+eb+"*\\)|)","i"),bool:RegExp("^(?:"+db+")$","i"),needsContext:RegExp("^"+eb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+eb+"*((?:-\\d)?\\d*)"+eb+"*\\)|)(?=[^-]|$)","i")},sb=/^[^{]+\{\s*\[native \w/,tb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ub=/^(?:input|select|textarea|button)$/i,vb=/^h\d$/i,wb=/'|\\/g,xb=RegExp("\\\\([\\da-f]{1,6}"+eb+"?|("+eb+")|.)","ig"),yb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{ab.apply(Z=bb.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(zb){ab={apply:Z.length?function(a,b){_.apply(a,bb.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},x=c.support={},F=c.setDocument=function(a){var c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!B(c),d&&d.attachEvent&&d!==d.top&&d.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xb,yb);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xb,yb);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,c){return typeof c.getElementsByTagName!==W?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,c){return typeof c.getElementsByClassName!==W&&I?c.getElementsByClassName(a):b},K=[],J=[],(x.qsa=sb.test(c.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+eb+"*(?:value|"+db+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+eb+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sb.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",jb)}),J=J.length&&RegExp(J.join("|")),K=K.length&&RegExp(K.join("|")),M=sb.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,b){if(a===b)return U=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||M(O,a)?-1:b===c||M(O,b)?1:E?cb.call(E,a)-cb.call(E,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return U=!0,0;if(!f||!g)return a===c?-1:b===c?1:f?-1:g?1:E?cb.call(E,a)-cb.call(E,b):0;if(f===g)return h(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(ob,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(b)||J&&J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:rb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xb,yb),a[3]=(a[4]||a[5]||"").replace(xb,yb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return rb.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pb.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xb,yb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=RegExp("(^|"+eb+")"+a+"("+eb+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=cb.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(kb,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qb.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xb,yb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return vb.test(a.nodeName)},input:function(a){return ub.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,c,d){return d?b:a.getAttribute(c,"type"===c.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,c,d){return d||"input"!==a.nodeName.toLowerCase()?b:a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(db,function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&e.specified?e.value:a[c]===!0?c.toLowerCase():null}),gb.find=c,gb.expr=c.selectors,gb.expr[":"]=gb.expr.pseudos,gb.unique=c.uniqueSort,gb.text=c.getText,gb.isXMLDoc=c.isXML,gb.contains=c.contains}(b);var pb={};gb.Callbacks=function(a){a="string"==typeof a?pb[a]||e(a):gb.extend({},a);var b,d,f,g,h,i,j=[],k=!a.once&&[],l=function(c){for(b=a.memory&&c,d=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(c[0],c[1])===!1&&a.stopOnFalse){b=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):b?j=[]:m.disable())},m={add:function(){if(j){var c=j.length;!function d(b){gb.each(b,function(b,c){var e=gb.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),f?h=j.length:b&&(g=c,l(b))}return this},remove:function(){return j&&gb.each(arguments,function(a,b){for(var c;(c=gb.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return a?gb.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],h=0,this},disable:function(){return j=k=b=c,this},disabled:function(){return!j},lock:function(){return k=c,b||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||d&&!k||(b=b||[],b=[a,b.slice?b.slice():b],f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!d}};return m},gb.extend({Deferred:function(a){var b=[["resolve","done",gb.Callbacks("once memory"),"resolved"],["reject","fail",gb.Callbacks("once memory"),"rejected"],["notify","progress",gb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return gb.Deferred(function(c){gb.each(b,function(b,f){var g=f[0],h=gb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&gb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?gb.extend(a,d):d}},e={};return d.pipe=d.then,gb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=bb.call(arguments),g=f.length,h=1!==g||a&&gb.isFunction(a.promise)?g:0,i=1===h?a:gb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?bb.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&gb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),gb.support=function(a){var c=U.createElement("input"),d=U.createDocumentFragment(),e=U.createElement("div"),f=U.createElement("select"),g=f.appendChild(U.createElement("option"));return c.type?(c.type="checkbox",a.checkOn=""!==c.value,a.optSelected=g.selected,a.reliableMarginRight=!0,a.boxSizingReliable=!0,a.pixelPosition=!1,c.checked=!0,a.noCloneChecked=c.cloneNode(!0).checked,f.disabled=!0,a.optDisabled=!g.disabled,c=U.createElement("input"),c.value="t",c.type="radio",a.radioValue="t"===c.value,c.setAttribute("checked","t"),c.setAttribute("name","t"),d.appendChild(c),a.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,a.focusinBubbles="onfocusin"in b,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",a.clearCloneStyle="content-box"===e.style.backgroundClip,gb(function(){var c,d,f="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",g=U.getElementsByTagName("body")[0];g&&(c=U.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(e),e.innerHTML="",e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",gb.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){a.boxSizing=4===e.offsetWidth}),b.getComputedStyle&&(a.pixelPosition="1%"!==(b.getComputedStyle(e,null)||{}).top,a.boxSizingReliable="4px"===(b.getComputedStyle(e,null)||{width:"4px"}).width,d=e.appendChild(U.createElement("div")),d.style.cssText=e.style.cssText=f,d.style.marginRight=d.style.width="0",e.style.width="1px",a.reliableMarginRight=!parseFloat((b.getComputedStyle(d,null)||{}).marginRight)),g.removeChild(c))}),a):a}({});var qb,rb,sb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,tb=/([A-Z])/g;f.uid=1,f.accepts=function(a){return a.nodeType?1===a.nodeType||9===a.nodeType:!0},f.prototype={key:function(a){if(!f.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=f.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,gb.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(gb.isEmptyObject(f))gb.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var d=this.cache[this.key(a)];return b===c?d:d[b]},access:function(a,b,d){var e;return b===c||b&&"string"==typeof b&&d===c?(e=this.get(a,b),e!==c?e:this.get(a,gb.camelCase(b))):(this.set(a,b,d),d!==c?d:b)},remove:function(a,b){var d,e,f,g=this.key(a),h=this.cache[g];if(b===c)this.cache[g]={};else{gb.isArray(b)?e=b.concat(b.map(gb.camelCase)):(f=gb.camelCase(b),b in h?e=[b,f]:(e=f,e=e in h?[e]:e.match(ib)||[])),d=e.length;for(;d--;)delete h[e[d]]}},hasData:function(a){return!gb.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}},qb=new f,rb=new f,gb.extend({acceptData:f.accepts,hasData:function(a){return qb.hasData(a)||rb.hasData(a)},data:function(a,b,c){return qb.access(a,b,c)},removeData:function(a,b){qb.remove(a,b)},_data:function(a,b,c){return rb.access(a,b,c)},_removeData:function(a,b){rb.remove(a,b)}}),gb.fn.extend({data:function(a,b){var d,e,f=this[0],h=0,i=null;if(a===c){if(this.length&&(i=qb.get(f),1===f.nodeType&&!rb.get(f,"hasDataAttrs"))){for(d=f.attributes;d.length>h;h++)e=d[h].name,0===e.indexOf("data-")&&(e=gb.camelCase(e.slice(5)),g(f,e,i[e]));rb.set(f,"hasDataAttrs",!0)}return i}return"object"==typeof a?this.each(function(){qb.set(this,a)}):gb.access(this,function(b){var d,e=gb.camelCase(a);if(f&&b===c){if(d=qb.get(f,a),d!==c)return d;if(d=qb.get(f,e),d!==c)return d;if(d=g(f,e,c),d!==c)return d}else this.each(function(){var d=qb.get(this,e);qb.set(this,e,b),-1!==a.indexOf("-")&&d!==c&&qb.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){qb.remove(this,a)})}}),gb.extend({queue:function(a,b,d){var e;return a?(b=(b||"fx")+"queue",e=rb.get(a,b),d&&(!e||gb.isArray(d)?e=rb.access(a,b,gb.makeArray(d)):e.push(d)),e||[]):c},dequeue:function(a,b){b=b||"fx";var c=gb.queue(a,b),d=c.length,e=c.shift(),f=gb._queueHooks(a,b),g=function(){gb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return rb.get(a,c)||rb.access(a,c,{empty:gb.Callbacks("once memory").add(function(){rb.remove(a,[b+"queue",c])})})}}),gb.fn.extend({queue:function(a,b){var d=2;return"string"!=typeof a&&(b=a,a="fx",d--),d>arguments.length?gb.queue(this[0],a):b===c?this:this.each(function(){var c=gb.queue(this,a,b);gb._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&gb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){gb.dequeue(this,a)})},delay:function(a,b){return a=gb.fx?gb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=gb.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(b=a,a=c),a=a||"fx";h--;)d=rb.get(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(b)}});var ub,vb,wb=/[\t\r\n\f]/g,xb=/\r/g,yb=/^(?:input|select|textarea|button)$/i;gb.fn.extend({attr:function(a,b){return gb.access(this,gb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){gb.removeAttr(this,a)})},prop:function(a,b){return gb.access(this,gb.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[gb.propFix[a]||a]})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(gb.isFunction(a))return this.each(function(b){gb(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ib)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(wb," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=gb.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(gb.isFunction(a))return this.each(function(b){gb(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ib)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(wb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?gb.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(gb.isFunction(a)?function(c){gb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=gb(this),f=a.match(ib)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===S||"boolean"===c)&&(this.className&&rb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":rb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(wb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var b,d,e,f=this[0];return arguments.length?(e=gb.isFunction(a),this.each(function(d){var f;1===this.nodeType&&(f=e?a.call(this,d,gb(this).val()):a,null==f?f="":"number"==typeof f?f+="":gb.isArray(f)&&(f=gb.map(f,function(a){return null==a?"":a+""})),b=gb.valHooks[this.type]||gb.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,f,"value")!==c||(this.value=f))})):f?(b=gb.valHooks[f.type]||gb.valHooks[f.nodeName.toLowerCase()],b&&"get"in b&&(d=b.get(f,"value"))!==c?d:(d=f.value,"string"==typeof d?d.replace(xb,""):null==d?"":d)):void 0}}),gb.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;
return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(gb.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&gb.nodeName(c.parentNode,"optgroup"))){if(b=gb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=gb.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=gb.inArray(gb(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,b,d){var e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?typeof a.getAttribute===S?gb.prop(a,b,d):(1===g&&gb.isXMLDoc(a)||(b=b.toLowerCase(),e=gb.attrHooks[b]||(gb.expr.match.bool.test(b)?vb:ub)),d===c?e&&"get"in e&&null!==(f=e.get(a,b))?f:(f=gb.find.attr(a,b),null==f?c:f):null!==d?e&&"set"in e&&(f=e.set(a,d,b))!==c?f:(a.setAttribute(b,d+""),d):(gb.removeAttr(a,b),c)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ib);if(f&&1===a.nodeType)for(;c=f[e++];)d=gb.propFix[c]||c,gb.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!gb.support.radioValue&&"radio"===b&&gb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!gb.isXMLDoc(a),g&&(b=gb.propFix[b]||b,f=gb.propHooks[b]),d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||yb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),vb={set:function(a,b,c){return b===!1?gb.removeAttr(a,c):a.setAttribute(c,c),c}},gb.each(gb.expr.match.bool.source.match(/\w+/g),function(a,b){var d=gb.expr.attrHandle[b]||gb.find.attr;gb.expr.attrHandle[b]=function(a,b,e){var f=gb.expr.attrHandle[b],g=e?c:(gb.expr.attrHandle[b]=c)!=d(a,b,e)?b.toLowerCase():null;return gb.expr.attrHandle[b]=f,g}}),gb.support.optSelected||(gb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),gb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){gb.propFix[this.toLowerCase()]=this}),gb.each(["radio","checkbox"],function(){gb.valHooks[this]={set:function(a,b){return gb.isArray(b)?a.checked=gb.inArray(gb(a).val(),b)>=0:c}},gb.support.checkOn||(gb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var zb=/^key/,Ab=/^(?:mouse|contextmenu)|click/,Bb=/^(?:focusinfocus|focusoutblur)$/,Cb=/^([^.]*)(?:\.(.+)|)$/;gb.event={global:{},add:function(a,b,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=rb.get(a);if(r){for(d.handler&&(g=d,d=g.handler,f=g.selector),d.guid||(d.guid=gb.guid++),(j=r.events)||(j=r.events={}),(h=r.handle)||(h=r.handle=function(a){return typeof gb===S||a&&gb.event.triggered===a.type?c:gb.event.dispatch.apply(h.elem,arguments)},h.elem=a),b=(b||"").match(ib)||[""],k=b.length;k--;)i=Cb.exec(b[k])||[],o=q=i[1],p=(i[2]||"").split(".").sort(),o&&(m=gb.event.special[o]||{},o=(f?m.delegateType:m.bindType)||o,m=gb.event.special[o]||{},l=gb.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&gb.expr.match.needsContext.test(f),namespace:p.join(".")},g),(n=j[o])||(n=j[o]=[],n.delegateCount=0,m.setup&&m.setup.call(a,e,p,h)!==!1||a.addEventListener&&a.addEventListener(o,h,!1)),m.add&&(m.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,l):n.push(l),gb.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=rb.hasData(a)&&rb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(ib)||[""],j=b.length;j--;)if(h=Cb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=gb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||gb.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)gb.event.remove(a,n+b[j],c,d,!0);gb.isEmptyObject(i)&&(delete q.handle,rb.remove(a,"events"))}},trigger:function(a,d,e,f){var g,h,i,j,k,l,m,n=[e||U],o=eb.call(a,"type")?a.type:a,p=eb.call(a,"namespace")?a.namespace.split("."):[];if(h=i=e=e||U,3!==e.nodeType&&8!==e.nodeType&&!Bb.test(o+gb.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),k=0>o.indexOf(":")&&"on"+o,a=a[gb.expando]?a:new gb.Event(o,"object"==typeof a&&a),a.isTrigger=f?2:3,a.namespace=p.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=c,a.target||(a.target=e),d=null==d?[a]:gb.makeArray(d,[a]),m=gb.event.special[o]||{},f||!m.trigger||m.trigger.apply(e,d)!==!1)){if(!f&&!m.noBubble&&!gb.isWindow(e)){for(j=m.delegateType||o,Bb.test(j+o)||(h=h.parentNode);h;h=h.parentNode)n.push(h),i=h;i===(e.ownerDocument||U)&&n.push(i.defaultView||i.parentWindow||b)}for(g=0;(h=n[g++])&&!a.isPropagationStopped();)a.type=g>1?j:m.bindType||o,l=(rb.get(h,"events")||{})[a.type]&&rb.get(h,"handle"),l&&l.apply(h,d),l=k&&h[k],l&&gb.acceptData(h)&&l.apply&&l.apply(h,d)===!1&&a.preventDefault();return a.type=o,f||a.isDefaultPrevented()||m._default&&m._default.apply(n.pop(),d)!==!1||!gb.acceptData(e)||k&&gb.isFunction(e[o])&&!gb.isWindow(e)&&(i=e[k],i&&(e[k]=null),gb.event.triggered=o,e[o](),gb.event.triggered=c,i&&(e[k]=i)),a.result}},dispatch:function(a){a=gb.event.fix(a);var b,d,e,f,g,h=[],i=bb.call(arguments),j=(rb.get(this,"events")||{})[a.type]||[],k=gb.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=gb.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((gb.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),e!==c&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!==this;j=j.parentNode||this)if(j.disabled!==!0||"click"!==a.type){for(e=[],d=0;i>d;d++)g=b[d],f=g.selector+" ",e[f]===c&&(e[f]=g.needsContext?gb(f,this).index(j)>=0:gb.find(f,this,null,[j]).length),e[f]&&e.push(g);e.length&&h.push({elem:j,handlers:e})}return b.length>i&&h.push({elem:this,handlers:b.slice(i)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||U,e=d.documentElement,f=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||g===c||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[gb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ab.test(e)?this.mouseHooks:zb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new gb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=U),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==j()&&this.focus?(this.focus(),!1):c},delegateType:"focusin"},blur:{trigger:function(){return this===j()&&this.blur?(this.blur(),!1):c},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&gb.nodeName(this,"input")?(this.click(),!1):c},_default:function(a){return gb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==c&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=gb.extend(new gb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?gb.event.trigger(e,null,b):gb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},gb.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},gb.Event=function(a,b){return this instanceof gb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?h:i):this.type=a,b&&gb.extend(this,b),this.timeStamp=a&&a.timeStamp||gb.now(),this[gb.expando]=!0,c):new gb.Event(a,b)},gb.Event.prototype={isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=h,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=h,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},gb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){gb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!gb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),gb.support.focusinBubbles||gb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){gb.event.simulate(b,a.target,gb.event.fix(a),!0)};gb.event.special[b]={setup:function(){0===c++&&U.addEventListener(a,d,!0)},teardown:function(){0===--c&&U.removeEventListener(a,d,!0)}}}),gb.fn.extend({on:function(a,b,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof b&&(d=d||b,b=c);for(h in a)this.on(h,b,d,a[h],f);return this}if(null==d&&null==e?(e=b,d=b=c):null==e&&("string"==typeof b?(e=d,d=c):(e=d,d=b,b=c)),e===!1)e=i;else if(!e)return this;return 1===f&&(g=e,e=function(a){return gb().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=gb.guid++)),this.each(function(){gb.event.add(this,a,e,d,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,gb(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,b,a[f]);return this}return(b===!1||"function"==typeof b)&&(d=b,b=c),d===!1&&(d=i),this.each(function(){gb.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){gb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];return d?gb.event.trigger(a,b,d,!0):c}});var Db=/^.[^:#\[\.,]*$/,Eb=/^(?:parents|prev(?:Until|All))/,Fb=gb.expr.match.needsContext,Gb={children:!0,contents:!0,next:!0,prev:!0};gb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(gb(a).filter(function(){for(b=0;e>b;b++)if(gb.contains(d[b],this))return!0}));for(b=0;e>b;b++)gb.find(a,d[b],c);return c=this.pushStack(e>1?gb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b=gb(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(gb.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(l(this,a||[],!0))},filter:function(a){return this.pushStack(l(this,a||[],!1))},is:function(a){return!!l(this,"string"==typeof a&&Fb.test(a)?gb(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Fb.test(a)||"string"!=typeof a?gb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?g.index(c)>-1:1===c.nodeType&&gb.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?gb.unique(f):f)},index:function(a){return a?"string"==typeof a?cb.call(gb(a),this[0]):cb.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?gb(a,b):gb.makeArray(a&&a.nodeType?[a]:a),d=gb.merge(this.get(),c);return this.pushStack(gb.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),gb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return gb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return gb.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return gb.dir(a,"nextSibling")},prevAll:function(a){return gb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return gb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return gb.dir(a,"previousSibling",c)},siblings:function(a){return gb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return gb.sibling(a.firstChild)},contents:function(a){return a.contentDocument||gb.merge([],a.childNodes)}},function(a,b){gb.fn[a]=function(c,d){var e=gb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=gb.filter(d,e)),this.length>1&&(Gb[a]||gb.unique(e),Eb.test(a)&&e.reverse()),this.pushStack(e)}}),gb.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?gb.find.matchesSelector(d,a)?[d]:[]:gb.find.matches(a,gb.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,b,d){for(var e=[],f=d!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&gb(a).is(d))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Hb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ib=/<([\w:]+)/,Jb=/<|&#?\w+;/,Kb=/<(?:script|style|link)/i,Lb=/^(?:checkbox|radio)$/i,Mb=/checked\s*(?:[^=]|=\s*.checked.)/i,Nb=/^$|\/(?:java|ecma)script/i,Ob=/^true\/(.*)/,Pb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qb.optgroup=Qb.option,Qb.tbody=Qb.tfoot=Qb.colgroup=Qb.caption=Qb.thead,Qb.th=Qb.td,gb.fn.extend({text:function(a){return gb.access(this,function(a){return a===c?gb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?gb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||gb.cleanData(r(c)),c.parentNode&&(b&&gb.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(gb.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return gb.clone(this,a,b)})},html:function(a){return gb.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Kb.test(a)&&!Qb[(Ib.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Hb,"<$1></$2>");try{for(;e>d;d++)b=this[d]||{},1===b.nodeType&&(gb.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=gb.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),gb(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=_.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,p=a[0],q=gb.isFunction(p);if(q||!(1>=k||"string"!=typeof p||gb.support.checkClone)&&Mb.test(p))return this.each(function(d){var e=l.eq(d);q&&(a[0]=p.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(d=gb.buildFragment(a,this[0].ownerDocument,!1,!c&&this),e=d.firstChild,1===d.childNodes.length&&(d=e),e)){for(f=gb.map(r(d,"script"),n),g=f.length;k>j;j++)h=d,j!==m&&(h=gb.clone(h,!0,!0),g&&gb.merge(f,r(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,gb.map(f,o),j=0;g>j;j++)h=f[j],Nb.test(h.type||"")&&!rb.access(h,"globalEval")&&gb.contains(i,h)&&(h.src?gb._evalUrl(h.src):gb.globalEval(h.textContent.replace(Pb,"")))}return this}}),gb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){gb.fn[a]=function(a){for(var c,d=[],e=gb(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),gb(e[g])[b](c),ab.apply(d,c.get());return this.pushStack(d)}}),gb.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=gb.contains(a.ownerDocument,a);if(!(gb.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||gb.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=0,l=a.length,m=b.createDocumentFragment(),n=[];l>k;k++)if(e=a[k],e||0===e)if("object"===gb.type(e))gb.merge(n,e.nodeType?[e]:e);else if(Jb.test(e)){for(f=f||m.appendChild(b.createElement("div")),g=(Ib.exec(e)||["",""])[1].toLowerCase(),h=Qb[g]||Qb._default,f.innerHTML=h[1]+e.replace(Hb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;gb.merge(n,f.childNodes),f=m.firstChild,f.textContent=""}else n.push(b.createTextNode(e));for(m.textContent="",k=0;e=n[k++];)if((!d||-1===gb.inArray(e,d))&&(i=gb.contains(e.ownerDocument,e),f=r(m.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Nb.test(e.type||"")&&c.push(e);return m},cleanData:function(a){for(var b,d,e,g,h,i,j=gb.event.special,k=0;(d=a[k])!==c;k++){if(f.accepts(d)&&(h=d[rb.expando],h&&(b=rb.cache[h]))){if(e=Object.keys(b.events||{}),e.length)for(i=0;(g=e[i])!==c;i++)j[g]?gb.event.remove(d,g):gb.removeEvent(d,g,b.handle);rb.cache[h]&&delete rb.cache[h]}delete qb.cache[d[qb.expando]]}},_evalUrl:function(a){return gb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),gb.fn.extend({wrapAll:function(a){var b;return gb.isFunction(a)?this.each(function(b){gb(this).wrapAll(a.call(this,b))}):(this[0]&&(b=gb(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(gb.isFunction(a)?function(b){gb(this).wrapInner(a.call(this,b))}:function(){var b=gb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=gb.isFunction(a);return this.each(function(c){gb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){gb.nodeName(this,"body")||gb(this).replaceWith(this.childNodes)}).end()}});var Rb,Sb,Tb=/^(none|table(?!-c[ea]).+)/,Ub=/^margin/,Vb=RegExp("^("+hb+")(.*)$","i"),Wb=RegExp("^("+hb+")(?!px)[a-z%]+$","i"),Xb=RegExp("^([+-])=("+hb+")","i"),Yb={BODY:"block"},Zb={position:"absolute",visibility:"hidden",display:"block"},$b={letterSpacing:0,fontWeight:400},_b=["Top","Right","Bottom","Left"],ac=["Webkit","O","Moz","ms"];gb.fn.extend({css:function(a,b){return gb.access(this,function(a,b,d){var e,f,g={},h=0;if(gb.isArray(b)){for(e=v(a),f=b.length;f>h;h++)g[b[h]]=gb.css(a,b[h],!1,e);return g}return d!==c?gb.style(a,b,d):gb.css(a,b)},a,b,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){u(this)?gb(this).show():gb(this).hide()})}}),gb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Rb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=gb.camelCase(b),j=a.style;return b=gb.cssProps[i]||(gb.cssProps[i]=t(j,i)),h=gb.cssHooks[b]||gb.cssHooks[i],d===c?h&&"get"in h&&(f=h.get(a,!1,e))!==c?f:j[b]:(g=typeof d,"string"===g&&(f=Xb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(gb.css(a,b)),g="number"),null==d||"number"===g&&isNaN(d)||("number"!==g||gb.cssNumber[i]||(d+="px"),gb.support.clearCloneStyle||""!==d||0!==b.indexOf("background")||(j[b]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===c||(j[b]=d)),c)}},css:function(a,b,d,e){var f,g,h,i=gb.camelCase(b);return b=gb.cssProps[i]||(gb.cssProps[i]=t(a.style,i)),h=gb.cssHooks[b]||gb.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,d)),f===c&&(f=Rb(a,b,e)),"normal"===f&&b in $b&&(f=$b[b]),""===d||d?(g=parseFloat(f),d===!0||gb.isNumeric(g)?g||0:f):f}}),Rb=function(a,b,d){var e,f,g,h=d||v(a),i=h?h.getPropertyValue(b)||h[b]:c,j=a.style;return h&&(""!==i||gb.contains(a.ownerDocument,a)||(i=gb.style(a,b)),Wb.test(i)&&Ub.test(b)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i},gb.each(["height","width"],function(a,b){gb.cssHooks[b]={get:function(a,d,e){return d?0===a.offsetWidth&&Tb.test(gb.css(a,"display"))?gb.swap(a,Zb,function(){return z(a,b,e)}):z(a,b,e):c},set:function(a,c,d){var e=d&&v(a);return x(a,c,d?y(a,b,d,gb.support.boxSizing&&"border-box"===gb.css(a,"boxSizing",!1,e),e):0)}}}),gb(function(){gb.support.reliableMarginRight||(gb.cssHooks.marginRight={get:function(a,b){return b?gb.swap(a,{display:"inline-block"},Rb,[a,"marginRight"]):c}}),!gb.support.pixelPosition&&gb.fn.position&&gb.each(["top","left"],function(a,b){gb.cssHooks[b]={get:function(a,d){return d?(d=Rb(a,b),Wb.test(d)?gb(a).position()[b]+"px":d):c}}})}),gb.expr&&gb.expr.filters&&(gb.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight},gb.expr.filters.visible=function(a){return!gb.expr.filters.hidden(a)}),gb.each({margin:"",padding:"",border:"Width"},function(a,b){gb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+_b[d]+b]=f[d]||f[d-2]||f[0];return e}},Ub.test(a)||(gb.cssHooks[a+b].set=x)});var bc=/%20/g,cc=/\[\]$/,dc=/\r?\n/g,ec=/^(?:submit|button|image|reset|file)$/i,fc=/^(?:input|select|textarea|keygen)/i;gb.fn.extend({serialize:function(){return gb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=gb.prop(this,"elements");return a?gb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!gb(this).is(":disabled")&&fc.test(this.nodeName)&&!ec.test(a)&&(this.checked||!Lb.test(a))}).map(function(a,b){var c=gb(this).val();return null==c?null:gb.isArray(c)?gb.map(c,function(a){return{name:b.name,value:a.replace(dc,"\r\n")}}):{name:b.name,value:c.replace(dc,"\r\n")}}).get()}}),gb.param=function(a,b){var d,e=[],f=function(a,b){b=gb.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(b===c&&(b=gb.ajaxSettings&&gb.ajaxSettings.traditional),gb.isArray(a)||a.jquery&&!gb.isPlainObject(a))gb.each(a,function(){f(this.name,this.value)});else for(d in a)C(d,a[d],b,f);return e.join("&").replace(bc,"+")},gb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){gb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),gb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var gc,hc,ic=gb.now(),jc=/\?/,kc=/#.*$/,lc=/([?&])_=[^&]*/,mc=/^(.*?):[ \t]*([^\r\n]*)$/gm,nc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,oc=/^(?:GET|HEAD)$/,pc=/^\/\//,qc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,rc=gb.fn.load,sc={},tc={},uc="*/".concat("*");try{hc=T.href}catch(vc){hc=U.createElement("a"),hc.href="",hc=hc.href}gc=qc.exec(hc.toLowerCase())||[],gb.fn.load=function(a,b,d){if("string"!=typeof a&&rc)return rc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i),a=a.slice(0,i)),gb.isFunction(b)?(d=b,b=c):b&&"object"==typeof b&&(f="POST"),h.length>0&&gb.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){g=arguments,h.html(e?gb("<div>").append(gb.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,g||[a.responseText,b,a])}),this},gb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){gb.fn[b]=function(a){return this.on(b,a)}}),gb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:hc,type:"GET",isLocal:nc.test(gc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":uc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":gb.parseJSON,"text xml":gb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?F(F(a,gb.ajaxSettings),b):F(gb.ajaxSettings,a)},ajaxPrefilter:D(sc),ajaxTransport:D(tc),ajax:function(a,b){function d(a,b,d,h){var j,l,s,t,v,x=b;2!==u&&(u=2,i&&clearTimeout(i),e=c,g=h||"",w.readyState=a>0?4:0,j=a>=200&&300>a||304===a,d&&(t=G(m,w,d)),t=H(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(gb.lastModified[f]=v),v=w.getResponseHeader("etag"),v&&(gb.etag[f]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(b||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=c,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--gb.active||gb.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=c),b=b||{};var e,f,g,h,i,j,k,l,m=gb.ajaxSetup({},b),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?gb(n):gb.event,p=gb.Deferred(),q=gb.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=mc.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||hc)+"").replace(kc,"").replace(pc,gc[1]+"//"),m.type=b.method||b.type||m.method||m.type,m.dataTypes=gb.trim(m.dataType||"*").toLowerCase().match(ib)||[""],null==m.crossDomain&&(j=qc.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===gc[1]&&j[2]===gc[2]&&(j[3]||("http:"===j[1]?"80":"443"))===(gc[3]||("http:"===gc[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=gb.param(m.data,m.traditional)),E(sc,m,b,w),2===u)return w;k=m.global,k&&0===gb.active++&&gb.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!oc.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(jc.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=lc.test(f)?f.replace(lc,"$1_="+ic++):f+(jc.test(f)?"&":"?")+"_="+ic++)),m.ifModified&&(gb.lastModified[f]&&w.setRequestHeader("If-Modified-Since",gb.lastModified[f]),gb.etag[f]&&w.setRequestHeader("If-None-Match",gb.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||b.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+uc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=E(tc,m,b,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return gb.get(a,b,c,"json")},getScript:function(a,b){return gb.get(a,c,b,"script")}}),gb.each(["get","post"],function(a,b){gb[b]=function(a,d,e,f){return gb.isFunction(d)&&(f=f||e,e=d,d=c),gb.ajax({url:a,type:b,dataType:f,data:d,success:e})}}),gb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return gb.globalEval(a),a}}}),gb.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),gb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=gb("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),U.head.appendChild(b[0])},abort:function(){c&&c()}}}});var wc=[],xc=/(=)\?(?=&|$)|\?\?/;gb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=wc.pop()||gb.expando+"_"+ic++;return this[a]=!0,a}}),gb.ajaxPrefilter("json jsonp",function(a,d,e){var f,g,h,i=a.jsonp!==!1&&(xc.test(a.url)?"url":"string"==typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&xc.test(a.data)&&"data");return i||"jsonp"===a.dataTypes[0]?(f=a.jsonpCallback=gb.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,i?a[i]=a[i].replace(xc,"$1"+f):a.jsonp!==!1&&(a.url+=(jc.test(a.url)?"&":"?")+a.jsonp+"="+f),a.converters["script json"]=function(){return h||gb.error(f+" was not called"),h[0]},a.dataTypes[0]="json",g=b[f],b[f]=function(){h=arguments},e.always(function(){b[f]=g,a[f]&&(a.jsonpCallback=d.jsonpCallback,wc.push(f)),h&&gb.isFunction(g)&&g(h[0]),h=g=c}),"script"):c}),gb.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var yc=gb.ajaxSettings.xhr(),zc={0:200,1223:204},Ac=0,Bc={};b.ActiveXObject&&gb(b).on("unload",function(){for(var a in Bc)Bc[a]();Bc=c}),gb.support.cors=!!yc&&"withCredentials"in yc,gb.support.ajax=yc=!!yc,gb.ajaxTransport(function(a){var b;return gb.support.cors||yc&&!a.crossDomain?{send:function(d,e){var f,g,h=a.xhr();if(h.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(f in a.xhrFields)h[f]=a.xhrFields[f];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType),a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)h.setRequestHeader(f,d[f]);b=function(a){return function(){b&&(delete Bc[g],b=h.onload=h.onerror=null,"abort"===a?h.abort():"error"===a?e(h.status||404,h.statusText):e(zc[h.status]||h.status,h.statusText,"string"==typeof h.responseText?{text:h.responseText}:c,h.getAllResponseHeaders()))
}},h.onload=b(),h.onerror=b("error"),b=Bc[g=Ac++]=b("abort"),h.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:c});var Cc,Dc,Ec=/^(?:toggle|show|hide)$/,Fc=RegExp("^(?:([+-])=|)("+hb+")([a-z%]*)$","i"),Gc=/queueHooks$/,Hc=[M],Ic={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Fc.exec(b),f=e&&e[3]||(gb.cssNumber[a]?"":"px"),g=(gb.cssNumber[a]||"px"!==f&&+d)&&Fc.exec(gb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,gb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};gb.Animation=gb.extend(K,{tweener:function(a,b){gb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ic[c]=Ic[c]||[],Ic[c].unshift(b)},prefilter:function(a,b){b?Hc.unshift(a):Hc.push(a)}}),gb.Tween=N,N.prototype={constructor:N,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(gb.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];return this.pos=b=this.options.duration?gb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=gb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){gb.fx.step[a.prop]?gb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[gb.cssProps[a.prop]]||gb.cssHooks[a.prop])?gb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},gb.each(["toggle","show","hide"],function(a,b){var c=gb.fn[b];gb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(O(b,!0),a,d,e)}}),gb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(u).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=gb.isEmptyObject(a),f=gb.speed(b,c,d),g=function(){var b=K(this,gb.extend({},a),f);(e||rb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=b,b=a,a=c),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=gb.timers,g=rb.get(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Gc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&gb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=rb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=gb.timers,g=d?d.length:0;for(c.finish=!0,gb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),gb.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){gb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),gb.speed=function(a,b,c){var d=a&&"object"==typeof a?gb.extend({},a):{complete:c||!c&&b||gb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!gb.isFunction(b)&&b};return d.duration=gb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in gb.fx.speeds?gb.fx.speeds[d.duration]:gb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){gb.isFunction(d.old)&&d.old.call(this),d.queue&&gb.dequeue(this,d.queue)},d},gb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},gb.timers=[],gb.fx=N.prototype.init,gb.fx.tick=function(){var a,b=gb.timers,d=0;for(Cc=gb.now();b.length>d;d++)a=b[d],a()||b[d]!==a||b.splice(d--,1);b.length||gb.fx.stop(),Cc=c},gb.fx.timer=function(a){a()&&gb.timers.push(a)&&gb.fx.start()},gb.fx.interval=13,gb.fx.start=function(){Dc||(Dc=setInterval(gb.fx.tick,gb.fx.interval))},gb.fx.stop=function(){clearInterval(Dc),Dc=null},gb.fx.speeds={slow:600,fast:200,_default:400},gb.fx.step={},gb.expr&&gb.expr.filters&&(gb.expr.filters.animated=function(a){return gb.grep(gb.timers,function(b){return a===b.elem}).length}),gb.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){gb.offset.setOffset(this,a,b)});var b,d,e=this[0],f={top:0,left:0},g=e&&e.ownerDocument;return g?(b=g.documentElement,gb.contains(b,e)?(typeof e.getBoundingClientRect!==S&&(f=e.getBoundingClientRect()),d=P(g),{top:f.top+d.pageYOffset-b.clientTop,left:f.left+d.pageXOffset-b.clientLeft}):f):void 0},gb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=gb.css(a,"position"),l=gb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=gb.css(a,"top"),i=gb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),gb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},gb.fn.extend({position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===gb.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),gb.nodeName(a[0],"html")||(d=a.offset()),d.top+=gb.css(a[0],"borderTopWidth",!0),d.left+=gb.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-gb.css(c,"marginTop",!0),left:b.left-d.left-gb.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||V;a&&!gb.nodeName(a,"html")&&"static"===gb.css(a,"position");)a=a.offsetParent;return a||V})}}),gb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var e="pageYOffset"===d;gb.fn[a]=function(f){return gb.access(this,function(a,f,g){var h=P(a);return g===c?h?h[d]:a[f]:(h?h.scrollTo(e?b.pageXOffset:g,e?g:b.pageYOffset):a[f]=g,c)},a,f,arguments.length,null)}}),gb.each({Height:"height",Width:"width"},function(a,b){gb.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){gb.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return gb.access(this,function(b,d,e){var f;return gb.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):e===c?gb.css(b,d,h):gb.style(b,d,e,h)},b,g?e:c,g,null)}})}),gb.fn.size=function(){return this.length},gb.fn.andSelf=gb.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=gb:"function"==typeof a&&a.amd&&a("jquery",[],function(){return gb}),"object"==typeof b&&"object"==typeof b.document&&(b.jQuery=b.$=gb)}(window),$.noConflict(!0)}),define("uicore/lib/jquery/jquery.event.drag-2.2",["require"],function(){return function(a){a.fn.drag=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drag")&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"touchstart mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var c=a.data(this,d.datakey)||{};c.related||(a.removeData(this,d.datakey),b.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(e){if(!d.touched){var f,g=e.data;if(!(0!==e.which&&g.which>0&&e.which!==g.which||a(e.target).is(g.not)||g.handle&&!a(e.target).closest(g.handle,e.currentTarget).length)&&(d.touched="touchstart"==e.type?this:null,g.propagates=1,g.mousedown=this,g.interactions=[d.interaction(this,g)],g.target=e.target,g.pageX=e.pageX,g.pageY=e.pageY,g.dragging=null,f=d.hijack(e,"draginit",g),g.propagates))return f=d.flatten(f),f&&f.length&&(g.interactions=[],a.each(f,function(){g.interactions.push(d.interaction(this,g))})),g.propagates=g.interactions.length,g.drop!==!1&&c.drop&&c.drop.handler(e,g),d.textselect(!1),d.touched?b.add(d.touched,"touchmove touchend",d.handler,g):b.add(document,"mousemove mouseup",d.handler,g),!d.touched||g.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(e){var f=e.data;switch(e.type){case!f.dragging&&"touchmove":e.preventDefault();case!f.dragging&&"mousemove":if(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2)<Math.pow(f.distance,2))break;e.target=f.target,d.hijack(e,"dragstart",f),f.propagates&&(f.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(f.dragging){if(d.hijack(e,"drag",f),f.propagates){f.drop!==!1&&c.drop&&c.drop.handler(e,f);break}e.type="mouseup"}case"touchend":case"mouseup":default:d.touched?b.remove(d.touched,"touchmove touchend",d.handler):b.remove(document,"mousemove mouseup",d.handler),f.dragging&&(f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.hijack(e,"dragend",f)),d.textselect(!0),f.click===!1&&f.dragging&&a.data(f.mousedown,"suppress.click",(new Date).getTime()+5),f.dragging=d.touched=!1}},hijack:function(c,e,f,g,h){if(f){var i,j,k,l={event:c.originalEvent,type:c.type},m=e.indexOf("drop")?"drag":"drop",n=g||0,o=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(j=f.interactions[n]){if("dragend"!==e&&j.cancelled)continue;k=d.properties(c,f,j),j.results=[],a(h||j[m]||f.droppable).each(function(g,h){return k.target=h,c.isPropagationStopped=function(){return!1},i=h?b.dispatch.call(h,c,k):null,i===!1?("drag"==m&&(j.cancelled=!0,f.propagates-=1),"drop"==e&&(j[m][g]=null)):"dropinit"==e&&j.droppable.push(d.element(i)||h),"dragstart"==e&&(j.proxy=a(d.element(i)||j.drag)[0]),j.results.push(i),delete c.result,"dropinit"!==e?i:void 0}),f.results[n]=d.flatten(j.results),"dropinit"==e&&(j.droppable=d.flatten(j.droppable)),"dragstart"!=e||j.cancelled||k.update()}while(++n<o);return c.type=l.type,c.originalEvent=l.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e},element:function(a){return a&&(a.jquery||1==a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?void a.removeData(this,"suppress."+b.type):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.draginit=c.dragstart=c.dragend=d}}),define("uicore/lib/jquery/jquery.event.drag.live-2.2",["require"],function(){return function(a){var b=a.event,c=b.special.drag,d=c.add,e=c.teardown;c.noBubble=!1,c.livekey="livedrag",c.add=function(e){d.apply(this,arguments);var f=a.data(this,c.datakey);!f.live&&e.selector&&(f.live=!0,b.add(this,"draginit."+c.livekey,c.delegate))},c.teardown=function(){e.apply(this,arguments);var d=a.data(this,c.datakey)||{};d.live&&(b.remove(this,"draginit."+c.livekey,c.delegate),d.live=!1)},c.delegate=function(d){var e,f=[],g=a._data(this,"events")||{};return a.each(g||[],function(g,h){0===g.indexOf("drag")&&a.each(h||[],function(g,h){e=a(d.target).closest(h.selector,d.currentTarget)[0],e&&(b.add(e,h.origType+"."+c.livekey,h.origHandler||h.handler,h.data),a.inArray(e,f)<0&&f.push(e))})}),f.length?a(f).bind("dragend."+c.livekey,function(){b.remove(this,"."+c.livekey)}):!1}}}),define("uicore/lib/jquery/jquery.event.drop-2.2",["require"],function(){return function(a){a.fn.drop=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drop")&&(e="drop"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)},a.drop=function(b){b=b||{},d.multi=b.multi===!0?1/0:b.multi===!1?1:isNaN(b.multi)?d.multi:b.multi,d.delay=b.delay||d.delay,d.tolerance=a.isFunction(b.tolerance)?b.tolerance:null===b.tolerance?null:d.tolerance,d.mode=b.mode||d.mode||"intersect"};var b=a.event,c=b.special,d=a.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(){var b=a.data(this,d.datakey);b.related+=1},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var b={related:0,active:[],anyactive:0,winner:0,location:{}};a.data(this,d.datakey,b),d.targets.push(this)}},teardown:function(){var b=a.data(this,d.datakey)||{};if(!b.related){a.removeData(this,d.datakey);var c=this;d.targets=a.grep(d.targets,function(a){return a!==c})}},handler:function(b,e){var f;if(e)switch(b.type){case"mousedown":case"touchstart":f=a(d.targets),"string"==typeof e.drop&&(f=f.filter(e.drop)),f.each(function(){var b=a.data(this,d.datakey);b.active=[],b.anyactive=0,b.winner=0}),e.droppable=f,c.drag.hijack(b,"dropinit",e);break;case"mousemove":case"touchmove":d.event=b,d.timer||d.tolerate(e);break;case"mouseup":case"touchend":d.timer=clearTimeout(d.timer),e.propagates&&(c.drag.hijack(b,"drop",e),c.drag.hijack(b,"dropend",e))}},locate:function(b,c){var e=a.data(b,d.datakey),f=a(b),g=f.offset()||{},h=f.outerHeight(),i=f.outerWidth(),j={elem:b,width:i,height:h,top:g.top,left:g.left,right:g.left+i,bottom:g.top+h};return e&&(e.location=j,e.index=c,e.elem=b),j},contains:function(a,b){return(b[0]||b.left)>=a.left&&(b[0]||b.right)<=a.right&&(b[1]||b.top)>=a.top&&(b[1]||b.bottom)<=a.bottom},modes:{intersect:function(a,b,c){return this.contains(c,[a.pageX,a.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(a,b,c){return Math.max(0,Math.min(c.bottom,b.bottom)-Math.max(c.top,b.top))*Math.max(0,Math.min(c.right,b.right)-Math.max(c.left,b.left))},fit:function(a,b,c){return this.contains(c,b)?1:0},middle:function(a,b,c){return this.contains(c,[b.left+.5*b.width,b.top+.5*b.height])?1:0}},sort:function(a,b){return b.winner-a.winner||a.index-b.index},tolerate:function(b){var e,f,g,h,i,j,k,l,m=0,n=b.interactions.length,o=[d.event.pageX,d.event.pageY],p=d.tolerance||d.modes[d.mode];do if(l=b.interactions[m]){if(!l)return;l.drop=[],i=[],j=l.droppable.length,p&&(g=d.locate(l.proxy)),e=0;do if(k=l.droppable[e]){if(h=a.data(k,d.datakey),f=h.location,!f)continue;h.winner=p?p.call(d,d.event,g,f):d.contains(f,o)?1:0,i.push(h)}while(++e<j);i.sort(d.sort),e=0;do(h=i[e])&&(h.winner&&l.drop.length<d.multi?(h.active[m]||h.anyactive||(c.drag.hijack(d.event,"dropstart",b,m,h.elem)[0]!==!1?(h.active[m]=1,h.anyactive+=1):h.winner=0),h.winner&&l.drop.push(h.elem)):h.active[m]&&1==h.anyactive&&(c.drag.hijack(d.event,"dropend",b,m,h.elem),h.active[m]=0,h.anyactive-=1));while(++e<j)}while(++m<n);d.last&&o[0]==d.last.pageX&&o[1]==d.last.pageY?delete d.timer:d.timer=setTimeout(function(){d.tolerate(b)},d.delay),d.last=d.event}};c.dropinit=c.dropstart=c.dropend=d}}),define("uicore/lib/jquery/jquery.event.drop.live-2.2",["require"],function(){return function(a){var b=a.event,c=b.special.drop,d=c.add,e=c.teardown;c.noBubble=!1,c.livekey="livedrop",c.add=function(e){d.apply(this,arguments);var f=a.data(this,c.datakey);!f.live&&e.selector&&(f.live=!0,b.add(this,"dropinit."+c.livekey,c.delegate))},c.teardown=function(){e.apply(this,arguments);var d=a.data(this,c.datakey)||{};d.live&&(b.remove(this,"dropinit",c.delegate),d.live=!1)},c.delegate=function(d,e){var f,g=[],h=a._data(this,"events")||{};return a.each(h||[],function(e,h){0===e.indexOf("drop")&&a.each(h,function(e,h){f=a(d.currentTarget).find(h.selector),f.length&&f.each(function(){b.add(this,h.origType+"."+c.livekey,h.origHandler||h.handler,h.data),a.inArray(this,g)<0&&g.push(this)})})}),e&&b.add(e.drag,"dragend."+c.livekey,function(){a.each(g.concat(this),function(){b.remove(this,"."+c.livekey)})}),g.length?a(g):!1}}}),define("uicore/lib/jquery/jquery.event.scrolledto",["require"],function(){return function(a){function b(b){var c,d=b.target;if(d.offsetHeight+d.scrollTop>=d.scrollHeight&&d.offsetHeight!==d.scrollHeight?c="bottom":d.scrollTop<=0&&d.offsetHeight!==d.scrollHeight?c="top":d.offsetWidth+d.scrollLeft>=d.scrollWidth&&d.offsetWidth!==d.scrollWidth?c="right":d.scrollLeft<=0&&d.offsetWidth!==d.scrollWidth&&(c="left"),c)try{a(this).trigger({type:"scrolledto",point:c})}catch(e){console.warn("Can't trigger scrolledto")}}a.event.special.scrolledto={add:function(c){a(this).on("scroll.scrolledto",c.selector,b)},remove:function(){a(this).off(".scrolledto")}}}}),define("jquery",["require","components/3rdparty-jquery/jquery","uicore/lib/jquery/jquery.event.drag-2.2","uicore/lib/jquery/jquery.event.drag.live-2.2","uicore/lib/jquery/jquery.event.drop-2.2","uicore/lib/jquery/jquery.event.drop.live-2.2","uicore/lib/jquery/jquery.event.scrolledto"],function(a){var b=a("components/3rdparty-jquery/jquery");return a("uicore/lib/jquery/jquery.event.drag-2.2")(b),a("uicore/lib/jquery/jquery.event.drag.live-2.2")(b),a("uicore/lib/jquery/jquery.event.drop-2.2")(b),a("uicore/lib/jquery/jquery.event.drop.live-2.2")(b),a("uicore/lib/jquery/jquery.event.scrolledto")(b),b}),define("underscore",[],function(){var a={};return function(){(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]
}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)}.call(a),a._.noConflict()}),define("uicore/Helpers/DatesRange",["require","underscore"],function(a){function b(){}var c=a("underscore");return c.extend(b.prototype,{days:function(a,b,c){if(a=a||new Date,b=b||0,c=c||0,0>c)throw new Error("num_days can't be less than 0.");var d=new Date(a);d.setDate(d.getDate()+b);var e=new Date(d);return e.setDate(e.getDate()+c),[d,e]},weeks:function(a,b,c,d){if(a=a||new Date,b=b||0,c=c||1,d=d||0,0>c)throw new Error("num_weeks can't be less than 0.");var e=this.week_start(a,d);e.setDate(e.getDate()+7*b);var f=new Date(e);return f.setDate(f.getDate()+7*c-1),f.setHours(23,59,59),[e,f]},months:function(a,b,c){if(a=a||new Date,b=b||0,c=c||1,0>c)throw new Error("num_months can't be less than 0.");var d=new Date(a);d.setDate(1),d.setMonth(d.getMonth()+b);var e=new Date(d);return e.setMonth(e.getMonth()+c),e.setDate(0),e.setHours(23,59,59),[d,e]},quarters:function(a,b,c){if(a=a||new Date,b=b||0,c=c||1,0>c)throw new Error("num_quarters can't be less than 0.");var d=this.quarter_start(a);d.setMonth(d.getMonth()+3*b);var e=new Date(d);return e.setMonth(e.getMonth()+3*c),e.setDate(0),e.setHours(23,59,59),[d,e]},years:function(a,b,c){if(a=a||new Date,b=b||0,c=c||1,0>c)throw new Error("num_years can't be less than 0.");var d=new Date(a);d.setDate(1),d.setMonth(0),d.setFullYear(d.getFullYear()+b);var e=new Date(d);return e.setMonth(11),e.setDate(31),e.setHours(23,59,59),e.setFullYear(e.getFullYear()+c-1),[d,e]},week_start:function(a,b){var c=new Date(a),d=c.getDay();return b=b||0,d>=b?d-=b:d=d-b+7,c.setDate(c.getDate()-d),c},quarter_start:function(a){var b=new Date(a);return b.setDate(1),b.setMonth(3*Math.floor(b.getMonth()/3)),b},quarter_end:function(a){var b=new Date(a);return b.setDate(1),b.setMonth(3*Math.floor(b.getMonth()/3)+3),b.setDate(0),b},parse:function(a,b){var d,e,f=new Date;switch(c.isDate(b)||c.isString(b)?f=new Date(b):b&&(c.isDate(b.base_date)||c.isString(b.base_date))&&(f=new Date(b.base_date)),f.setHours(0,0,0,0),a=a.toLowerCase()){case"today":return[f,new Date(f.setHours(23,59,59))];case"yesterday":return this.days(f,-1);case"last 7 days":return this.days(f,-7,7);case"last 30 days":return this.days(f,-30,30);case"last 60 days":return this.days(f,-60,60);case"last 90 days":return this.days(f,-90,90);case"this week":return this.weeks(f);case"last week":return this.weeks(f,-1);case"this month":return this.months(f);case"last month":return this.months(f,-1);case"next month":return this.months(f,1);case"this year":return this.years(f);case"last year":return this.years(f,-1);case"this quarter":return this.quarters(f);case"last quarter":return this.quarters(f,-1);default:throw new Error("Not supported timeframe: "+a)}return[d,e]}}),new b}),define("uicore/Helpers/Pluralize",["require"],function(){return function(a,b,c){return 1!==Math.abs(a)?c||b+"s":b}}),define("uicore/Helpers/Dates",["require","underscore","./DatesRange","./Pluralize"],function(a){function b(a,b){if(!c.isNumber(b))return new Date(a);var d=new Date(a).getTime()+6e4*((new Date).getTimezoneOffset()+b),e=new Date;return e.setTime(d),e}var c=a("underscore"),d=a("./DatesRange"),e=a("./Pluralize"),f=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=function(a,b){for(a=a.toString(),b=b||2;a.length<b;)a="0"+a;return a},k={g:function(a){return a.getHours()%12||12},h:function(a){return j(this.g(a))},H:function(a){return j(a.getHours())},i:function(a){return j(a.getMinutes())},s:function(a){return j(a.getSeconds())},a:function(a){return a.getHours()/12>=1?"pm":"am"},A:function(a){return a.getHours()/12>=1?"PM":"AM"},l:function(a){return h[a.getDay()]},D:function(a){return i[a.getDay()]},d:function(a){return j(a.getDate())},F:function(a){return f[a.getMonth()]},M:function(a){return g[a.getMonth()]},m:function(a){return j(a.getMonth()+1)},n:function(a){return a.getMonth()+1},j:function(a){return a.getDate()},y:function(a){return String(a.getFullYear()).slice(-2)},Y:function(a){return a.getFullYear()}},l={time:"g:i a",date:"M j, Y",datetime:"M j, g:i a",datetime_short:"M j",datetime_full:"M j, Y, g:i a"},m=60,n=60*m,o=24*n,p=30*o,q=365*o,r=function(a){this.offset=c.isNumber(a)?a:null};return c.extend(r.prototype,{RANGE_DELIM:"..",labels:{months:f,months_short:g,weekdays:h,weekdays_short:i},formats:l,getISODay:function(a){return a.getDay()||7},localize:function(a){if(arguments.length>0&&!c.isNumber(a))throw new Error("offset should be a number or pass no agruments.");return new r(a)},cast:function(a){return a=new Date(a||void 0),isNaN(Date.parse(a))?null:this.local(a)},make:function(a,b){if(isNaN(Date.parse(a)))return"";var d=this.local(new Date(a));return c.reduce(b.split(""),function(a,b){return a+(k[b]?k[b](d):b)},"")},duration:function(a,b){b=b||{};for(var c,d,e={label:[]},f=[["y",q],["m",p],["d",o],["hr",n],["min",m],["s",1]];f.length;)c=f.shift(),d=Math.floor(a/c[1]),d&&(a%=c[1],e[c[0]]=d,e.label.push(d+(b[c[0]]||c[0])));return e.label=e.label.join(" "),e},time:function(a){return this.make(a,l.time)},date:function(a){return this.make(a,l.date)},datetime:function(a){return this.make(a,l.datetime)},datetime_short:function(a){return this.make(a,l.datetime_short)},datetime_full:function(a){return this.make(a,l.datetime_full)},relative:function(){return function(a,b){b=b||new Date;var d,f,g,h=Math.abs(a.valueOf()-b.valueOf())/1e3,i=a.valueOf()>b.valueOf();10>=h?g="a moment":45>=h?(f=parseInt(h),g="second"):90>=h?g="a minute":45*m>=h?(f=parseInt(h/m),g="minute"):90*m>=h?g="an hour":22*n>=h?(f=parseInt(h/n),g="hour"):36*n>=h?g="a day":25*o>=h?(f=parseInt(h/o),g="day"):45*o>=h?g="a month":345*o>=h?(f=parseInt(h/p),g="month"):547*o>=h?g="a year":(f=parseInt(h/q),g="year"),d=c.isNumber(f)?f+" "+e(f,g):g,i?d="in "+d:d+=" ago";var j={"a day ago":"yesterday","in a day":"tomorrow","a month ago":"last month","a year ago":"last year"};return j[d]||d}}(),local:function(a){return b(a,this.offset)},parse_range:function(a){return d.parse(a)}}),new r}),define("components/3rdparty-handlebars/handlebars",[],function(){var a=function(){var a=function(){function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d,f){var g,h;3===arguments.length?(f=d,d=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},d?(h=d[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new e.ProgramNode(d,c,g)):this.inverse=new e.ProgramNode(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!d;this.sexpr=a instanceof e.SexprNode?a:new e.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,c,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new d(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=c,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(c||e).strip.left=a.strip.right,(e||c).strip.right=f.strip.left,e&&!c&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;i>h;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new d("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return c=e}(c),h=function(){var a,b=function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g){var h=g.length-1;switch(f){case 1:return new e.ProgramNode(g[h-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[h-1],g[h],this._$);break;case 4:this.$=new e.ProgramNode(g[h-2],g[h-1],g[h],this._$);break;case 5:this.$=new e.ProgramNode(g[h-1],g[h],[],this._$);break;case 6:this.$=new e.ProgramNode(g[h],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[h]];break;case 10:g[h-1].push(g[h]),this.$=g[h-1];break;case 11:this.$=new e.BlockNode(g[h-2],g[h-1].inverse,g[h-1],g[h],this._$);break;case 12:this.$=new e.BlockNode(g[h-2],g[h-1],g[h-1].inverse,g[h],this._$);break;case 13:this.$=g[h];break;case 14:this.$=g[h];break;case 15:this.$=new e.ContentNode(g[h],this._$);break;case 16:this.$=new e.CommentNode(g[h],this._$);break;case 17:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 18:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 19:this.$={path:g[h-1],strip:a(g[h-2],g[h])};break;case 20:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 21:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 22:this.$=new e.PartialNode(g[h-2],g[h-1],a(g[h-3],g[h]),this._$);break;case 23:this.$=a(g[h-1],g[h]);break;case 24:this.$=new e.SexprNode([g[h-2]].concat(g[h-1]),g[h],this._$);break;case 25:this.$=new e.SexprNode([g[h]],null,this._$);break;case 26:this.$=g[h];break;case 27:this.$=new e.StringNode(g[h],this._$);break;case 28:this.$=new e.IntegerNode(g[h],this._$);break;case 29:this.$=new e.BooleanNode(g[h],this._$);break;case 30:this.$=g[h];break;case 31:g[h-1].isHelper=!0,this.$=g[h-1];break;case 32:this.$=new e.HashNode(g[h],this._$);break;case 33:this.$=[g[h-2],g[h]];break;case 34:this.$=new e.PartialNameNode(g[h],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[h],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[h],this._$));break;case 37:this.$=new e.DataNode(g[h],this._$);break;case 38:this.$=new e.IdNode(g[h],this._$);break;case 39:g[h-2].push({part:g[h],separator:g[h-1]}),this.$=g[h-2];break;case 40:this.$=[{part:g[h]}];break;case 43:this.$=[];break;case 44:g[h-1].push(g[h]);break;case 47:this.$=[g[h]];break;case 48:g[h-1].push(g[h])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a
}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),this.opcode(a.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;d>c;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=a.log,i=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=f,b=g[a];return"this.compilerInfo = ["+a+",'"+b+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},h("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}a.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+g+"}";return h("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;d>c;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],e.push(1===b?"depth0":"depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new i("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;a>i;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var j="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),k=d.RESERVED_WORDS={},l=0,m=j.length;m>l;l++)k[j[l]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1},e=d}(d,c),l=function(a,b,c,d,e){var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,j,k);return l}();return a}),define("handlebars",["require","underscore","uicore/Helpers/Dates","components/3rdparty-handlebars/handlebars"],function(a){var b=a("underscore"),c=a("uicore/Helpers/Dates"),d=a("components/3rdparty-handlebars/handlebars");return d.registerHelper("cd-if",function(a){var b;if("and"===a.hash.type){for(b in a.hash)if(b.match(/^var([0-9]+)/)&&!a.hash[b])return"";return a.fn(this)}if("or"===a.hash.type){for(b in a.hash)if(b.match(/^var([0-9]+)/)&&a.hash[b])return a.fn(this);return""}}),d.registerHelper("cd-ifvalue",function(a,b,c){var d=c.fn,e=c.inverse;return a===b?d():e()}),d.registerHelper("cd-object-each",function(a,c){var d=c.fn;c.inverse;var e="";if(!b.isArray(a))for(var f in a)e+=d(a[f]);return e}),d.registerHelper("if-eq",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),d.registerHelper("if-gt",function(a,b,c){return a>b?c.fn(this):c.inverse(this)}),d.registerHelper("if-lt",function(a,b,c){return b>a?c.fn(this):c.inverse(this)}),d.registerHelper("if-gt-eq",function(a,b,c){return a>=b?c.fn(this):c.inverse(this)}),d.registerHelper("if-lt-eq",function(a,b,c){return b>=a?c.fn(this):c.inverse(this)}),d.registerHelper("if-some",function(a){var b=!1,c=[].slice.call(arguments);for(a=c.pop();!b&&c.length;)b=c.shift()||b;return b?a.fn(this):a.inverse(this)}),d.registerHelper("if-all",function(a){var b=arguments.length>1,c=[].slice.call(arguments);for(a=c.pop();b&&c.length;)b=c.shift()&&b;return b?a.fn(this):a.inverse(this)}),d.registerHelper("if-none",function(a){var b=[].slice.call(arguments),c=!0;for(a=b.pop();c&&b.length;)c=!b.shift()&&c;return c?a.fn(this):a.inverse(this)}),d.registerHelper("json",function(a){return new d.SafeString(void 0===a||null===a?"":JSON.stringify(a))}),d.registerHelper("date",function(a,e){e=2===arguments.length?"date":e;var f=b.isUndefined(c[e])?c.make(a,e):c[e](a);return new d.SafeString(f)}),d.registerHelper("truncate",function(a,b){return b=isNaN(b)?100:b,new d.SafeString(a.slice(0,b))}),d.registerHelper("spaceless",function(a){return a.fn().replace(/^\s*|\s*$/gi,"").replace(/>\s*/gi,">").replace(/\s*</gi,"<")}),d.registerHelper("iter",function(a,c){var d="";if(b.isEmpty(a))d=c.inverse(this);else try{b.each(a,function(a,e){b.isObject(a)||(a={value:a}),a.loop={index:e},d+=c.fn(a)})}catch(e){d="[ non-iterable context ]"}return d}),d.registerHelper("magicwrap",function(a){a=a||"";for(var b,c="",e=a.split("");e.length&&(b=e.splice(0,2),0!==b.length);)c=c+b.join("")+"&#x200B;";return new d.SafeString(c)}),d.registerHelper("wraptruncate",function(a,b){b=isNaN(b)?100:b,a=a.truncate(b)||"";for(var c,e="",f=a.split("");f.length&&(c=f.splice(0,2),0!==c.length);)e=e+c.join("")+"&#x200B;";return new d.SafeString(e)}),d}),define("clsextend",["require"],function(){function a(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var b=function(){},c=function(c,d,e){var f;return f=d&&d.hasOwnProperty("constructor")?d.constructor:function(){return c.apply(this,arguments)},a(f,c),b.prototype=c.prototype,f.prototype=new b,d&&a(f.prototype,d),e&&a(f,e),f.prototype.constructor=f,f.__super__=c.prototype,f.prototype.__class__=f,f.prototype.__parent__=c.prototype,f};return function(a,b){var d=c(this,a,b);return d.extend=this.extend,d}}),define("dombind",["require","jquery","underscore"],function(a){var b=a("underscore"),c=a("jquery"),d={dombind:function(a,d){var e=c(d),f=function(d){d.preventDefault();var e=c(d.currentTarget).attr("data-action");e=e.split?e.split(":"):[e],e=b.map(e,function(a){var b=a.match(/^(-|\+)?\d*\.?\d+$/)?parseFloat(a):0/0;return isNaN(b)?""===a||"null"===a?null:a:b}),a.trigger.apply(a,["action:"+e[0]].concat(e.slice(1),[d,d.currentTarget]))};return{start:function(){return e.on("click.dombind","[data-action]",f),this},stop:function(){return e.off(".dombind"),this}}.start()},dombind_initialize:function(){return this.dombind_handler=this.dombind(this,this.el),this},dombind_off:function(){return this.dombind_handler&&this.dombind_handler.stop(),this}};return d.watch_ctl=d.dombind,d}),define("uicore/lib/base64",[],function(){var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=a._utf8_encode(b);k<b.length;)c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return j},decode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<b.length;)f=this._keyStr.indexOf(b.charAt(k++)),g=this._keyStr.indexOf(b.charAt(k++)),h=this._keyStr.indexOf(b.charAt(k++)),i=this._keyStr.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!==h&&(j+=String.fromCharCode(d)),64!==i&&(j+=String.fromCharCode(e));return j=a._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b},_utf8_decode:function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b}};return a}),define("app/Deprecated/lib/ns/ns",[],function(){function a(b,c,d){function e(a,d){var f=a.shift();if("undefined"==typeof d[f]&&(d[f]={}),"object"!=typeof d[f]&&"function"!=typeof d[f])throw"window.[...]."+f+" can not be extended";if(a.length>0)e(a,d[f]);else if("object"==typeof c)for(var g in c)c.hasOwnProperty(g)&&(d[f][g]=c[g]);else d[f]=c,"function"==typeof d[f]&&(d[f].prototype.namespace=b,d[f].prototype.ns=function(){return this.namespace},d[f].ns=function(){return this.prototype.namespace});return d[f]}"undefined"==typeof c&&(c={}),"undefined"==typeof d&&(d=window);var f;for(f=0;f<a.plugins.length;f++)a.plugins[f].apply(null,arguments);return e(b.split("."),d)}return a.plugins=[],a}),define("app/Deprecated/lib/ns/resolve",[],function(){function a(a,b){function c(a,b){if(!b)return b;var d=a.shift();return 0===a.length?b[d]:c(a,b[d])}return"undefined"==typeof a?void 0:("undefined"==typeof b&&(b=window),c(a.split("."),b))}return a});var Prototype={Version:"1.7",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:a.indexOf("AppleWebKit/")>-1,Gecko:a.indexOf("Gecko")>-1&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!=typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;return a.__proto__&&a.__proto__!==b.__proto__&&(c=!0),a=b=null,c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)</script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);var Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;c>b;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a}},Class=function(){function a(){}function b(){function b(){this.initialize.apply(this,arguments)}var c=null,d=$A(arguments);Object.isFunction(d[0])&&(c=d.shift()),Object.extend(b,Class.Methods),b.superclass=c,b.subclasses=[],c&&(a.prototype=c.prototype,b.prototype=new a,c.subclasses.push(b));for(var e=0,f=d.length;f>e;e++)b.addMethods(d[e]);return b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction),b.prototype.constructor=b,b}function c(a){var b=this.superclass&&this.superclass.prototype,c=Object.keys(a);d&&(a.toString!=Object.prototype.toString&&c.push("toString"),a.valueOf!=Object.prototype.valueOf&&c.push("valueOf"));for(var e=0,f=c.length;f>e;e++){var g=c[e],h=a[g];if(b&&Object.isFunction(h)&&"$super"==h.argumentNames()[0]){var i=h;h=function(a){return function(){return b[a].apply(this,arguments)}}(g).wrap(i),h.valueOf=i.valueOf.bind(i),h.toString=i.toString.bind(i)}this.prototype[g]=h}return this}var d=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:b,Methods:{addMethods:c}}}();!function(){function a(a){switch(a){case null:return u;case void 0:return v}var b=typeof a;switch(b){case"boolean":return w;case"number":return x;case"string":return y}return z}function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){try{return s(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(b){if(b instanceof RangeError)return"...";throw b}}function d(a){return e("",{"":a},[])}function e(b,c,d){var f=c[b],g=typeof f;a(f)===z&&"function"==typeof f.toJSON&&(f=f.toJSON(b));var h=t.call(f);switch(h){case C:case B:case D:f=f.valueOf()}switch(f){case null:return"null";case!0:return"true";case!1:return"false"}switch(g=typeof f){case"string":return f.inspect(!0);case"number":return isFinite(f)?String(f):"null";case"object":for(var i=0,j=d.length;j>i;i++)if(d[i]===f)throw new TypeError;d.push(f);var k=[];if(h===E){for(var i=0,j=f.length;j>i;i++){var l=e(i,f,d);k.push("undefined"==typeof l?"null":l)}k="["+k.join(",")+"]"}else{for(var m=Object.keys(f),i=0,j=m.length;j>i;i++){var b=m[i],l=e(b,f,d);"undefined"!=typeof l&&k.push(b.inspect(!0)+":"+l)}k="{"+k.join(",")+"}"}return d.pop(),k}}function f(a){return JSON.stringify(a)}function g(a){return $H(a).toQueryString()}function h(a){return a&&a.toHTML?a.toHTML():String.interpret(a)}function i(b){if(a(b)!==z)throw new TypeError;var c=[];for(var d in b)b.hasOwnProperty(d)&&c.push(d);return c}function j(a){var b=[];for(var c in a)b.push(a[c]);return b}function k(a){return b({},a)}function l(a){return!(!a||1!=a.nodeType)}function m(a){return t.call(a)===E}function n(a){return a instanceof Hash}function o(a){return t.call(a)===A}function p(a){return t.call(a)===D}function q(a){return t.call(a)===C}function r(a){return t.call(a)===F}function s(a){return"undefined"==typeof a}var t=Object.prototype.toString,u="Null",v="Undefined",w="Boolean",x="Number",y="String",z="Object",A="[object Function]",B="[object Boolean]",C="[object Number]",D="[object String]",E="[object Array]",F="[object Date]",G=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"==typeof JSON.stringify(Prototype.K),H="function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({});H&&(m=Array.isArray),b(Object,{extend:b,inspect:c,toJSON:G?f:d,toQueryString:g,toHTML:h,keys:Object.keys||i,values:j,clone:k,isElement:l,isArray:m,isHash:n,isFunction:o,isString:p,isNumber:q,isDate:r,isUndefined:s})}(),Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(b,c){return b=j.call(b,0),a(b,c)}function c(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]}function d(b){var c=this,d=j.call(arguments,1);return function(e){var f=a([e||window.event],d);return c.apply(b,f)}}function e(){if(!arguments.length)return this;var a=this,c=j.call(arguments,0);return function(){var d=b(c,arguments);return a.apply(this,d)}}function f(a){var b=this,c=j.call(arguments,1);return a=1e3*a,window.setTimeout(function(){return b.apply(b,c)},a)}function g(){var b=a([.01],arguments);return this.delay.apply(this,b)}function h(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}}function i(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}var j=Array.prototype.slice;return{argumentNames:c,bindAsEventListener:d,curry:e,delay:f,defer:g,wrap:h,methodize:i}}()),function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b),a.toJSON||(a.toJSON=c)}(Date.prototype),RegExp.prototype.match=RegExp.prototype.test,RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a,this.frequency=b,this.currentlyExecuting=!1,this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=!1,a}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}}),Object.extend(String.prototype,function(){function prepareReplacement(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function gsub(a,b){var c,d="",e=this;if(b=prepareReplacement(b),Object.isString(a)&&(a=RegExp.escape(a)),!a.length&&!a.source)return b=b(""),b+e.split("").join(b)+b;for(;e.length>0;)(c=e.match(a))?(d+=e.slice(0,c.index),d+=String.interpret(b(c)),e=e.slice(c.index+c[0].length)):(d+=e,e="");
return d}function sub(a,b,c){return b=prepareReplacement(b),c=Object.isUndefined(c)?1:c,this.gsub(a,function(a){return--c<0?a[0]:b(a)})}function scan(a,b){return this.gsub(a,b),String(this)}function truncate(a,b){return a=a||30,b=Object.isUndefined(b)?"...":b,this.length>a?this.slice(0,a-b.length)+b:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var a=new RegExp(Prototype.ScriptFragment,"img"),b=new RegExp(Prototype.ScriptFragment,"im");return(this.match(a)||[]).map(function(a){return(a.match(b)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return b?b[1].split(a||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift()),d=b.length>1?b.join("="):b[0];void 0!=d&&(d=decodeURIComponent(d)),c in a?(Object.isArray(a[c])||(a[c]=[a[c]]),a[c].push(d)):a[c]=d}return a}):{}}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(a){return 1>a?"":new Array(a+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"}function unfilterJSON(a){return this.replace(a||Prototype.JSONFilter,"$1")}function isJSON(){var a=this;return a.blank()?!1:(a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@"),a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(a))}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.test(json)&&(json=json.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!sanitize||json.isJSON())return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var a=this.unfilterJSON();return JSON.parse(a)}function include(a){return this.indexOf(a)>-1}function startsWith(a){return 0===this.lastIndexOf(a,0)}function endsWith(a){var b=this.length-a.length;return b>=0&&this.indexOf(a,b)===b}function empty(){return""==this}function blank(){return/^\s*$/.test(this)}function interpolate(a,b){return new Template(this,b).evaluate(a)}var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&"function"==typeof JSON.parse&&JSON.parse('{"test": true}').test;return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:startsWith,endsWith:endsWith,empty:empty,blank:blank,interpolate:interpolate}}());var Template=Class.create({initialize:function(a,b){this.template=a.toString(),this.pattern=b||Template.Pattern},evaluate:function(a){return a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements()),this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,e=b[3],f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;if(b=f.exec(e),null==b)return c;for(;null!=b;){var g=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1];if(d=d[g],null==d||""==b[3])break;e=e.substring("["==b[3]?b[1].length:b[0].length),b=f.exec(e)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={},Enumerable=function(){function a(a,b){var c=0;try{this._each(function(d){a.call(b,d,c++)})}catch(d){if(d!=$break)throw d}return this}function b(a,b,c){var d=-a,e=[],f=this.toArray();if(1>a)return f;for(;(d+=a)<f.length;)e.push(f.slice(d,d+a));return e.collect(b,c)}function c(a,b){a=a||Prototype.K;var c=!0;return this.each(function(d,e){if(c=c&&!!a.call(b,d,e),!c)throw $break}),c}function d(a,b){a=a||Prototype.K;var c=!1;return this.each(function(d,e){if(c=!!a.call(b,d,e))throw $break}),c}function e(a,b){a=a||Prototype.K;var c=[];return this.each(function(d,e){c.push(a.call(b,d,e))}),c}function f(a,b){var c;return this.each(function(d,e){if(a.call(b,d,e))throw c=d,$break}),c}function g(a,b){var c=[];return this.each(function(d,e){a.call(b,d,e)&&c.push(d)}),c}function h(a,b,c){b=b||Prototype.K;var d=[];return Object.isString(a)&&(a=new RegExp(RegExp.escape(a))),this.each(function(e,f){a.match(e)&&d.push(b.call(c,e,f))}),d}function i(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;return this.each(function(c){if(c==a)throw b=!0,$break}),b}function j(a,b){return b=Object.isUndefined(b)?null:b,this.eachSlice(a,function(c){for(;c.length<a;)c.push(b);return c})}function k(a,b,c){return this.each(function(d,e){a=b.call(c,a,d,e)}),a}function l(a){var b=$A(arguments).slice(1);return this.map(function(c){return c[a].apply(c,b)})}function m(a,b){a=a||Prototype.K;var c;return this.each(function(d,e){d=a.call(b,d,e),(null==c||d>=c)&&(c=d)}),c}function n(a,b){a=a||Prototype.K;var c;return this.each(function(d,e){d=a.call(b,d,e),(null==c||c>d)&&(c=d)}),c}function o(a,b){a=a||Prototype.K;var c=[],d=[];return this.each(function(e,f){(a.call(b,e,f)?c:d).push(e)}),[c,d]}function p(a){var b=[];return this.each(function(c){b.push(c[a])}),b}function q(a,b){var c=[];return this.each(function(d,e){a.call(b,d,e)||c.push(d)}),c}function r(a,b){return this.map(function(c,d){return{value:c,criteria:a.call(b,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}).pluck("value")}function s(){return this.map()}function t(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var c=[this].concat(b).map($A);return this.map(function(b,d){return a(c.pluck(d))})}function u(){return this.toArray().length}function v(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:a,eachSlice:b,all:c,every:c,any:d,some:d,collect:e,map:e,detect:f,findAll:g,select:g,filter:g,grep:h,include:i,member:i,inGroupsOf:j,inject:k,invoke:l,max:m,min:n,partition:o,pluck:p,reject:q,sortBy:r,toArray:s,entries:s,zip:t,size:u,inspect:v,find:f}}();Array.from=$A,function(){function a(a,b){for(var c=0,d=this.length>>>0;d>c;c++)c in this&&a.call(b,this[c],c,this)}function b(){return this.length=0,this}function c(){return this[0]}function d(){return this[this.length-1]}function e(){return this.select(function(a){return null!=a})}function f(){return this.inject([],function(a,b){return Object.isArray(b)?a.concat(b.flatten()):(a.push(b),a)})}function g(){var a=r.call(arguments,0);return this.select(function(b){return!a.include(b)})}function h(a){return(a===!1?this.toArray():this)._reverse()}function i(a){return this.inject([],function(b,c,d){return 0!=d&&(a?b.last()==c:b.include(c))||b.push(c),b})}function j(a){return this.uniq().findAll(function(b){return a.detect(function(a){return b===a})})}function k(){return r.call(this,0)}function l(){return this.length}function m(){return"["+this.map(Object.inspect).join(", ")+"]"}function n(a,b){b||(b=0);var c=this.length;for(0>b&&(b=c+b);c>b;b++)if(this[b]===a)return b;return-1}function o(a,b){b=isNaN(b)?this.length:(0>b?this.length+b:b)+1;var c=this.slice(0,b).reverse().indexOf(a);return 0>c?c:b-c-1}function p(){for(var a,b=r.call(this,0),c=0,d=arguments.length;d>c;c++)if(a=arguments[c],!Object.isArray(a)||"callee"in a)b.push(a);else for(var e=0,f=a.length;f>e;e++)b.push(a[e]);return b}var q=Array.prototype,r=q.slice,s=q.forEach;s||(s=a),Object.extend(q,Enumerable),q._reverse||(q._reverse=q.reverse),Object.extend(q,{_each:s,clear:b,first:c,last:d,compact:e,flatten:f,without:g,reverse:h,uniq:i,intersect:j,clone:k,toArray:k,size:l,inspect:m});var t=function(){return 1!==[].concat(arguments)[0][0]}(1,2);t&&(q.concat=p),q.indexOf||(q.indexOf=n),q.lastIndexOf||(q.lastIndexOf=o)}();var Hash=Class.create(Enumerable,function(){function a(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)}function b(a){for(var b in this._object){var c=this._object[b],d=[b,c];d.key=b,d.value=c,a(d)}}function c(a,b){return this._object[a]=b}function d(a){return this._object[a]!==Object.prototype[a]?this._object[a]:void 0}function e(a){var b=this._object[a];return delete this._object[a],b}function f(){return Object.clone(this._object)}function g(){return this.pluck("key")}function h(){return this.pluck("value")}function i(a){var b=this.detect(function(b){return b.value===a});return b&&b.key}function j(a){return this.clone().update(a)}function k(a){return new Hash(a).inject(this,function(a,b){return a.set(b.key,b.value),a})}function l(a,b){return Object.isUndefined(b)?a:a+"="+encodeURIComponent(String.interpret(b))}function m(){return this.inject([],function(a,b){var c=encodeURIComponent(b.key),d=b.value;if(d&&"object"==typeof d){if(Object.isArray(d)){for(var e,f=[],g=0,h=d.length;h>g;g++)e=d[g],f.push(l(c,e));return a.concat(f)}}else a.push(l(c,d));return a}).join("&")}function n(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"}function o(){return new Hash(this)}return{initialize:a,_each:b,set:c,get:d,unset:e,toObject:f,toTemplateReplacements:f,keys:g,values:h,index:i,merge:j,update:k,toQueryString:m,inspect:n,toJSON:f,clone:o}}());Hash.from=$H,Object.extend(Number.prototype,function(){function a(){return this.toPaddedString(2,16)}function b(){return this+1}function c(a,b){return $R(0,this,!0).each(a,b),this}function d(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c}function e(){return Math.abs(this)}function f(){return Math.round(this)}function g(){return Math.ceil(this)}function h(){return Math.floor(this)}return{toColorPart:a,succ:b,times:c,toPaddedString:d,abs:e,round:f,ceil:g,floor:h}}());var ObjectRange=Class.create(Enumerable,function(){function a(a,b,c){this.start=a,this.end=b,this.exclusive=c}function b(a){for(var b=this.start;this.include(b);)a(b),b=b.succ()}function c(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}return{initialize:a,_each:b,include:c}}()),Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0};if(Ajax.Responders={responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(e){if(Object.isFunction(e[a]))try{e[a].apply(e,[b,c,d])}catch(f){}})}},Object.extend(Ajax.Responders,Enumerable),Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}}),Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0},Object.extend(this.options,a||{}),this.options.method=this.options.method.toLowerCase(),Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}}),Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,a,b){$super(b),this.transport=Ajax.getTransport(),this.request(a)},request:function(a){this.url=a,this.method=this.options.method;var b=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(b+=(b?"&":"")+"_method="+this.method,this.method="post"),b&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+b),this.parameters=b.toQueryParams();try{var c=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(c),Ajax.Responders.dispatch("onCreate",this,c),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1),this.transport.onreadystatechange=this.onStateChange.bind(this),this.setRequestHeaders(),this.body="post"==this.method?this.options.postBody||b:null,this.transport.send(this.body),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(d){this.dispatchException(d)}},onStateChange:function(){var a=this.transport.readyState;a>1&&(4!=a||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(a["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(a.Connection="close")),"object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;d>c;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var e in a)this.transport.setRequestHeader(e,a[e])},success:function(){var a=this.getStatus();return!a||a>=200&&300>a||304==a},getStatus:function(){try{return 1223===this.transport.status?204:this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){var b=Ajax.Request.Events[a],c=new Ajax.Response(this);if("Complete"==b){try{this._complete=!0,(this.options["on"+c.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(c,c.headerJSON)}catch(d){this.dispatchException(d)}var e=c.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&e&&e.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&this.evalResponse()}try{(this.options["on"+b]||Prototype.emptyFunction)(c,c.headerJSON),Ajax.Responders.dispatch("on"+b,this,c,c.headerJSON)}catch(d){this.dispatchException(d)}"Complete"==b&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a),Ajax.Responders.dispatch("onException",this,a)}}),Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"],Ajax.Response=Class.create({initialize:function(a){this.request=a;var b=this.transport=a.transport,c=this.readyState=b.readyState;if((c>2&&!Prototype.Browser.IE||4==c)&&(this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(b.responseText),this.headerJSON=this._getHeaderJSON()),4==c){var d=b.responseXML;this.responseXML=Object.isUndefined(d)?null:d,this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;a=decodeURIComponent(escape(a));try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}}),Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,a,b,c){this.container={success:a.success||a,failure:a.failure||(a.success?null:a)},c=Object.clone(c);var d=c.onComplete;c.onComplete=function(a,b){this.updateContent(a.responseText),Object.isFunction(d)&&d(a,b)}.bind(this),$super(b,c)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;if(c.evalScripts||(a=a.stripScripts()),b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d={};d[c.insertion]=a,b.insert(d)}else c.insertion(b,a);else b.update(a)}}),Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,a,b,c){$super(c),this.onComplete=this.options.onComplete,this.frequency=this.options.frequency||2,this.decay=this.options.decay||1,this.updater={},this.container=a,this.url=b,this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this),this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0,clearTimeout(this.timer),(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText),this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}}),Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(a,b){for(var c=[],d=document.evaluate(a,$(b)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),e=0,f=d.snapshotLength;f>e;e++)c.push(Element.extend(d.snapshotItem(e)));return c}),!Node)var Node={};Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),function(a){function b(a,b){return"select"===a?!1:"type"in b?!1:!0}var c=function(){try{var a=document.createElement('<input name="x">');return"input"===a.tagName.toLowerCase()&&"x"===a.name}catch(b){return!1}}(),d=a.Element;a.Element=function(a,d){d=d||{},a=a.toLowerCase();var e=Element.cache;if(c&&d.name)return a="<"+a+' name="'+d.name+'">',delete d.name,Element.writeAttribute(document.createElement(a),d);e[a]||(e[a]=Element.extend(document.createElement(a)));var f=b(a,d)?e[a].cloneNode(!1):document.createElement(a);return Element.writeAttribute(f,d)},Object.extend(a.Element,d||{}),d&&(a.Element.prototype=d.prototype)}(this),Element.idCounter=1,Element.cache={},Element._purgeElement=function(a){var b=a._prototypeUID;b&&(Element.stopObserving(a),a._prototypeUID=void 0,delete Element.Storage[b])},Element.Methods={visible:function(a){return"none"!=$(a).style.display},toggle:function(a){return a=$(a),Element[Element.visible(a)?"hide":"show"](a),a},hide:function(a){return a=$(a),a.style.display="none",a},show:function(a){return a=$(a),a.style.display="",a},remove:function(a){return a=$(a),a.parentNode.removeChild(a),a},update:function(){function a(a,b){a=$(a);for(var c=Element._purgeElement,g=a.getElementsByTagName("*"),h=g.length;h--;)c(g[h]);if(b&&b.toElement&&(b=b.toElement()),Object.isElement(b))return a.update().insert(b);b=Object.toHTML(b);var i=a.tagName.toUpperCase();if("SCRIPT"===i&&f)return a.text=b,a;if(e)if(i in Element._insertionTranslations.tags){for(;a.firstChild;)a.removeChild(a.firstChild);Element._getContentFromAnonymousElement(i,b.stripScripts()).each(function(b){a.appendChild(b)})}else if(d&&Object.isString(b)&&b.indexOf("<link")>-1){for(;a.firstChild;)a.removeChild(a.firstChild);var j=Element._getContentFromAnonymousElement(i,b.stripScripts(),!0);j.each(function(b){a.appendChild(b)})}else a.innerHTML=b.stripScripts();else a.innerHTML=b.stripScripts();return b.evalScripts.bind(b).defer(),a}var b=function(){var a=document.createElement("select"),b=!0;return a.innerHTML='<option value="test">test</option>',a.options&&a.options[0]&&(b="OPTION"!==a.options[0].nodeName.toUpperCase()),a=null,b}(),c=function(){try{var a=document.createElement("table");if(a&&a.tBodies){a.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var b="undefined"==typeof a.tBodies[0];return a=null,b}}catch(c){return!0}}(),d=function(){try{var a=document.createElement("div");a.innerHTML="<link>";var b=0===a.childNodes.length;return a=null,b}catch(c){return!0}}(),e=b||c||d,f=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(c){b=!0}return a=null,b}();return a}(),replace:function(a,b){if(a=$(a),b&&b.toElement)b=b.toElement();else if(!Object.isElement(b)){b=Object.toHTML(b);var c=a.ownerDocument.createRange();c.selectNode(a),b.evalScripts.bind(b).defer(),b=c.createContextualFragment(b.stripScripts())}return a.parentNode.replaceChild(b,a),a},insert:function(a,b){a=$(a),(Object.isString(b)||Object.isNumber(b)||Object.isElement(b)||b&&(b.toElement||b.toHTML))&&(b={bottom:b});var c,d,e,f;for(var g in b)c=b[g],g=g.toLowerCase(),d=Element._insertionTranslations[g],c&&c.toElement&&(c=c.toElement()),Object.isElement(c)?d(a,c):(c=Object.toHTML(c),e=("before"==g||"after"==g?a.parentNode:a).tagName.toUpperCase(),f=Element._getContentFromAnonymousElement(e,c.stripScripts()),("top"==g||"after"==g)&&f.reverse(),f.each(d.curry(a)),c.evalScripts.bind(c).defer());return a},wrap:function(a,b,c){return a=$(a),Object.isElement(b)?$(b).writeAttribute(c||{}):b=Object.isString(b)?new Element(b,c):new Element("div",b),a.parentNode&&a.parentNode.replaceChild(b,a),b.appendChild(a),b},inspect:function(a){a=$(a);var b="<"+a.tagName.toLowerCase();return $H({id:"id",className:"class"}).each(function(c){var d=c.first(),e=c.last(),f=(a[d]||"").toString();f&&(b+=" "+e+"="+f.inspect(!0))}),b+">"},recursivelyCollect:function(a,b,c){a=$(a),c=c||-1;for(var d=[];(a=a[b])&&(1==a.nodeType&&d.push(Element.extend(a)),d.length!=c););return d},ancestors:function(a){return Element.recursivelyCollect(a,"parentNode")},descendants:function(a){return Element.select(a,"*")},firstDescendant:function(a){for(a=$(a).firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return $(a)},immediateDescendants:function(a){for(var b=[],c=$(a).firstChild;c;)1===c.nodeType&&b.push(Element.extend(c)),c=c.nextSibling;return b},previousSiblings:function(a){return Element.recursivelyCollect(a,"previousSibling")},nextSiblings:function(a){return Element.recursivelyCollect(a,"nextSibling")},siblings:function(a){return a=$(a),Element.previousSiblings(a).reverse().concat(Element.nextSiblings(a))},match:function(a,b){return a=$(a),Object.isString(b)?Prototype.Selector.match(a,b):b.match(a)},up:function(a,b,c){if(a=$(a),1==arguments.length)return $(a.parentNode);var d=Element.ancestors(a);return Object.isNumber(b)?d[b]:Prototype.Selector.find(d,b,c)},down:function(a,b,c){return a=$(a),1==arguments.length?Element.firstDescendant(a):Object.isNumber(b)?Element.descendants(a)[b]:Element.select(a,b)[c||0]},previous:function(a,b,c){return a=$(a),Object.isNumber(b)&&(c=b,b=!1),Object.isNumber(c)||(c=0),b?Prototype.Selector.find(a.previousSiblings(),b,c):a.recursivelyCollect("previousSibling",c+1)[c]},next:function(a,b,c){if(a=$(a),Object.isNumber(b)&&(c=b,b=!1),Object.isNumber(c)||(c=0),b)return Prototype.Selector.find(a.nextSiblings(),b,c);Object.isNumber(c)?c+1:1;return a.recursivelyCollect("nextSibling",c+1)[c]},select:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a)},adjacent:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a.parentNode).without(a)},identify:function(a){a=$(a);var b=Element.readAttribute(a,"id");if(b)return b;do b="anonymous_element_"+Element.idCounter++;while($(b));return Element.writeAttribute(a,"id",b),b},readAttribute:function(a,b){if(a=$(a),Prototype.Browser.IE){var c=Element._attributeTranslations.read;if(c.values[b])return c.values[b](a,b);if(c.names[b]&&(b=c.names[b]),b.include(":"))return a.attributes&&a.attributes[b]?a.attributes[b].value:null}return a.getAttribute(b)},writeAttribute:function(a,b,c){a=$(a);var d={},e=Element._attributeTranslations.write;"object"==typeof b?d=b:d[b]=Object.isUndefined(c)?!0:c;for(var f in d)b=e.names[f]||f,c=d[f],e.values[f]&&(b=e.values[f](a,c)),c===!1||null===c?a.removeAttribute(b):c===!0?a.setAttribute(b,b):a.setAttribute(b,c);return a},getHeight:function(a){return Element.getDimensions(a).height},getWidth:function(a){return Element.getDimensions(a).width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,b){if(a=$(a)){var c=a.className;return c.length>0&&(c==b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(c))}},addClassName:function(a,b){return(a=$(a))?(Element.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b),a):void 0},removeClassName:function(a,b){return(a=$(a))?(a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").strip(),a):void 0},toggleClassName:function(a,b){return(a=$(a))?Element[Element.hasClassName(a,b)?"removeClassName":"addClassName"](a,b):void 0},cleanWhitespace:function(a){a=$(a);for(var b=a.firstChild;b;){var c=b.nextSibling;3!=b.nodeType||/\S/.test(b.nodeValue)||a.removeChild(b),b=c}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,b){if(a=$(a),b=$(b),a.compareDocumentPosition)return 8===(8&a.compareDocumentPosition(b));if(b.contains)return b.contains(a)&&b!==a;for(;a=a.parentNode;)if(a==b)return!0;return!1},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);return window.scrollTo(b[0],b[1]),a},getStyle:function(a,b){a=$(a),b="float"==b?"cssFloat":b.camelize();var c=a.style[b];if(!c||"auto"==c){var d=document.defaultView.getComputedStyle(a,null);c=d?d[b]:null}return"opacity"==b?c?parseFloat(c):1:"auto"==c?null:c},getOpacity:function(a){return $(a).getStyle("opacity")},setStyle:function(a,b){a=$(a);var c=a.style;if(Object.isString(b))return a.style.cssText+=";"+b,b.include("opacity")?a.setOpacity(b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var d in b)"opacity"==d?a.setOpacity(b[d]):c["float"==d||"cssFloat"==d?Object.isUndefined(c.styleFloat)?"cssFloat":"styleFloat":d]=b[d];return a},setOpacity:function(a,b){return a=$(a),a.style.opacity=1==b||""===b?"":1e-5>b?0:b,a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position");return"static"!=b&&b||(a._madePositioned=!0,a.style.position="relative",Prototype.Browser.Opera&&(a.style.top=0,a.style.left=0)),a},undoPositioned:function(a){return a=$(a),a._madePositioned&&(a._madePositioned=void 0,a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right=""),a},makeClipping:function(a){return a=$(a),a._overflow?a:(a._overflow=Element.getStyle(a,"overflow")||"auto","hidden"!==a._overflow&&(a.style.overflow="hidden"),a)},undoClipping:function(a){return a=$(a),a._overflow?(a.style.overflow="auto"==a._overflow?"":a._overflow,a._overflow=null,a):a},clonePosition:function(a,b){var c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},arguments[2]||{});b=$(b);var d=Element.viewportOffset(b),e=[0,0],f=null;return a=$(a),"absolute"==Element.getStyle(a,"position")&&(f=Element.getOffsetParent(a),e=Element.viewportOffset(f)),f==document.body&&(e[0]-=document.body.offsetLeft,e[1]-=document.body.offsetTop),c.setLeft&&(a.style.left=d[0]-e[0]+c.offsetLeft+"px"),c.setTop&&(a.style.top=d[1]-e[1]+c.offsetTop+"px"),c.setWidth&&(a.style.width=b.offsetWidth+"px"),c.setHeight&&(a.style.height=b.offsetHeight+"px"),a}},Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants}),Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}},Prototype.Browser.Opera?(Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(a,b,c){switch(c){case"height":case"width":if(!Element.visible(b))return null;var d=parseInt(a(b,c),10);if(d!==b["offset"+c.capitalize()])return d+"px";var e;return e="height"===c?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"],e.inject(d,function(c,d){var e=a(b,d);return null===e?c:c-parseInt(e,10)})+"px";default:return a(b,c)}}),Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(a,b,c){return"title"===c?b.title:a(b,c)})):Prototype.Browser.IE?(Element.Methods.getStyle=function(a,b){a=$(a),b="float"==b||"cssFloat"==b?"styleFloat":b.camelize();var c=a.style[b];return!c&&a.currentStyle&&(c=a.currentStyle[b]),"opacity"==b?(c=(a.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&c[1]?parseFloat(c[1])/100:1:"auto"==c?"width"!=b&&"height"!=b||"none"==a.getStyle("display")?null:a["offset"+b.capitalize()]+"px":c},Element.Methods.setOpacity=function(a,b){function c(a){return a.replace(/alpha\([^\)]*\)/gi,"")}a=$(a);var d=a.currentStyle;(d&&!d.hasLayout||!d&&"normal"==a.style.zoom)&&(a.style.zoom=1);var e=a.getStyle("filter"),f=a.style;return 1==b||""===b?((e=c(e))?f.filter=e:f.removeAttribute("filter"),a):(1e-5>b&&(b=0),f.filter=c(e)+"alpha(opacity="+100*b+")",a)},Element._attributeTranslations=function(){var a="className",b="for",c=document.createElement("div");return c.setAttribute(a,"x"),"x"!==c.className&&(c.setAttribute("class","x"),"x"===c.className&&(a="class")),c=null,c=document.createElement("label"),c.setAttribute(b,"x"),"x"!==c.htmlFor&&(c.setAttribute("htmlFor","x"),"x"===c.htmlFor&&(b="htmlFor")),c=null,{read:{names:{"class":a,className:a,"for":b,htmlFor:b},values:{_getAttr:function(a,b){return a.getAttribute(b)},_getAttr2:function(a,b){return a.getAttribute(b,2)},_getAttrNode:function(a,b){var c=a.getAttributeNode(b);return c?c.value:""},_getEv:function(){var a,b=document.createElement("div");b.onclick=Prototype.emptyFunction;var c=b.getAttribute("onclick");return String(c).indexOf("{")>-1?a=function(a,b){return(b=a.getAttribute(b))?(b=b.toString(),b=b.split("{")[1],b=b.split("}")[0],b.strip()):null}:""===c&&(a=function(a,b){return b=a.getAttribute(b),b?b.strip():null}),b=null,a}(),_flag:function(a,b){return $(a).hasAttribute(b)?b:null},style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}}}}(),Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?b:""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(a){Element._attributeTranslations.write.names[a.toLowerCase()]=a,Element._attributeTranslations.has[a.toLowerCase()]=a
}),function(a){Object.extend(a,{href:a._getAttr2,src:a._getAttr2,type:a._getAttr,action:a._getAttrNode,disabled:a._flag,checked:a._flag,readonly:a._flag,multiple:a._flag,onload:a._getEv,onunload:a._getEv,onclick:a._getEv,ondblclick:a._getEv,onmousedown:a._getEv,onmouseup:a._getEv,onmouseover:a._getEv,onmousemove:a._getEv,onmouseout:a._getEv,onfocus:a._getEv,onblur:a._getEv,onkeypress:a._getEv,onkeydown:a._getEv,onkeyup:a._getEv,onsubmit:a._getEv,onreset:a._getEv,onselect:a._getEv,onchange:a._getEv})}(Element._attributeTranslations.read.values),Prototype.BrowserFeatures.ElementExtensions&&!function(){function a(a){for(var b,c=a.getElementsByTagName("*"),d=[],e=0;b=c[e];e++)"!"!==b.tagName&&d.push(b);return d}Element.Methods.down=function(b,c,d){return b=$(b),1==arguments.length?b.firstDescendant():Object.isNumber(c)?a(b)[c]:Element.select(b,c)[d||0]}}()):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=function(a,b){return a=$(a),a.style.opacity=1==b?.999999:""===b?"":1e-5>b?0:b,a}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=function(a,b){if(a=$(a),a.style.opacity=1==b||""===b?"":1e-5>b?0:b,1==b)if("IMG"==a.tagName.toUpperCase()&&a.width)a.width++,a.width--;else try{var c=document.createTextNode(" ");a.appendChild(c),a.removeChild(c)}catch(d){}return a}),"outerHTML"in document.documentElement&&(Element.Methods.replace=function(a,b){if(a=$(a),b&&b.toElement&&(b=b.toElement()),Object.isElement(b))return a.parentNode.replaceChild(b,a),a;b=Object.toHTML(b);var c=a.parentNode,d=c.tagName.toUpperCase();if(Element._insertionTranslations.tags[d]){var e=a.next(),f=Element._getContentFromAnonymousElement(d,b.stripScripts());c.removeChild(a),f.each(e?function(a){c.insertBefore(a,e)}:function(a){c.appendChild(a)})}else a.outerHTML=b.stripScripts();return b.evalScripts.bind(b).defer(),a}),Element._returnOffset=function(a,b){var c=[a,b];return c.left=a,c.top=b,c},Element._getContentFromAnonymousElement=function(a,b,c){var d=new Element("div"),e=Element._insertionTranslations.tags[a],f=!1;if(e?f=!0:c&&(f=!0,e=["","",0]),f){d.innerHTML="&nbsp;"+e[0]+b+e[1],d.removeChild(d.firstChild);for(var g=e[2];g--;)d=d.firstChild}else d.innerHTML=b;return $A(d.childNodes)},Element._insertionTranslations={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},function(){var a=Element._insertionTranslations.tags;Object.extend(a,{THEAD:a.TBODY,TFOOT:a.TBODY,TH:a.TD})}(),Element.Methods.Simulated={hasAttribute:function(a,b){b=Element._attributeTranslations.has[b]||b;var c=$(a).getAttributeNode(b);return!(!c||!c.specified)}},Element.Methods.ByTag={},Object.extend(Element,Element.Methods),function(a){!Prototype.BrowserFeatures.ElementExtensions&&a.__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=a.__proto__,Prototype.BrowserFeatures.ElementExtensions=!0),a=null}(document.createElement("div")),Element.extend=function(){function a(a){if("undefined"!=typeof window.Element){var b=window.Element.prototype;if(b){var c="_"+(Math.random()+"").slice(2),d=document.createElement(a);b[c]="x";var e="x"!==d[c];return delete b[c],d=null,e}}return!1}function b(a,b){for(var c in b){var d=b[c];!Object.isFunction(d)||c in a||(a[c]=d.methodize())}}var c=a("object");if(Prototype.BrowserFeatures.SpecificElementExtensions)return c?function(a){if(a&&"undefined"==typeof a._extendedByPrototype){var c=a.tagName;c&&/^(?:object|applet|embed)$/i.test(c)&&(b(a,Element.Methods),b(a,Element.Methods.Simulated),b(a,Element.Methods.ByTag[c.toUpperCase()]))}return a}:Prototype.K;var d={},e=Element.Methods.ByTag,f=Object.extend(function(a){if(!a||"undefined"!=typeof a._extendedByPrototype||1!=a.nodeType||a==window)return a;var c=Object.clone(d),f=a.tagName.toUpperCase();return e[f]&&Object.extend(c,e[f]),b(a,c),a._extendedByPrototype=Prototype.emptyFunction,a},{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(d,Element.Methods),Object.extend(d,Element.Methods.Simulated))}});return f.refresh(),f}(),Element.hasAttribute=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:Element.Methods.Simulated.hasAttribute,Element.addMethods=function(a){function b(b){b=b.toUpperCase(),Element.Methods.ByTag[b]||(Element.Methods.ByTag[b]={}),Object.extend(Element.Methods.ByTag[b],a)}function c(a,b,c){c=c||!1;for(var d in a){var e=a[d];Object.isFunction(e)&&(c&&d in b||(b[d]=e.methodize()))}}function d(a){var b,c={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(c[a]&&(b="HTML"+c[a]+"Element"),window[b])return window[b];if(b="HTML"+a+"Element",window[b])return window[b];if(b="HTML"+a.capitalize()+"Element",window[b])return window[b];var d=document.createElement(a),e=d.__proto__||d.constructor.prototype;return d=null,e}var e=Prototype.BrowserFeatures,f=Element.Methods.ByTag;if(a||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})),2==arguments.length){var g=a;a=arguments[1]}g?Object.isArray(g)?g.each(b):b(g):Object.extend(Element.Methods,a||{});var h=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(e.ElementExtensions&&(c(Element.Methods,h),c(Element.Methods.Simulated,h,!0)),e.SpecificElementExtensions)for(var i in Element.Methods.ByTag){var j=d(i);Object.isUndefined(j)||c(f[i],j.prototype)}Object.extend(Element,Element.Methods),delete Element.ByTag,Element.extend.refresh&&Element.extend.refresh(),Element.cache={}},document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}},function(a){function b(){return d.WebKit&&!e.evaluate?document:d.Opera&&window.parseFloat(window.opera.version())<9.5?document.body:document.documentElement}var c,d=Prototype.Browser,e=document,f={},g=function(d){return c||(c=b()),f[d]="client"+d,a["get"+d]=function(){return c[f[d]]},a["get"+d]()};a.getWidth=g.curry("Width"),a.getHeight=g.curry("Height")}(document.viewport),Element.Storage={UID:1},Element.addMethods({getStorage:function(a){if(a=$(a)){var b;return a===window?b=0:("undefined"==typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++),b=a._prototypeUID),Element.Storage[b]||(Element.Storage[b]=$H()),Element.Storage[b]}},store:function(a,b,c){return(a=$(a))?(2===arguments.length?Element.getStorage(a).update(b):Element.getStorage(a).set(b,c),a):void 0},retrieve:function(a,b,c){if(a=$(a)){var d=Element.getStorage(a),e=d.get(b);return Object.isUndefined(e)&&(d.set(b,c),e=c),e}},clone:function(a,b){if(a=$(a)){var c=a.cloneNode(b);if(c._prototypeUID=void 0,b)for(var d=Element.select(c,"*"),e=d.length;e--;)d[e]._prototypeUID=void 0;return Element.extend(c)}},purge:function(a){if(a=$(a)){var b=Element._purgeElement;b(a);for(var c=a.getElementsByTagName("*"),d=c.length;d--;)b(c[d]);return null}}}),function(){function a(a){var b=a.match(/^(\d+)%?$/i);return b?Number(b[1])/100:null}function b(b,c,d){var e=null;if(Object.isElement(b)&&(e=b,b=e.getStyle(c)),null===b)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(b))return window.parseFloat(b);var f=b.include("%"),g=d===document.viewport;if(/\d/.test(b)&&e&&e.runtimeStyle&&(!f||!g)){var h=e.style.left,i=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=b||0,b=e.style.pixelLeft,e.style.left=h,e.runtimeStyle.left=i,b}if(e&&f){d=d||e.parentNode;var j=a(b),k=null,l=(e.getStyle("position"),c.include("left")||c.include("right")||c.include("width")),m=c.include("top")||c.include("bottom")||c.include("height");return d===document.viewport?l?k=document.viewport.getWidth():m&&(k=document.viewport.getHeight()):l?k=$(d).measure("width"):m&&(k=$(d).measure("height")),null===k?0:k*j}return 0}function c(a){for(;a&&a.parentNode;){var b=a.getStyle("display");if("none"===b)return!1;a=$(a.parentNode)}return!0}function d(a){return a.include("border")&&(a+="-width"),a.camelize()}function e(a,b){return new Element.Layout(a,b)}function f(a,b){return $(a).getLayout().get(b)}function g(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};var c=a.style,d={visibility:c.visibility,position:c.position,display:c.display},e={visibility:"hidden",display:"block"};"fixed"!==d.position&&(e.position="absolute"),Element.setStyle(a,e);var f={width:a.offsetWidth,height:a.offsetHeight};return Element.setStyle(a,d),f}function h(a){if(a=$(a),q(a)||r(a)||o(a)||p(a))return $(document.body);var b="inline"===Element.getStyle(a,"display");if(!b&&a.offsetParent)return $(a.offsetParent);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==Element.getStyle(a,"position"))return $(p(a)?document.body:a);return $(document.body)}function i(a){a=$(a);var b=0,c=0;if(a.parentNode)do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return new Element.Offset(c,b)}function j(a){a=$(a);var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if(o(a))break;var e=Element.getStyle(a,"position");if("static"!==e)break}while(a);return d-=b.get("margin-top"),c-=b.get("margin-left"),new Element.Offset(d,c)}function k(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)}function l(a){e=$(e);var b=0,c=0,d=document.body,e=a;do if(b+=e.offsetTop||0,c+=e.offsetLeft||0,e.offsetParent==d&&"absolute"==Element.getStyle(e,"position"))break;while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return new Element.Offset(c,b)}function m(a){if(a=$(a),"absolute"===Element.getStyle(a,"position"))return a;var b=h(a),c=a.viewportOffset(),d=b.viewportOffset(),e=c.relativeTo(d),f=a.getLayout();return a.store("prototype_absolutize_original_styles",{left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),height:a.getStyle("height")}),a.setStyle({position:"absolute",top:e.top+"px",left:e.left+"px",width:f.get("width")+"px",height:f.get("height")+"px"}),a}function n(a){if(a=$(a),"relative"===Element.getStyle(a,"position"))return a;var b=a.retrieve("prototype_absolutize_original_styles");return b&&a.setStyle(b),a}function o(a){return"BODY"===a.nodeName.toUpperCase()}function p(a){return"HTML"===a.nodeName.toUpperCase()}function q(a){return a.nodeType===Node.DOCUMENT_NODE}function r(a){return a!==document.body&&!Element.descendantOf(a,document.body)}var s=Prototype.K;"currentStyle"in document.documentElement&&(s=function(a){return a.currentStyle.hasLayout||(a.style.zoom=1),a}),Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super(),this.element=$(a),Element.Layout.PROPERTIES.each(function(a){this._set(a,null)},this),b&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(){throw"Properties of Element.Layout are read-only."},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._prepared){var a=this.element;if(c(a))return void(this._prepared=!0);var d={position:a.style.position||"",width:a.style.width||"",visibility:a.style.visibility||"",display:a.style.display||""};a.store("prototype_original_styles",d);var e=a.getStyle("position"),f=a.getStyle("width");("0px"===f||null===f)&&(a.style.display="block",f=a.getStyle("width"));var g="fixed"===e?document.viewport:a.parentNode;a.setStyle({position:"absolute",visibility:"hidden",display:"block"});var h,i=a.getStyle("width");if(f&&i===f)h=b(a,"width",g);else if("absolute"===e||"fixed"===e)h=b(a,"width",g);else{var j=a.parentNode,k=$(j).getLayout();h=k.get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}a.setStyle({width:h+"px"}),this._prepared=!0}},_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null),a.setStyle(b),this._prepared=!1},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},toObject:function(){var a=$A(arguments),b=0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" "),c={};return b.each(function(a){if(Element.Layout.PROPERTIES.include(a)){var b=this.get(a);null!=b&&(c[a]=b)}},this),c},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=$A(arguments),b=0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" "),c={};return b.each(function(a){if(Element.Layout.PROPERTIES.include(a)&&!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var b=this.get(a);null!=b&&(c[d(a)]=b+"px")}},this),c},inspect:function(){return"#<Element.Layout>"}}),Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(){this._preComputing||this._begin();var a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),e=this.get("padding-bottom");return this._preComputing||this._end(),a-b-c-d-e},width:function(){this._preComputing||this._begin();var a=this.get("border-box-width");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=this.get("padding-left"),e=this.get("padding-right");return this._preComputing||this._end(),a-b-c-d-e},"padding-box-height":function(){var a=this.get("height"),b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(){var a=this.get("width"),b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||this._begin();var b=a.offsetHeight;return this._preComputing||this._end(),b},"border-box-width":function(a){this._preComputing||this._begin();var b=a.offsetWidth;return this._preComputing||this._end(),b},"margin-box-height":function(){var a=this.get("border-box-height"),b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(){var a=this.get("border-box-width"),b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){var b=a.positionedOffset();return b.top},bottom:function(a){var b=a.positionedOffset(),c=a.getOffsetParent(),d=c.measure("height"),e=this.get("border-box-height");return d-e-b.top},left:function(a){var b=a.positionedOffset();return b.left},right:function(a){var b=a.positionedOffset(),c=a.getOffsetParent(),d=c.measure("width"),e=this.get("border-box-width");return d-e-b.left},"padding-top":function(a){return b(a,"paddingTop")},"padding-bottom":function(a){return b(a,"paddingBottom")},"padding-left":function(a){return b(a,"paddingLeft")},"padding-right":function(a){return b(a,"paddingRight")},"border-top":function(a){return b(a,"borderTopWidth")},"border-bottom":function(a){return b(a,"borderBottomWidth")},"border-left":function(a){return b(a,"borderLeftWidth")},"border-right":function(a){return b(a,"borderRightWidth")},"margin-top":function(a){return b(a,"marginTop")},"margin-bottom":function(a){return b(a,"marginBottom")},"margin-left":function(a){return b(a,"marginLeft")},"margin-right":function(a){return b(a,"marginRight")}}}),"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=s(a.getOffsetParent()),c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return(d.right-c.right).round()},bottom:function(a){var b=s(a.getOffsetParent()),c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return(d.bottom-c.bottom).round()}}),Element.Offset=Class.create({initialize:function(a,b){this.left=a.round(),this.top=b.round(),this[0]=this.left,this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}}),Prototype.Browser.IE?(h=h.wrap(function(a,b){if(b=$(b),q(b)||r(b)||o(b)||p(b))return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});var d=a(b);return b.setStyle({position:c}),d}),j=j.wrap(function(a,b){if(b=$(b),!b.parentNode)return new Element.Offset(0,0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&s(d),b.setStyle({position:"relative"});var e=a(b);return b.setStyle({position:c}),e})):Prototype.Browser.Webkit&&(i=function(a){a=$(a);var b=0,c=0;do{if(b+=a.offsetTop||0,c+=a.offsetLeft||0,a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;a=a.offsetParent}while(a);return new Element.Offset(c,b)}),Element.addMethods({getLayout:e,measure:f,getDimensions:g,getOffsetParent:h,cumulativeOffset:i,positionedOffset:j,cumulativeScrollOffset:k,viewportOffset:l,absolutize:m,relativize:n}),"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(a){if(a=$(a),r(a))return new Element.Offset(0,0);var b=a.getBoundingClientRect(),c=document.documentElement;return new Element.Offset(b.left-c.clientLeft,b.top-c.clientTop)}})}(),window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)},Prototype.Selector=function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.')}function b(){throw new Error('Method "Prototype.Selector.match" must be defined.')}function c(a,b,c){c=c||0;var d,e=Prototype.Selector.match,f=a.length,g=0;for(d=0;f>d;d++)if(e(a[d],b)&&c==g++)return Element.extend(a[d])}function d(a){for(var b=0,c=a.length;c>b;b++)Element.extend(a[b]);return a}var e=Prototype.K;return{select:a,match:b,find:c,extendElements:Element.extend===e?e:d,extendElement:Element.extend}}(),Prototype._original_property=window.Sizzle,function(){function a(a,b,c,d,e,f){for(var g="previousSibling"==a&&!f,h=0,i=d.length;i>h;h++){var j=d[h];if(j){g&&1===j.nodeType&&(j.sizcache=c,j.sizset=h),j=j[a];for(var k=!1;j;){if(j.sizcache===c){k=d[j.sizset];break}if(1!==j.nodeType||f||(j.sizcache=c,j.sizset=h),j.nodeName===b){k=j;break}j=j[a]}d[h]=k}}}function b(a,b,c,d,e,f){for(var g="previousSibling"==a&&!f,i=0,j=d.length;j>i;i++){var k=d[i];if(k){g&&1===k.nodeType&&(k.sizcache=c,k.sizset=i),k=k[a];for(var l=!1;k;){if(k.sizcache===c){l=d[k.sizset];break}if(1===k.nodeType)if(f||(k.sizcache=c,k.sizset=i),"string"!=typeof b){if(k===b){l=!0;break}}else if(h.filter(b,[k]).length>0){l=k;break}k=k[a]}d[i]=l}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0;[0,0].sort(function(){return g=!1,0});var h=function(a,b,d,f){d=d||[];var g=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return d;for(var k,m,n,r,s=[],t=!0,u=p(b),v=a;null!==(c.exec(""),k=c.exec(v));)if(v=k[3],s.push(k[1]),k[2]){r=k[3];break}if(s.length>1&&j.exec(a))if(2===s.length&&i.relative[s[0]])m=q(s[0]+s[1],b);else for(m=i.relative[s[0]]?[b]:h(s.shift(),b);s.length;)a=s.shift(),i.relative[a]&&(a+=s.shift()),m=q(a,m);else{if(!f&&s.length>1&&9===b.nodeType&&!u&&i.match.ID.test(s[0])&&!i.match.ID.test(s[s.length-1])){var w=h.find(s.shift(),b,u);b=w.expr?h.filter(w.expr,w.set)[0]:w.set[0]}if(b){var w=f?{expr:s.pop(),set:l(f)}:h.find(s.pop(),1!==s.length||"~"!==s[0]&&"+"!==s[0]||!b.parentNode?b:b.parentNode,u);for(m=w.expr?h.filter(w.expr,w.set):w.set,s.length>0?n=l(m):t=!1;s.length;){var x=s.pop(),y=x;i.relative[x]?y=s.pop():x="",null==y&&(y=b),i.relative[x](n,y,u)}}else n=s=[]}if(n||(n=m),!n)throw"Syntax error, unrecognized expression: "+(x||a);if("[object Array]"===e.call(n))if(t)if(b&&1===b.nodeType)for(var z=0;null!=n[z];z++)n[z]&&(n[z]===!0||1===n[z].nodeType&&o(b,n[z]))&&d.push(m[z]);else for(var z=0;null!=n[z];z++)n[z]&&1===n[z].nodeType&&d.push(m[z]);else d.push.apply(d,n);else l(n,d);return r&&(h(r,g,d,f),h.uniqueSort(d)),d};h.uniqueSort=function(a){if(n&&(f=g,a.sort(n),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},h.matches=function(a,b){return h(a,null,null,b)},h.find=function(a,b,c){var d,e;if(!a)return[];for(var f=0,g=i.order.length;g>f;f++){var e,h=i.order[f];if(e=i.leftMatch[h].exec(a)){var j=e[1];if(e.splice(1,1),"\\"!==j.substr(j.length-1)&&(e[1]=(e[1]||"").replace(/\\/g,""),d=i.find[h](e,b,c),null!=d)){a=a.replace(i.match[h],"");break}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},h.filter=function(a,b,c,d){for(var e,f,g=a,h=[],j=b,k=b&&b[0]&&p(b[0]);a&&b.length;){for(var l in i.filter)if(null!=(e=i.match[l].exec(a))){var m,n,o=i.filter[l];if(f=!1,j==h&&(h=[]),i.preFilter[l])if(e=i.preFilter[l](e,j,c,h,d,k)){if(e===!0)continue}else f=m=!0;if(e)for(var q=0;null!=(n=j[q]);q++)if(n){m=o(n,e,q,j);var r=d^!!m;c&&null!=m?r?f=!0:j[q]=!1:r&&(h.push(n),f=!0)}if(void 0!==m){if(c||(j=h),a=a.replace(i.match[l],""),!f)return[];break}}if(a==g){if(null==f)throw"Syntax error, unrecognized expression: "+a;break}g=a}return j};var i=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b,c){var d="string"==typeof b,e=d&&!/\W/.test(b),f=d&&!e;e&&!c&&(b=b.toUpperCase());for(var g,i=0,j=a.length;j>i;i++)if(g=a[i]){for(;(g=g.previousSibling)&&1!==g.nodeType;);a[i]=f||g&&g.nodeName===b?g||!1:g===b}f&&h.filter(b,a,!0)},">":function(a,b,c){var d="string"==typeof b;if(d&&!/\W/.test(b)){b=c?b:b.toUpperCase();for(var e=0,f=a.length;f>e;e++){var g=a[e];if(g){var i=g.parentNode;a[e]=i.nodeName===b?i:!1}}}else{for(var e=0,f=a.length;f>e;e++){var g=a[e];g&&(a[e]=d?g.parentNode:g.parentNode===b)}d&&h.filter(b,a,!0)}},"":function(c,e,f){var g=d++,h=b;if(!/\W/.test(e)){var i=e=f?e:e.toUpperCase();h=a}h("parentNode",e,g,c,i,f)},"~":function(c,e,f){var g=d++,h=b;if("string"==typeof e&&!/\W/.test(e)){var i=e=f?e:e.toUpperCase();h=a}h("previousSibling",e,g,c,i,f)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(/\\/g,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){for(var c=0;b[c]===!1;c++);return b[c]&&p(b[c])?a[1]:a[1].toUpperCase()},CHILD:function(a){if("nth"==a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"==a[2]&&"2n"||"odd"==a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&i.attrMap[g]&&(a[1]=i.attrMap[g]),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if("not"===a[1]){if(!((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=h.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}a[3]=h(a[3],null,null,b)}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||"BUTTON"===a.nodeName.toUpperCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],c=0,h=g.length;h>c;c++)if(g[c]===a)return!1;return!0}},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"==c)return!0;d=a;case"last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case"nth":var e=b[2],f=b[3];if(1==e&&0==f)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return 0==e?0==j:j%e==0&&j/e>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!=g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];return f?f(a,c,b,d):void 0}}},j=i.match.POS;for(var k in i.match)i.match[k]=new RegExp(i.match[k].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[k]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[k].source);var l=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(m){l=function(a,b){var c=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(c,a);else if("number"==typeof a.length)for(var d=0,f=a.length;f>d;d++)c.push(a[d]);else for(var d=0;a[d];d++)c.push(a[d]);return c}}var n;document.documentElement.compareDocumentPosition?n=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(f=!0),0;var c=4&a.compareDocumentPosition(b)?-1:a===b?0:1;return 0===c&&(f=!0),c}:"sourceIndex"in document.documentElement?n=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),0;var c=a.sourceIndex-b.sourceIndex;return 0===c&&(f=!0),c}:document.createRange&&(n=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),0;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);return 0===e&&(f=!0),e}),function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(i.find.ID=function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||"undefined"!=typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:void 0:[]}},i.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=h,b=document.createElement("div");if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){h=function(b,c,d,e){if(c=c||document,!e&&9===c.nodeType&&!p(c))try{return l(c.querySelectorAll(b),d)}catch(f){}return a(b,c,d,e)};for(var c in a)h[c]=a[c];b=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}();var o=document.compareDocumentPosition?function(a,b){return 16&a.compareDocumentPosition(b)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},p=function(a){return 9===a.nodeType&&"HTML"!==a.documentElement.nodeName||!!a.ownerDocument&&"HTML"!==a.ownerDocument.documentElement.nodeName},q=function(a,b){for(var c,d=[],e="",f=b.nodeType?[b]:b;c=i.match.PSEUDO.exec(a);)e+=c[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;j>g;g++)h(a,f[g],d);return h.filter(e,d)};window.Sizzle=h}(),function(a){function b(b,c){return d(a(b,c||document))}function c(b,c){return 1==a.matches(c,[b]).length}var d=Prototype.Selector.extendElements;Prototype.Selector.engine=a,Prototype.Selector.select=b,Prototype.Selector.match=c
}(Sizzle),window.Sizzle=Prototype._original_property,delete Prototype._original_property;var Form={reset:function(a){return a=$(a),a.reset(),a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,e,f,g=!1,h=b.submit;return b.hash?(f={},e=function(a,b,c){return b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b].push(c)):a[b]=c,a}):(f="",e=function(a,b,c){return a+(a?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(c)}),a.inject(f,function(a,b){return!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null==d||"file"==b.type||"submit"==b.type&&(g||h===!1||h&&c!=h||!(g=!0))||(a=e(a,c,d))),a})}};Form.Methods={serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){for(var b,c=$(a).getElementsByTagName("*"),d=[],e=Form.Element.Serializers,f=0;b=c[f];f++)d.push(b);return d.inject([],function(a,b){return e[b.tagName.toLowerCase()]&&a.push(Element.extend(b)),a})},getInputs:function(a,b,c){a=$(a);var d=a.getElementsByTagName("input");if(!b&&!c)return $A(d).map(Element.extend);for(var e=0,f=[],g=d.length;g>e;e++){var h=d[e];b&&h.type!=b||c&&h.name!=c||f.push(Element.extend(h))}return f},disable:function(a){return a=$(a),Form.getElements(a).invoke("disable"),a},enable:function(a){return a=$(a),Form.getElements(a).invoke("enable"),a},findFirstElement:function(a){var b=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled}),c=b.findAll(function(a){return a.hasAttribute("tabIndex")&&a.tabIndex>=0}).sortBy(function(a){return a.tabIndex}).first();return c?c:b.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();return b&&b.activate(),a},request:function(a,b){a=$(a),b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";return d.blank()&&(d=window.location.href),b.parameters=a.serialize(!0),c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c)),a.hasAttribute("method")&&!b.method&&(b.method=a.method),new Ajax.Request(d,b)}},Form.Element={focus:function(a){return $(a).focus(),a},select:function(a){return $(a).select(),a}},Form.Element.Methods={serialize:function(a){if(a=$(a),!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};return c[a.name]=b,Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();return Form.Element.Serializers[c](a,b),a},clear:function(a){return $(a).value="",a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),!a.select||"input"==a.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(a.type)||a.select()}catch(b){}return a},disable:function(a){return a=$(a),a.disabled=!0,a},enable:function(a){return a=$(a),a.disabled=!1,a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;Form.Element.Serializers=function(){function a(a,d){switch(a.type.toLowerCase()){case"checkbox":case"radio":return b(a,d);default:return c(a,d)}}function b(a,b){return Object.isUndefined(b)?a.checked?a.value:null:void(a.checked=!!b)}function c(a,b){return Object.isUndefined(b)?a.value:void(a.value=b)}function d(a,b){if(Object.isUndefined(b))return("select-one"===a.type?e:f)(a);for(var c,d,g=!Object.isArray(b),h=0,i=a.length;i>h;h++)if(c=a.options[h],d=this.optionValue(c),g){if(d==b)return void(c.selected=!0)}else c.selected=b.include(d)}function e(a){var b=a.selectedIndex;return b>=0?g(a.options[b]):null}function f(a){var b,c=a.length;if(!c)return null;for(var d=0,b=[];c>d;d++){var e=a.options[d];e.selected&&b.push(g(e))}return b}function g(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:a,inputSelector:b,textarea:c,select:d,selectOne:e,selectMany:f,optionValue:g,button:c}}(),Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,a,b,c){$super(c,b),this.element=$(a),this.lastValue=this.getValue()},execute:function(){var a=this.getValue();(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))&&(this.callback(this.element,a),this.lastValue=a)}}),Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}}),Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a),this.callback=b,this.lastValue=this.getValue(),"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case"checkbox":case"radio":Event.observe(a,"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}}),Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}}),function(){function a(a,b){return a.which?a.which===b+1:a.button===b}function b(a,b){return a.button===y[b]}function c(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 2==a.which||1==a.which&&a.metaKey;case 2:return 3==a.which;default:return!1}}function d(a){return x(a,0)}function e(a){return x(a,1)}function f(a){return x(a,2)}function g(a){a=t.extend(a);var b=a.target,c=a.type,d=a.currentTarget;return d&&d.tagName&&("load"===c||"error"===c||"click"===c&&"input"===d.tagName.toLowerCase()&&"radio"===d.type)&&(b=d),b.nodeType==Node.TEXT_NODE&&(b=b.parentNode),Element.extend(b)}function h(a,b){var c=t.element(a);if(!b)return c;for(;c;){if(Object.isElement(c)&&Prototype.Selector.match(c,b))return Element.extend(c);c=c.parentNode}}function i(a){return{x:j(a),y:k(a)}}function j(a){var b=document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function k(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function l(a){t.extend(a),a.preventDefault(),a.stopPropagation(),a.stopped=!0}function m(a){var b;switch(a.type){case"mouseover":case"mouseenter":b=a.fromElement;break;case"mouseout":case"mouseleave":b=a.toElement;break;default:return null}return Element.extend(b)}function n(a,b,c){var d=Element.retrieve(a,"prototype_event_registry");Object.isUndefined(d)&&(B.push(a),d=Element.retrieve(a,"prototype_event_registry",$H()));var e=d.get(b);if(Object.isUndefined(e)&&(e=[],d.set(b,e)),e.pluck("handler").include(c))return!1;var f;return b.include(":")?f=function(d){return Object.isUndefined(d.eventName)?!1:d.eventName!==b?!1:(t.extend(d,a),void c.call(a,d))}:v||"mouseenter"!==b&&"mouseleave"!==b?f=function(b){t.extend(b,a),c.call(a,b)}:("mouseenter"===b||"mouseleave"===b)&&(f=function(b){t.extend(b,a);for(var d=b.relatedTarget;d&&d!==a;)try{d=d.parentNode}catch(e){d=a}d!==a&&c.call(a,b)}),f.handler=c,e.push(f),f}function o(){for(var a=0,b=B.length;b>a;a++)t.stopObserving(B[a]),B[a]=null}function p(a,b,c){a=$(a);var d=n(a,b,c);if(!d)return a;if(b.include(":"))a.addEventListener?a.addEventListener("dataavailable",d,!1):(a.attachEvent("ondataavailable",d),a.attachEvent("onlosecapture",d));else{var e=C(b);a.addEventListener?a.addEventListener(e,d,!1):a.attachEvent("on"+e,d)}return a}function q(a,b,c){a=$(a);var d=Element.retrieve(a,"prototype_event_registry");if(!d)return a;if(!b)return d.each(function(b){var c=b.key;q(a,c)}),a;var e=d.get(b);if(!e)return a;if(!c)return e.each(function(c){q(a,b,c.handler)}),a;for(var f,g=e.length;g--;)if(e[g].handler===c){f=e[g];break}if(!f)return a;if(b.include(":"))a.removeEventListener?a.removeEventListener("dataavailable",f,!1):(a.detachEvent("ondataavailable",f),a.detachEvent("onlosecapture",f));else{var h=C(b);a.removeEventListener?a.removeEventListener(h,f,!1):a.detachEvent("on"+h,f)}return d.set(b,e.without(f)),a}function r(a,b,c,d){a=$(a),Object.isUndefined(d)&&(d=!0),a==document&&document.createEvent&&!a.dispatchEvent&&(a=document.documentElement);var e;return document.createEvent?(e=document.createEvent("HTMLEvents"),e.initEvent("dataavailable",d,!0)):(e=document.createEventObject(),e.eventType=d?"ondataavailable":"onlosecapture"),e.eventName=b,e.memo=c||{},document.createEvent?a.dispatchEvent(e):a.fireEvent(e.eventType,e),t.extend(e)}function s(a,b,c,d){return a=$(a),Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null),new t.Handler(a,b,c,d).start()}var t={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},u=document.documentElement,v="onmouseenter"in u&&"onmouseleave"in u,w=function(){return!1};window.attachEvent&&(w=window.addEventListener?function(a){return!(a instanceof window.Event)}:function(){return!0});var x,y={0:1,1:4,2:2};x=window.attachEvent?window.addEventListener?function(c,d){return w(c)?b(c,d):a(c,d)}:b:Prototype.Browser.WebKit?c:a,t.Methods={isLeftClick:d,isMiddleClick:e,isRightClick:f,element:g,findElement:h,pointer:i,pointerX:j,pointerY:k,stop:l};var z=Object.keys(t.Methods).inject({},function(a,b){return a[b]=t.Methods[b].methodize(),a});if(window.attachEvent){var A={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};t.extend=function(a,b){if(!a)return!1;if(!w(a))return a;if(a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=t.pointer(a);return Object.extend(a,{target:a.srcElement||b,relatedTarget:m(a),pageX:c.x,pageY:c.y}),Object.extend(a,z),Object.extend(a,A),a}}else t.extend=Prototype.K;window.addEventListener&&(t.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(t.prototype,z));var B=[];Prototype.Browser.IE&&window.attachEvent("onunload",o),Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,!1);var C=Prototype.K,D={mouseenter:"mouseover",mouseleave:"mouseout"};v||(C=function(a){return D[a]||a}),t.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a),this.eventName=b,this.selector=c,this.callback=d,this.handler=this.handleEvent.bind(this)},start:function(){return t.observe(this.element,this.eventName,this.handler),this},stop:function(){return t.stopObserving(this.element,this.eventName,this.handler),this},handleEvent:function(a){var b=t.findElement(a,this.selector);b&&this.callback.call(this.element,a,b)}}),Object.extend(t,t.Methods),Object.extend(t,{fire:r,observe:p,stopObserving:q,on:s}),Element.addMethods({fire:r,observe:p,stopObserving:q,on:s}),Object.extend(document,{fire:r.methodize(),observe:p.methodize(),stopObserving:q.methodize(),on:s.methodize(),loaded:!1}),window.Event?Object.extend(window.Event,t):window.Event=t}(),function(){function a(){document.loaded||(d&&window.clearTimeout(d),document.loaded=!0,document.fire("dom:loaded"))}function b(){"complete"===document.readyState&&(document.stopObserving("readystatechange",b),a())}function c(){try{document.documentElement.doScroll("left")}catch(b){return void(d=c.defer())}a()}var d;document.addEventListener?document.addEventListener("DOMContentLoaded",a,!1):(document.observe("readystatechange",b),window==top&&(d=c.defer())),Event.observe(window,"load",a)}(),Element.addMethods(),Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(a,b,c){return this.includeScrollOffsets?this.withinIncludingScrolloffsets(a,b,c):(this.xcomp=b,this.ycomp=c,this.offset=Element.cumulativeOffset(a),c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth)},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);return this.xcomp=b+d[0]-this.deltaX,this.ycomp=c+d[1]-this.deltaY,this.offset=Element.cumulativeOffset(a),this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){return a?"vertical"==a?(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight:"horizontal"==a?(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth:void 0:0},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){return Position.prepare(),Element.absolutize(a)},relativize:function(a){return Position.prepare(),Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){return c=c||{},Element.clonePosition(b,a,c)}};if(document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}return a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,c){c=c.toString().strip();var d=/\s/.test(c)?$w(c).map(b).join(""):b(c);return d?document._getElementsByXPath(".//*"+d,a):[]}:function(a,b){b=b.toString().strip();var c=[],d=/\s/.test(b)?$w(b):null;if(!d&&!b)return c;var e=$(a).getElementsByTagName("*");b=" "+b+" ";for(var f,g,h=0;f=e[h];h++)f.className&&(g=" "+f.className+" ")&&(g.include(b)||d&&d.all(function(a){return!a.toString().blank()&&g.include(" "+a+" ")}))&&c.push(Element.extend(f));return c},function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods)),Element.ClassNames=Class.create(),Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(a){return a.length>0})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}},Object.extend(Element.ClassNames.prototype,Enumerable),function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}}),Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],e=0,f=a.length;f>e;e++){var g=a[e];c(g,b)&&d.push(Element.extend(g))}return d},findElement:function(a,b,c){c=c||0;for(var d,e=0,f=0,g=a.length;g>f;f++)if(d=a[f],Prototype.Selector.match(d,b)&&c===e++)return Element.extend(d)},findChildElements:function(a,b){var c=b.toArray().join(", ");return Prototype.Selector.select(c,a||document)}})}(),define("app/Deprecated/lib/3rdparty/prototype-1.7",function(){}),define("app/Deprecated/lib/prototype-plugins/array",["require"],function(){Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=0>a?this.length+a:a,this.push.apply(this,c)}}),define("app/Deprecated/lib/prototype-plugins/data",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){function a(a){return"data-"+a}function b(b){if(b=$(b)){var c=b;switch(arguments.length){case 1:c={},$A(b.attributes).each(function(a){0===a.name.indexOf("data-")&&(c[a.name.slice(5)]=a.value)});break;case 2:arguments[1]===Object(arguments[1])?$H(arguments[1]).each(function(c){b.writeAttribute(a(c.key),c.value)}):c=b.readAttribute(a(arguments[1]));break;case 3:b.writeAttribute(a(arguments[1]),arguments[2])}return c}}require("app/Deprecated/lib/3rdparty/prototype-1.7");$&&Element&&Element.addMethods({data:b})}),define("app/Deprecated/lib/prototype-plugins/enhanceform",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){require("app/Deprecated/lib/3rdparty/prototype-1.7");if($&&Element){var a=function(a){if(a=$(a),"form"!==a.tagName.toLowerCase())throw"Element.enhanceform() method applicable only to HTMLFormElement";if(a.retrieve("enhanced"))return a;var b=a.select("input[type=submit]");return b.each(function(b){return b.name?void b.on("mousedown",function(){a.store("submit-as",this.name)}):!1}),a.on("submit",function(){var c,d,e=a.retrieve("submit-as");if(a.store("submit-as",null),!e)for(c=0,d=b.length;d>c;c++)if(!b[c].disabled&&b[c].name){e=b[c].name;break}a.fire("form:submit",{type:e}),a.fire("form:submit:"+e)}),a.store("enhanced",!0),a.store("submit-as",null),a},b=function(b){return("form"===b.tagName.toLowerCase()?[b]:b.select("form")).each(a),b};Element.addMethods({enhanceform:b})}}),define("app/Deprecated/lib/prototype-plugins/eventscompat",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){function a(a){var b=document.createElement("div");a="on"+a;var c=a in b;return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),b=null,c}function b(a){return Object.isElement(a)&&"FORM"===a.nodeName.toUpperCase()}function c(a){if(Object.isElement(a)){var b=a.nodeName.toUpperCase();return"INPUT"===b||"SELECT"===b||"TEXTAREA"===b}return!1}var d=(require("app/Deprecated/lib/3rdparty/prototype-1.7"),a("submit")),e=a("change");d&&e||(Event.Handler.prototype.initialize=Event.Handler.prototype.initialize.wrap(function(a,f,g,h,i){a(f,g,h,i),(!d&&"submit"===this.eventName&&!b(this.element)||!e&&"change"===this.eventName&&!c(this.element))&&(this.eventName="emulated:"+this.eventName)})),d||document.on("focusin","form",function(a,b){b.retrieve("emulated:submit")||(b.on("submit",function(a){var c=b.fire("emulated:submit",a,!0);c.returnValue===!1&&a.preventDefault()}),b.store("emulated:submit",!0))}),e||document.on("focusin","input, select, texarea",function(a,b){b.retrieve("emulated:change")||(b.on("change",function(a){this.fire("emulated:change",a,!0)}),b.store("emulated:change",!0))})}),define("app/Deprecated/lib/prototype-plugins/make",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){require("app/Deprecated/lib/3rdparty/prototype-1.7");$&&Element&&(Element.make=function(a){return new Element("div").update(a).firstDescendant()||null})}),define("app/Deprecated/lib/prototype-plugins/outerhtml",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){function a(a){var b=document.createElement("div"),c="";return b.appendChild(a.clone(!0)),c=b.innerHTML}require("app/Deprecated/lib/3rdparty/prototype-1.7");Element.addMethods({getOuterHTML:function(b){return b.outerHTML||a(b)}})}),define("app/Deprecated/lib/prototype-plugins/ajax-extras",["require","app/Deprecated/lib/3rdparty/prototype-1.7"],function(require){require("app/Deprecated/lib/3rdparty/prototype-1.7");Ajax.Request.prototype.abort=function(){this.transport.onreadystatechange=Prototype.emptyFunction,this.transport.abort(),Ajax.activeRequestCount>0&&Ajax.activeRequestCount--,Ajax.Responders.dispatch("onAbort",this,null,null)},Ajax.Request.prototype.dispatchException=function(a){Ajax.Responders.dispatch("onException",this,a),this.options.onException&&this.options.onException.call(this,this,a)}}),define("app/Deprecated/lib/cd-prototype",["require","app/Deprecated/lib/3rdparty/prototype-1.7","app/Deprecated/lib/prototype-plugins/array","app/Deprecated/lib/prototype-plugins/data","app/Deprecated/lib/prototype-plugins/enhanceform","app/Deprecated/lib/prototype-plugins/eventscompat","app/Deprecated/lib/prototype-plugins/make","app/Deprecated/lib/prototype-plugins/outerhtml","app/Deprecated/lib/prototype-plugins/ajax-extras"],function(require){return require("app/Deprecated/lib/prototype-plugins/array"),require("app/Deprecated/lib/prototype-plugins/data"),require("app/Deprecated/lib/prototype-plugins/enhanceform"),require("app/Deprecated/lib/prototype-plugins/eventscompat"),require("app/Deprecated/lib/prototype-plugins/make"),require("app/Deprecated/lib/prototype-plugins/outerhtml"),require("app/Deprecated/lib/prototype-plugins/ajax-extras"),require("app/Deprecated/lib/3rdparty/prototype-1.7")}),define("mixin",["require"],function(){function a(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}return function(){for(var b,c=Array.prototype.slice.call(arguments);c.length;)b=c.shift(),"function"==typeof b?(a(this,b),a(this.prototype,b.prototype)):b===Object(b)&&a(this.prototype,b);return this}}),define("app/Deprecated/lib/backbone-ported/prototype-adapter",["require","app/Deprecated/lib/cd-prototype"],function(){var a={$:$,element:function(a){$$(a).first()},select:function(a,b){return b?$$(b).select(a):$$(a)},attr:function(a,b){return a=$(a),$H(b).each(function(b){a.writeAttribute(b.key,b.value)}),a},html:function(a,b){return $(a).update(b)},remove:function(a){$(a).remove()},bind:function(a,b,c){return Event.observe(a,b,c)},delegate:function(a,b,c,d){var e=$(a).select(b);return e.each(function(a){this.bind(a,c,d)}),e},unbind:function(a,b){return $(a).stopObserving(b)},iframe:function(){if(navigator.userAgent.toLowerCase().match(/msie 7/))return null;var a=new Element("iframe",{src:"javascript:0",tabindex:-1});return a.hide(),$(document.body).insert({bottom:a}),a.contentWindow},ajax:function(a){return new Ajax.Request(a.url,{method:a.type,parameters:a.data&&"function"==typeof a.data.evalToJSON?a.data.evalJSON():a.data,onSuccess:function(b){a.success.call(b.request,b.responseJSON)},onFailure:function(b){a.error.call(b.request,b.responseJSON)}})}};return a}),define("app/Deprecated/lib/3rdparty/backbone-0.5.2",["require","underscore","app/Deprecated/lib/cd-prototype","app/Deprecated/lib/backbone-ported/prototype-adapter"],function(require){var a,b=require("underscore"),c=require("app/Deprecated/lib/backbone-ported/prototype-adapter"),d=this,e=d.Backbone;a="undefined"!=typeof exports?exports:d.Backbone={},a.VERSION="0.5.2",a.noConflict=function(){return d.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1,a.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]=[]);return e.push([b,c||this]),this},unbind:function(a,b){var c;if(a){if(c=this._callbacks)if(b){var d=c[a];if(!d)return this;for(var e=0,f=d.length;f>e;e++)if(d[e]&&b===d[e][0]){d[e]=null;break}}else c[a]=[]}else this._callbacks={};return this},trigger:function(a){var b,c,d,e,f,g=2;if(!(c=this._callbacks))return this;for(;g--;)if(d=g?a:"all",b=c[d])for(var h=0,i=b.length;i>h;h++)(e=b[h])?(f=g?Array.prototype.slice.call(arguments,1):arguments,e[0].apply(e[1],f)):(b.splice(h,1),h--,i--);return this}},a.Model=function(a,c){var d;a||(a={}),(d=this.defaults)&&(b.isFunction(d)&&(d=d.call(this)),a=b.extend({},d,a)),this.attributes={},this._escapedAttributes={},this.cid=b.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=b.clone(this.attributes),c&&c.collection&&(this.collection=c.collection),this.initialize(a,c)},b.extend(a.Model.prototype,a.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return b.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=w(null==c?"":""+c)},has:function(a){return null!=this.attributes[a]},set:function(a,c){if(c||(c={}),!a)return this;a.attributes&&(a=a.attributes);var d=this.attributes,e=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];b.isEqual(d[g],h)||(d[g]=h,delete e[g],this._changed=!0,c.silent||this.trigger("change:"+g,this,h,c))}return f||c.silent||!this._changed||this.change(c),this._changing=!1,this},unset:function(a,b){if(!(a in this.attributes))return this;b||(b={});var c=(this.attributes[a],{});return c[a]=void 0,b.silent||!this.validate||this._performValidation(c,b)?(delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b)),this):!1},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;if(this.attributes={},this._escapedAttributes={},this._changed=!0,!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(b){b||(b={});var c=this,d=b.success;return b.success=function(a,e,f){return c.set(c.parse(a,f),b)?void(d&&d(c,a)):!1},b.error=v(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},save:function(b,c){if(c||(c={}),b&&!this.set(b,c))return!1;var d=this,e=c.success;c.success=function(a,b,f){return d.set(d.parse(a,f),c)?void(e&&e(d,a,f)):!1},c.error=v(c.error,d,c);var f=this.isNew()?"create":"update";return(this.sync||a.sync).call(this,f,this,c)},destroy:function(b){if(b||(b={}),this.isNew())return this.trigger("destroy",this,this.collection,b);var c=this,d=b.success;return b.success=function(a){c.trigger("destroy",c,c.collection,b),d&&d(c,a)},b.error=v(b.error,c,b),(this.sync||a.sync).call(this,"delete",this,b)},url:function(){var a=t(this.collection)||this.urlRoot||u();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return null==this.id},change:function(a){this.trigger("change",this,a),this._previousAttributes=b.clone(this.attributes),this._changed=!1},hasChanged:function(a){return a?this._previousAttributes[a]!=this.attributes[a]:this._changed},changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,d=!1;for(var e in a)b.isEqual(c[e],a[e])||(d=d||{},d[e]=a[e]);return d},previous:function(a){return a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),a.Collection=function(a,c){c||(c={}),c.comparator&&(this.comparator=c.comparator),b.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},b.extend(a.Collection.prototype,a.Events,{model:a.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(b.isArray(a))for(var d=0,e=a.length;e>d;d++)this._add(a[d],c);else this._add(a,c);return this},remove:function(a,c){if(b.isArray(a))for(var d=0,e=a.length;e>d;d++)this._remove(a[d],c);else this._remove(a,c);return this},get:function(a){return null==a?null:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){if(a||(a={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return b.map(this.models,function(b){return b.get(a)})},reset:function(a,b){return a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b),this},fetch:function(b){b||(b={});var c=this,d=b.success;return b.success=function(a,e,f){c[b.add?"add":"reset"](c.parse(a,f),b),d&&d(c,a)},b.error=v(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},create:function(a,b){var c=this;if(b||(b={}),a=this._prepareModel(a,b),!a)return!1;var d=b.success;return b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b),a},parse:function(a){return a},chain:function(){return b(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(b,c){if(b instanceof a.Model)b.collection||(b.collection=this);else{var d=b;b=new this.model(d,{collection:this}),b.validate&&!b._performValidation(d,c)&&(b=!1)}return b},_add:function(a,b){if(b||(b={}),a=this._prepareModel(a,b),!a)return!1;var c=this.getByCid(a);if(c)throw new Error(["Can't add the same model to a set twice",c.id]);this._byId[a.id]=a,this._byCid[a.cid]=a;var d=null!=b.at?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length;return this.models.splice(d,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b),a},_remove:function(a,b){return b||(b={}),(a=this.getByCid(a)||this.get(a))?(delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a),a):null},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){("add"!=a&&"remove"!=a||c==this)&&("destroy"==a&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"];b.each(f,function(c){a.Collection.prototype[c]=function(){return b[c].apply(b,[this.models].concat(b.toArray(arguments)))}}),a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,i=/[-[\]{}()+?.,\\^$|#\s]/g;b.extend(a.Router.prototype,a.Events,{initialize:function(){},route:function(c,d,e){a.history||(a.history=new a.History),b.isRegExp(c)||(c=this._routeToRegExp(c)),a.history.route(c,b.bind(function(a){var b=this._extractParameters(c,a);e.apply(this,b),this.trigger.apply(this,["route:"+d].concat(b))},this))},navigate:function(b,c){a.history.navigate(b,c)},_bindRoutes:function(){if(this.routes){var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;d>c;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){return a=a.replace(i,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),a.History=function(){this.handlers=[],b.bindAll(this,"checkUrl")};var j=/^#*/,k=/msie [\w.]+/,l=!1;b.extend(a.History.prototype,{interval:50,getFragment:function(a,b){if(null==a)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),0==a.indexOf(this.options.root)&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return a.replace(j,"")},start:function(a){if(l)throw new Error("Backbone.history has already been started");this.options=b.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var d=this.getFragment(),e=document.documentMode,f=k.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);
f&&(this.iframe=c.iframe(),this.navigate(d)),this._hasPushState?c.bind(window,"popstate",this.checkUrl):"onhashchange"in window&&!f?c.bind(window,"hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=d,l=!0;var g=window.location,h=g.pathname==this.options.root;return!this._wantsPushState||this._hasPushState||h?(this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=g.hash.replace(j,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment)),this.loadUrl()):(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0)},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash)),a==this.fragment||a==decodeURIComponent(this.fragment)?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(window.location.hash)))},loadUrl:function(a){var c=this.fragment=this.getFragment(a),d=b.any(this.handlers,function(a){return a.route.test(c)?(a.callback(c),!0):void 0});return d},navigate:function(a,b){var c=(a||"").replace(j,"");if(this.fragment!=c&&this.fragment!=decodeURIComponent(c)){if(this._hasPushState){var d=window.location;0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=c);b&&this.loadUrl(a)}}}),a.View=function(a){this.cid=b.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var m=function(a){return c.select(a,this.el)},n=/^(\S+)\s*(.*)$/,o=["model","collection","el","id","attributes","className","tagName"];b.extend(a.View.prototype,a.Events,{tagName:"div",$:m,initialize:function(){},render:function(){return this},remove:function(){return this.el.parentNode&&c.remove(this.el),this},make:function(a,b,d){var e=document.createElement(a);return b&&c.attr(e,b),d&&c.html(e,d),e},delegateEvents:function(a){if(a||(a=this.events)){c.unbind(this.el,".delegateEvents"+this.cid);for(var d in a){var e=this[a[d]];if(!e)throw new Error('Event "'+a[d]+'" does not exist');var f=d.match(n),g=f[1],h=f[2];e=b.bind(e,this),g+=".delegateEvents"+this.cid,""===h?c.bind(this.el,g,e):c.delegate(this.el,h,g,e)}}},_configure:function(a){this.options&&(a=b.extend({},this.options,a));for(var c=0,d=o.length;d>c;c++){var e=o[c];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(this.el)b.isString(this.el)&&(this.el=c.element(this.el));else{var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}}});var p=function(a,b){var c=s(this,a,b);return c.extend=this.extend,c};a.Model.extend=a.Collection.extend=a.Router.extend=a.View.extend=p;var q={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};a.sync=function(d,e,f){var g=q[d],h=b.extend({type:g,dataType:"json"},f);return h.url||(h.url=t(e)||u()),h.data||!e||"create"!=d&&"update"!=d||(h.contentType="application/json",h.data=JSON.stringify(e.toJSON())),a.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),a.emulateHTTP&&("PUT"===g||"DELETE"===g)&&(a.emulateJSON&&(h.data._method=g),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),"GET"===h.type||a.emulateJSON||(h.processData=!1),c.ajax(h)};var r=function(){},s=function(a,c,d){var e;return e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(e,a),r.prototype=a.prototype,e.prototype=new r,c&&b.extend(e.prototype,c),d&&b.extend(e,d),e.prototype.constructor=e,e.__super__=a.prototype,e.prototype.__class__=e,e.prototype.__parent__=a.prototype,e},t=function(a){return a&&a.url?b.isFunction(a.url)?a.url():a.url:null},u=function(){throw new Error('A "url" property or function must be specified')},v=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}},w=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};return a}),define("app/Deprecated/lib/3rdparty/pagebus/full/pagebus",[],function(){if(window.OpenAjax||(OpenAjax=new function(){this.hub={},h=this.hub,h.implementer="http://openajax.org",h.implVersion="2.0",h.specVersion="2.0",h.implExtraData={};var a={};h.libraries=a;var b="org.openajax.hub.";h.registerLibrary=function(c,d,e,f){a[c]={prefix:c,namespaceURI:d,version:e,extraData:f},this.publish(b+"registerLibrary",a[c])},h.unregisterLibrary=function(c){this.publish(b+"unregisterLibrary",a[c]),delete a[c]}},OpenAjax.hub.Error={BadParameters:"OpenAjax.hub.Error.BadParameters",Disconnected:"OpenAjax.hub.Error.Disconnected",Duplicate:"OpenAjax.hub.Error.Duplicate",NoContainer:"OpenAjax.hub.Error.NoContainer",NoSubscription:"OpenAjax.hub.Error.NoSubscription",NotAllowed:"OpenAjax.hub.Error.NotAllowed",WrongProtocol:"OpenAjax.hub.Error.WrongProtocol"},OpenAjax.hub.SecurityAlert={LoadTimeout:"OpenAjax.hub.SecurityAlert.LoadTimeout",FramePhish:"OpenAjax.hub.SecurityAlert.FramePhish",ForgedMsg:"OpenAjax.hub.SecurityAlert.ForgedMsg"},OpenAjax.hub._debugger=function(){},OpenAjax.hub.ManagedHub=function(a){if(!a||!a.onPublish||!a.onSubscribe)throw new Error(OpenAjax.hub.Error.BadParameters);if(this._p=a,this._onUnsubscribe=a.onUnsubscribe?a.onUnsubscribe:null,this._scope=a.scope||window,a.log){var b=this._scope,c=a.log;this._log=function(a){c.call(b,"ManagedHub: "+a)}}else this._log=function(){};this._subscriptions={c:{},s:null},this._containers={},this._seq=0,this._active=!0,this._isPublishing=!1,this._pubQ=[]},OpenAjax.hub.ManagedHub.prototype.subscribeForClient=function(a,b,c){if(this._assertConn(),this._invokeOnSubscribe(b,a))return this._subscribe(b,this._sendToClient,this,{c:a,sid:c});throw new Error(OpenAjax.hub.Error.NotAllowed)},OpenAjax.hub.ManagedHub.prototype.unsubscribeForClient=function(a,b){this._unsubscribe(b),this._invokeOnUnsubscribe(a,b)},OpenAjax.hub.ManagedHub.prototype.publishForClient=function(a,b,c){this._assertConn(),this._publish(b,c,a)},OpenAjax.hub.ManagedHub.prototype.disconnect=function(){this._active=!1;for(var a in this._containers)this.removeContainer(this._containers[a])},OpenAjax.hub.ManagedHub.prototype.getContainer=function(a){var b=this._containers[a];return b?b:null},OpenAjax.hub.ManagedHub.prototype.listContainers=function(){var a=[];for(var b in this._containers)a.push(this._containers[b]);return a},OpenAjax.hub.ManagedHub.prototype.addContainer=function(a){this._assertConn();var b=a.getClientID();if(this._containers[b])throw new Error(OpenAjax.hub.Error.Duplicate);this._containers[b]=a},OpenAjax.hub.ManagedHub.prototype.removeContainer=function(a){var b=a.getClientID();if(!this._containers[b])throw new Error(OpenAjax.hub.Error.NoContainer);a.remove(),delete this._containers[b]},OpenAjax.hub.ManagedHub.prototype.subscribe=function(a,b,c,d,e){function f(a,d,f,h){if(g._invokeOnPublish(a,d,h,null))try{b.call(c,a,d,e)}catch(i){OpenAjax.hub._debugger(),g._log("caught error from onData callback to Hub.subscribe("+a+"): "+i.message)}}if(this._assertConn(),this._assertSubTopic(a),!b)throw new Error(OpenAjax.hub.Error.BadParameters);if(!this._invokeOnSubscribe(a,null))return this._invokeOnComplete(d,c,null,!1,OpenAjax.hub.Error.NotAllowed),null;c=c||window;var g=this,h=this._subscribe(a,f,c,e);return this._invokeOnComplete(d,c,h,!0),h},OpenAjax.hub.ManagedHub.prototype.publish=function(a,b){this._assertConn(),this._assertPubTopic(a),this._publish(a,b,null)},OpenAjax.hub.ManagedHub.prototype.unsubscribe=function(a,b,c){if(this._assertConn(),"undefined"==typeof a||null==a)throw new Error(OpenAjax.hub.Error.BadParameters);this._unsubscribe(a),this._invokeOnUnsubscribe(null,a),this._invokeOnComplete(b,c,a,!0)},OpenAjax.hub.ManagedHub.prototype.isConnected=function(){return this._active},OpenAjax.hub.ManagedHub.prototype.getScope=function(){return this._scope},OpenAjax.hub.ManagedHub.prototype.getSubscriberData=function(a){this._assertConn();var b=a.split("."),c=b.pop(),d=this._getSubscriptionObject(this._subscriptions,b,0,c);if(d)return d.data;throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.ManagedHub.prototype.getSubscriberScope=function(a){this._assertConn();var b=a.split("."),c=b.pop(),d=this._getSubscriptionObject(this._subscriptions,b,0,c);if(d)return d.scope;throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.ManagedHub.prototype.getParameters=function(){return this._p},OpenAjax.hub.ManagedHub.prototype._sendToClient=function(a,b,c,d){this.isConnected()&&this._invokeOnPublish(a,b,d,c.c)&&c.c.sendToClient(a,b,c.sid)},OpenAjax.hub.ManagedHub.prototype._assertConn=function(){if(!this.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected)},OpenAjax.hub.ManagedHub.prototype._assertPubTopic=function(a){if(null==a||""==a||-1!=a.indexOf("*")||-1!=a.indexOf("..")||"."==a.charAt(0)||"."==a.charAt(a.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)},OpenAjax.hub.ManagedHub.prototype._assertSubTopic=function(a){if(!a)throw new Error(OpenAjax.hub.Error.BadParameters);for(var b=a.split("."),c=b.length,d=0;c>d;d++){var e=b[d];if(""==e||-1!=e.indexOf("*")&&"*"!=e&&"**"!=e)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==e&&c-1>d)throw new Error(OpenAjax.hub.Error.BadParameters)}},OpenAjax.hub.ManagedHub.prototype._invokeOnComplete=function(a,b,c,d,e){if(a)try{b=b||window,a.call(b,c,d,e)}catch(f){OpenAjax.hub._debugger(),this._log("caught error from onComplete callback: "+f.message)}},OpenAjax.hub.ManagedHub.prototype._invokeOnPublish=function(a,b,c,d){try{return this._p.onPublish.call(this._scope,a,b,c,d)}catch(e){OpenAjax.hub._debugger(),this._log("caught error from onPublish callback to constructor: "+e.message)}return!1},OpenAjax.hub.ManagedHub.prototype._invokeOnSubscribe=function(a,b){try{return this._p.onSubscribe.call(this._scope,a,b)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onSubscribe callback to constructor: "+c.message)}return!1},OpenAjax.hub.ManagedHub.prototype._invokeOnUnsubscribe=function(a,b){if(this._onUnsubscribe){var c=b.slice(0,b.lastIndexOf("."));try{this._onUnsubscribe.call(this._scope,c,a)}catch(d){OpenAjax.hub._debugger(),this._log("caught error from onUnsubscribe callback to constructor: "+d.message)}}},OpenAjax.hub.ManagedHub.prototype._subscribe=function(a,b,c,d){var e=a+"."+this._seq,f={scope:c,cb:b,data:d,sid:this._seq++},g=a.split(".");return this._recursiveSubscribe(this._subscriptions,g,0,f),e},OpenAjax.hub.ManagedHub.prototype._recursiveSubscribe=function(a,b,c,d){var e=b[c];c==b.length?(d.next=a.s,a.s=d):("undefined"==typeof a.c&&(a.c={}),"undefined"==typeof a.c[e]?(a.c[e]={c:{},s:null},this._recursiveSubscribe(a.c[e],b,c+1,d)):this._recursiveSubscribe(a.c[e],b,c+1,d))},OpenAjax.hub.ManagedHub.prototype._publish=function(a,b,c){if(this._isPublishing)return void this._pubQ.push({t:a,d:b,p:c});for(this._safePublish(a,b,c);this._pubQ.length>0;){var d=this._pubQ.shift();this._safePublish(d.t,d.d,d.p)}},OpenAjax.hub.ManagedHub.prototype._safePublish=function(a,b,c){this._isPublishing=!0;var d=a.split(".");this._recursivePublish(this._subscriptions,d,0,a,b,c),this._isPublishing=!1},OpenAjax.hub.ManagedHub.prototype._recursivePublish=function(a,b,c,d,e,f){if("undefined"!=typeof a){var g;if(c==b.length?g=a:(this._recursivePublish(a.c[b[c]],b,c+1,d,e,f),this._recursivePublish(a.c["*"],b,c+1,d,e,f),g=a.c["**"]),"undefined"!=typeof g)for(var h=g.s;h;){{var i=h.scope,j=h.cb,k=h.data;h.sid}"string"==typeof j&&(j=i[j]),j.call(i,d,e,k,f),h=h.next}}},OpenAjax.hub.ManagedHub.prototype._unsubscribe=function(a){var b=a.split("."),c=b.pop();if(!this._recursiveUnsubscribe(this._subscriptions,b,0,c))throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.ManagedHub.prototype._recursiveUnsubscribe=function(a,b,c,d){if("undefined"==typeof a)return!1;if(c<b.length){var e=a.c[b[c]];if(!e)return!1;if(this._recursiveUnsubscribe(e,b,c+1,d),null==e.s){for(var f in e.c)return!0;delete a.c[b[c]]}}else{for(var g=a.s,h=null,i=!1;g;){if(d==g.sid){i=!0,g==a.s?a.s=g.next:h.next=g.next;break}h=g,g=g.next}if(!i)return!1}return!0},OpenAjax.hub.ManagedHub.prototype._getSubscriptionObject=function(a,b,c,d){if("undefined"!=typeof a){if(c<b.length){var e=a.c[b[c]];return this._getSubscriptionObject(e,b,c+1,d)}for(var f=a.s;f;){if(d==f.sid)return f;f=f.next}}return null},OpenAjax.hub._hub=new OpenAjax.hub.ManagedHub({onSubscribe:function(){return!0},onPublish:function(){return!0}}),OpenAjax.hub.subscribe=function(a,b,c,d){return"string"==typeof b&&(c=c||window,b=c[b]||null),OpenAjax.hub._hub.subscribe(a,b,c,null,d)},OpenAjax.hub.unsubscribe=function(a){return OpenAjax.hub._hub.unsubscribe(a)},OpenAjax.hub.publish=function(a,b){OpenAjax.hub._hub.publish(a,b)},OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","2.0",{})),OpenAjax.hub.InlineContainer=function(a,b,c){if(!(a&&b&&c&&c.Container&&c.Container.onSecurityAlert))throw new Error(OpenAjax.hub.Error.BadParameters);if(this._params=c,this._hub=a,this._id=b,this._onSecurityAlert=c.Container.onSecurityAlert,this._onConnect=c.Container.onConnect?c.Container.onConnect:null,this._onDisconnect=c.Container.onDisconnect?c.Container.onDisconnect:null,this._scope=c.Container.scope||window,c.Container.log){var d=this._scope,e=c.Container.log;this._log=function(a){e.call(d,"InlineContainer::"+b+": "+a)},this._doLog=!0}else this._log=function(){};this._connected=!1,this._subs=[],this._subIndex=1,a.addContainer(this)},OpenAjax.hub.InlineContainer.prototype.getHub=function(){return this._hub},OpenAjax.hub.InlineContainer.prototype.sendToClient=function(a,b,c){if(this.isConnected()){var d=this._subs[c];try{d.cb.call(d.sc,a,b,d.d)}catch(e){OpenAjax.hub._debugger(),this._client._log("caught error from onData callback to HubClient.subscribe(): "+e.message)}}},OpenAjax.hub.InlineContainer.prototype.remove=function(){this.isConnected()&&this._disconnect()},OpenAjax.hub.InlineContainer.prototype.isConnected=function(){return this._connected},OpenAjax.hub.InlineContainer.prototype.getClientID=function(){return this._id},OpenAjax.hub.InlineContainer.prototype.getPartnerOrigin=function(){return this._connected?(this._cacheOrig||(this._cacheOrig=window.location.protocol+"//"+window.location.hostname),this._cacheOrig):null},OpenAjax.hub.InlineContainer.prototype.getParameters=function(){return this._params},OpenAjax.hub.InlineContainer.prototype.connect=function(a,b,c){if(this._connected)throw new Error(OpenAjax.hub.Error.Duplicate);if(this._connected=!0,this._client=a,this._onConnect)try{this._onConnect.call(this._scope,this)}catch(d){OpenAjax.hub._debugger(),this._log("caught error from onConnect callback to constructor: "+d.message)}this._invokeOnComplete(b,c,a,!0)},OpenAjax.hub.InlineContainer.prototype.disconnect=function(a,b,c){if(!this._connected)throw new Error(OpenAjax.hub.Error.Disconnected);if(this._disconnect(),this._onDisconnect)try{this._onDisconnect.call(this._scope,this)}catch(d){OpenAjax.hub._debugger(),this._log("caught error from onDisconnect callback to constructor: "+d.message)}this._invokeOnComplete(b,c,a,!0)},OpenAjax.hub.InlineContainer.prototype.subscribe=function(a,b,c,d,e){if(this._assertConn(),this._assertSubTopic(a),!b)throw new Error(OpenAjax.hub.Error.BadParameters);var f=""+this._subIndex++,g=!1,h=null;try{var i=this._hub.subscribeForClient(this,a,f);g=!0}catch(j){f=null,h=j.message}return c=c||window,g&&(this._subs[f]={h:i,cb:b,sc:c,d:e}),this._invokeOnComplete(d,c,f,g,h),f},OpenAjax.hub.InlineContainer.prototype.publish=function(a,b){this._assertConn(),this._assertPubTopic(a),this._hub.publishForClient(this,a,b)},OpenAjax.hub.InlineContainer.prototype.unsubscribe=function(a,b,c){if(this._assertConn(),"undefined"==typeof a||null==a)throw new Error(OpenAjax.hub.Error.BadParameters);var d=this._subs[a];if(!d)throw new Error(OpenAjax.hub.Error.NoSubscription);this._hub.unsubscribeForClient(this,d.h),delete this._subs[a],this._invokeOnComplete(b,c,a,!0)},OpenAjax.hub.InlineContainer.prototype.getSubscriberData=function(a){return this._assertConn(),this._getSubscription(a).d},OpenAjax.hub.InlineContainer.prototype.getSubscriberScope=function(a){return this._assertConn(),this._getSubscription(a).sc},OpenAjax.hub.InlineContainer.prototype._invokeOnComplete=function(a,b,c,d,e){if(a)try{b=b||window,a.call(b,c,d,e)}catch(f){OpenAjax.hub._debugger(),this._client._log("caught error from onComplete callback: "+f.message)}},OpenAjax.hub.InlineContainer.prototype._disconnect=function(){for(var a in this._subs)this._hub.unsubscribeForClient(this,this._subs[a].h);this._subs=[],this._subIndex=1,this._connected=!1},OpenAjax.hub.InlineContainer.prototype._assertConn=function(){if(!this._connected)throw new Error(OpenAjax.hub.Error.Disconnected)},OpenAjax.hub.InlineContainer.prototype._assertPubTopic=function(a){if(null==a||""==a||-1!=a.indexOf("*")||-1!=a.indexOf("..")||"."==a.charAt(0)||"."==a.charAt(a.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)},OpenAjax.hub.InlineContainer.prototype._assertSubTopic=function(a){if(!a)throw new Error(OpenAjax.hub.Error.BadParameters);for(var b=a.split("."),c=b.length,d=0;c>d;d++){var e=b[d];if(""==e||-1!=e.indexOf("*")&&"*"!=e&&"**"!=e)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==e&&c-1>d)throw new Error(OpenAjax.hub.Error.BadParameters)}},OpenAjax.hub.InlineContainer.prototype._getSubscription=function(a){var b=this._subs[a];if(b)return b;throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.InlineHubClient=function(a){if(!(a&&a.HubClient&&a.HubClient.onSecurityAlert&&a.InlineHubClient&&a.InlineHubClient.container))throw new Error(OpenAjax.hub.Error.BadParameters);if(this._params=a,this._onSecurityAlert=a.HubClient.onSecurityAlert,this._scope=a.HubClient.scope||window,this._container=a.InlineHubClient.container,a.HubClient.log){var b=this._container.getClientID(),c=this._scope,d=a.HubClient.log;this._log=function(a){d.call(c,"InlineHubClient::"+b+": "+a)},this._doLog=!0}else this._log=function(){}},OpenAjax.hub.InlineHubClient.prototype.connect=function(a,b){this._container.connect(this,a,b)},OpenAjax.hub.InlineHubClient.prototype.disconnect=function(a,b){this._container.disconnect(this,a,b)},OpenAjax.hub.InlineHubClient.prototype.getPartnerOrigin=function(){return this._container.getPartnerOrigin()},OpenAjax.hub.InlineHubClient.prototype.getClientID=function(){return this._container.getClientID()},OpenAjax.hub.InlineHubClient.prototype.subscribe=function(a,b,c,d,e){return this._container.subscribe(a,b,c,d,e)},OpenAjax.hub.InlineHubClient.prototype.publish=function(a,b){this._container.publish(a,b)},OpenAjax.hub.InlineHubClient.prototype.unsubscribe=function(a,b,c){this._container.unsubscribe(a,b,c)},OpenAjax.hub.InlineHubClient.prototype.isConnected=function(){return this._container.isConnected()},OpenAjax.hub.InlineHubClient.prototype.getScope=function(){return this._scope},OpenAjax.hub.InlineHubClient.prototype.getSubscriberData=function(a){return this._container.getSubscriberData(a)},OpenAjax.hub.InlineHubClient.prototype.getSubscriberScope=function(a){return this._container.getSubscriberScope(a)},OpenAjax.hub.InlineHubClient.prototype.getParameters=function(){return this._params},"undefined"==typeof OpenAjax&&(OpenAjax={hub:{}}),OpenAjax.hub.IframeContainer=function(a,b,c){if(!(a&&b&&c&&c.Container&&c.Container.onSecurityAlert&&c.IframeContainer&&c.IframeContainer.parent&&c.IframeContainer.uri&&c.IframeContainer.tunnelURI))throw new Error(OpenAjax.hub.Error.BadParameters);this._params=c,this._id=b,this._delegate=window.postMessage?new OpenAjax.hub.IframePMContainer(this,a,b,c):new OpenAjax.hub.IframeFIMContainer(this,a,b,c),this._iframe=this._createIframe(c.IframeContainer.parent,this._delegate.getURI(),c.IframeContainer.iframeAttrs),a.addContainer(this)},OpenAjax.hub.IframeContainer.prototype.getHub=function(){return this._delegate.getHub()},OpenAjax.hub.IframeContainer.prototype.sendToClient=function(a,b,c){this._delegate.sendToClient(a,b,c)},OpenAjax.hub.IframeContainer.prototype.remove=function(){this._delegate.remove(),this._iframe.parentNode.removeChild(this._iframe)},OpenAjax.hub.IframeContainer.prototype.isConnected=function(){return this._delegate.isConnected()},OpenAjax.hub.IframeContainer.prototype.getClientID=function(){return this._id},OpenAjax.hub.IframeContainer.prototype.getPartnerOrigin=function(){return this._delegate.getPartnerOrigin()},OpenAjax.hub.IframeContainer.prototype.getParameters=function(){return this._params},OpenAjax.hub.IframeContainer.prototype.getIframe=function(){return this._iframe},OpenAjax.hub.IframeContainer.bind=function(a,b){var c=b;return function(){return c.apply(a,arguments)}},OpenAjax.hub.IframeContainer.prototype._createIframe=function(a,b,c){var d=document.createElement("iframe");if(c)for(var e in c)if("style"==e)for(var f in c.style)d.style[f]=c.style[f];else d[e]=c[e];return d.style.visibility="hidden",d.src='javascript:"<html></html>"',a.appendChild(d),d.src=b,d},OpenAjax.hub.IframeHubClient=function(a){if(!a||!a.HubClient||!a.HubClient.onSecurityAlert)throw new Error(OpenAjax.hub.Error.BadParameters);this._params=a,this._delegate=window.postMessage?new OpenAjax.hub.IframePMHubClient(this,a):new OpenAjax.hub.IframeFIMHubClient(this,a)},OpenAjax.hub.IframeHubClient.prototype.connect=function(a,b){if(b=b||window,this.isConnected())throw new Error(OpenAjax.hub.Error.Duplicate);this._delegate.connect(a,b)},OpenAjax.hub.IframeHubClient.prototype.disconnect=function(a,b){if(b=b||window,!this.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected);this._delegate.disconnect(a,b)},OpenAjax.hub.IframeHubClient.prototype.getPartnerOrigin=function(){return this._delegate.getPartnerOrigin()},OpenAjax.hub.IframeHubClient.prototype.getClientID=function(){return this._delegate.getClientID()},OpenAjax.hub.IframeHubClient.prototype.subscribe=function(a,b,c,d,e){if(this._assertConn(),this._assertSubTopic(a),!b)throw new Error(OpenAjax.hub.Error.BadParameters);return c=c||window,this._delegate.subscribe(a,b,c,d,e)},OpenAjax.hub.IframeHubClient.prototype.publish=function(a,b){this._assertConn(),this._assertPubTopic(a),this._delegate.publish(a,b)},OpenAjax.hub.IframeHubClient.prototype.unsubscribe=function(a,b,c){if(this._assertConn(),"undefined"==typeof a||null==a)throw new Error(OpenAjax.hub.Error.BadParameters);c=c||window,this._delegate.unsubscribe(a,b,c)},OpenAjax.hub.IframeHubClient.prototype.isConnected=function(){return this._delegate.isConnected()},OpenAjax.hub.IframeHubClient.prototype.getScope=function(){return this._delegate.getScope()},OpenAjax.hub.IframeHubClient.prototype.getSubscriberData=function(a){return this._assertConn(),this._delegate.getSubscriberData(a)},OpenAjax.hub.IframeHubClient.prototype.getSubscriberScope=function(a){return this._assertConn(),this._delegate.getSubscriberScope(a)},OpenAjax.hub.IframeHubClient.prototype.getParameters=function(){return this._params},OpenAjax.hub.IframeHubClient.prototype._assertConn=function(){if(!this.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected)},OpenAjax.hub.IframeHubClient.prototype._assertSubTopic=function(a){if(!a)throw new Error(OpenAjax.hub.Error.BadParameters);for(var b=a.split("."),c=b.length,d=0;c>d;d++){var e=b[d];if(""==e||-1!=e.indexOf("*")&&"*"!=e&&"**"!=e)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==e&&c-1>d)throw new Error(OpenAjax.hub.Error.BadParameters)}},OpenAjax.hub.IframeHubClient.prototype._assertPubTopic=function(a){if(null==a||""==a||-1!=a.indexOf("*")||-1!=a.indexOf("..")||"."==a.charAt(0)||"."==a.charAt(a.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)},OpenAjax.hub.IframePMContainer=function(a,b,c,d){if(this._container=a,this._hub=b,this._id=c,this._onSecurityAlert=d.Container.onSecurityAlert,this._onConnect=d.Container.onConnect?d.Container.onConnect:null,this._onDisconnect=d.Container.onDisconnect?d.Container.onDisconnect:null,this._scope=d.Container.scope||window,this._uri=d.IframeContainer.uri,this._tunnelURI=d.IframeContainer.tunnelURI,this._timeout=d.IframeContainer.timeout||15e3,d.Container.log){var e=this._scope,f=d.Container.log;this._log=function(a){f.call(e,"IframeContainer::"+c+": "+a)},this._doLog=!0}else this._log=function(){};this._securityToken=this._generateSecurityToken(d),this._connected=!1,this._subs={},"undefined"==typeof OpenAjax.hub.IframePMContainer._pmCapabilities&&this._testPostMessage(),this._postMessage=-1==OpenAjax.hub.IframePMContainer._pmCapabilities.indexOf("s")?function(a,b,c){a.postMessage(b,c)}:function(a,b,c){setTimeout(function(){a.postMessage(b,c)},0)},OpenAjax.hub.IframePMContainer._pmListener||(OpenAjax.hub.IframePMContainer._pmListener=new OpenAjax.hub.IframePMContainer.PMListener),this._internalID=OpenAjax.hub.IframePMContainer._pmListener.addContainer(this),this._startLoadTimer()},OpenAjax.hub.IframePMContainer.protocolID="openajax-2.0",OpenAjax.hub.IframePMContainer._pmListener=null,OpenAjax.hub.IframePMContainer.prototype.getHub=function(){return this._hub},OpenAjax.hub.IframePMContainer.prototype.sendToClient=function(a,b,c){this._sendMessage("pub",{t:a,d:b,s:c})},OpenAjax.hub.IframePMContainer.prototype.remove=function(){this._disconnect(),OpenAjax.hub.IframePMContainer._pmListener.removeContainer(this._internalID),clearTimeout(this._loadTimer)},OpenAjax.hub.IframePMContainer.prototype.isConnected=function(){return this._connected},OpenAjax.hub.IframePMContainer.prototype.getPartnerOrigin=function(){return this._connected?this._partnerOriginNoPort:null},OpenAjax.hub.IframePMContainer.prototype.receiveMessage=function(a,b){if(b.t!=this._securityToken||"undefined"!=typeof this._partnerOrigin&&!OpenAjax.hub.IframePMContainer.originMatches(this,a))return void this._invokeSecurityAlert(OpenAjax.hub.SecurityAlert.ForgedMsg);switch(this._doLog&&this._log("received message: ["+a.data+"]"),b.m){case"sub":var c="";try{this._subs[b.p.s]=this._hub.subscribeForClient(this._container,b.p.t,b.p.s)}catch(d){c=d.message}this._sendMessage("sub_ack",{s:b.p.s,e:c});break;case"pub":this._hub.publishForClient(this._container,b.p.t,b.p.d);break;case"uns":var e=this._subs[b.p.s];this._hub.unsubscribeForClient(this._container,e),delete this._subs[b.p.s],this._sendMessage("uns_ack",b.p.s);break;case"dis":if(this._startLoadTimer(),this._disconnect(),this._sendMessage("dis_ack",null),this._onDisconnect)try{this._onDisconnect.call(this._scope,this._container)}catch(d){OpenAjax.hub._debugger(),this._log("caught error from onDisconnect callback to constructor: "+d.message)}}},OpenAjax.hub.IframePMContainer.prototype.connect=function(a,b,c){if(this._log("client connecting to container "+this._id+" :: origin = "+a+" :: securityToken = "+b),b!=this._securityToken)return void this._invokeSecurityAlert(OpenAjax.hub.SecurityAlert.ForgedMsg);var d=this;if(c.onunload=function(){d.isConnected()&&setTimeout(function(){d._invokeSecurityAlert(OpenAjax.hub.SecurityAlert.FramePhish)},1)},clearTimeout(this._loadTimer),this._iframe=this._container.getIframe(),this._iframe.style.visibility="visible",this._partnerOrigin=a,this._partnerOriginNoPort=new RegExp("^([a-zA-Z]+://[^:]+).*").exec(this._partnerOrigin)[1],-1!=OpenAjax.hub.IframePMContainer._pmCapabilities.indexOf("d")&&(this._partnerDomain=new RegExp("^.+://([^:]+).*").exec(this._partnerOrigin)[1]),this._sendMessage("con_ack",null),this._connected=!0,this._onConnect)try{this._onConnect.call(this._scope,this._container)}catch(e){OpenAjax.hub._debugger(),this._log("caught error from onConnect callback to constructor: "+e.message)}},OpenAjax.hub.IframePMContainer.prototype.getURI=function(){var a="oahpv="+encodeURIComponent(OpenAjax.hub.IframePMContainer.protocolID)+"&oahi="+encodeURIComponent(this._internalID)+"&oaht="+this._securityToken+"&oahu="+encodeURIComponent(this._tunnelURI)+"&oahpm="+OpenAjax.hub.IframePMContainer._pmCapabilities;this._id!==this._internalID&&(a+="&oahj="+this._internalID),a+=OpenAjax.hub.enableDebug?"&oahd=true":"";var b=this._uri.split("#");return b[0]=b[0]+(-1!=b[0].indexOf("?")?"&":"?")+a,1==b.length?b[0]:b[0]+"#"+b[1]},OpenAjax.hub.IframePMContainer.originMatches=function(a,b){return b.origin?b.origin==a._partnerOrigin:b.domain==a._partnerDomain},OpenAjax.hub.IframePMContainer.prototype._generateSecurityToken=function(a){if(!OpenAjax.hub.IframePMContainer._prng){var b=(new Date).getTime()+Math.random()+document.cookie;OpenAjax.hub.IframePMContainer._prng=smash.crypto.newPRNG(b)}if(a.IframeContainer.seed)try{var c=a.IframeContainer.seed.call(this._scope);OpenAjax.hub.IframePMContainer._prng.addSeed(c)}catch(d){OpenAjax.hub._debugger(),this._log("caught error from 'seed' callback: "+d.message)}var e=a.IframeContainer.tokenLength||6;return OpenAjax.hub.IframePMContainer._prng.nextRandomB64Str(e)},OpenAjax.hub.IframePMContainer.prototype._testPostMessage=function(){function a(a){"postmessage.test"==a.data&&(b=!0,"undefined"==typeof a.origin&&(OpenAjax.hub.IframePMContainer._pmCapabilities+="d"))}OpenAjax.hub.IframePMContainer._pmCapabilities="";var b=!1;window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a),window.postMessage("postmessage.test","*"),b&&(OpenAjax.hub.IframePMContainer._pmCapabilities+="s"),window.removeEventListener?window.removeEventListener("message",a,!1):window.detachEvent("onmessage",a)},OpenAjax.hub.IframePMContainer.prototype._startLoadTimer=function(){var a=this;this._loadTimer=setTimeout(function(){OpenAjax.hub.IframePMContainer._pmListener.removeContainer(a._internalID),a._invokeSecurityAlert(OpenAjax.hub.SecurityAlert.LoadTimeout)},this._timeout)},OpenAjax.hub.IframePMContainer.prototype._sendMessage=function(a,b){var c=JSON.stringify({m:a,i:this._internalID,t:this._securityToken,p:b});this._postMessage(this._iframe.contentWindow,c,this._partnerOrigin)},OpenAjax.hub.IframePMContainer.prototype._disconnect=function(){if(this._connected){this._connected=!1,this._iframe.style.visibility="hidden";for(var a in this._subs)this._hub.unsubscribeForClient(this._container,this._subs[a]);this._subs={}}},OpenAjax.hub.IframePMContainer.prototype._invokeSecurityAlert=function(a){try{this._onSecurityAlert.call(this._scope,this._container,a)}catch(b){OpenAjax.hub._debugger(),this._log("caught error from onSecurityAlert callback to constructor: "+b.message)}},OpenAjax.hub.IframePMContainer.PMListener=function(){this._containers={},window.addEventListener?window.addEventListener("message",OpenAjax.hub.IframeContainer.bind(this,this._receiveMessage),!1):window.attachEvent&&window.attachEvent("onmessage",OpenAjax.hub.IframeContainer.bind(this,this._receiveMessage))},OpenAjax.hub.IframePMContainer.PMListener.prototype.addContainer=function(a){for(var b=a._id;this._containers[b];)b=(32767*Math.random()|0).toString(16)+"_"+b;return this._containers[b]=a,b},OpenAjax.hub.IframePMContainer.PMListener.prototype.removeContainer=function(a){delete this._containers[a]},OpenAjax.hub.IframePMContainer.PMListener.prototype.connectFromTunnel=function(a,b,c,d){this._containers[a]&&this._containers[a].connect(b,c,d)},OpenAjax.hub.IframePMContainer.PMListener.prototype._receiveMessage=function(a){try{var b=JSON.parse(a.data)}catch(c){return}if(this._verifyMsg(b)&&this._containers[b.i]){this._containers[b.i].receiveMessage(a,b)}},OpenAjax.hub.IframePMContainer.PMListener.prototype._verifyMsg=function(a){return"string"==typeof a.m&&"string"==typeof a.i&&"t"in a&&"p"in a},OpenAjax.hub.IframePMHubClient=function(a,b){if(this._checkProtocolID(),this._client=a,this._onSecurityAlert=b.HubClient.onSecurityAlert,this._scope=b.HubClient.scope||window,this._id=OpenAjax.hub.IframePMHubClient.queryURLParam("oahi"),this._internalID=OpenAjax.hub.IframePMHubClient.queryURLParam("oahj")||this._id,this._securityToken=OpenAjax.hub.IframePMHubClient.queryURLParam("oaht"),this._tunnelURI=OpenAjax.hub.IframePMHubClient.queryURLParam("oahu"),OpenAjax.hub.IframePMContainer._pmCapabilities=OpenAjax.hub.IframePMHubClient.queryURLParam("oahpm"),!this._id||!this._securityToken||!this._tunnelURI)throw new Error(OpenAjax.hub.Error.WrongProtocol);
if(OpenAjax.hub.IframePMHubClient.queryURLParam("oahd")&&(OpenAjax.hub.enableDebug=!0),this._partnerOrigin=new RegExp("^([a-zA-Z]+://[^/?#]+).*").exec(this._tunnelURI)[1],this._partnerOriginNoPort=new RegExp("^([a-zA-Z]+://[^:]+).*").exec(this._partnerOrigin)[1],-1!=OpenAjax.hub.IframePMContainer._pmCapabilities.indexOf("d")&&(this._partnerDomain=new RegExp("^.+://([^:]+).*").exec(this._partnerOrigin)[1]),b.HubClient.log){var c=this._id,d=this._scope,e=b.HubClient.log;this._log=function(a){e.call(d,"IframeHubClient::"+c+": "+a)},this._doLog=!0}else this._log=function(){};this._connected=!1,this._subs={},this._subIndex=1,this._postMessage=-1==OpenAjax.hub.IframePMContainer._pmCapabilities.indexOf("s")?function(a,b,c){a.postMessage(b,c)}:function(a,b,c){setTimeout(function(){a.postMessage(b,c)},0)}},OpenAjax.hub.IframePMHubClient.protocolID="openajax-2.0",OpenAjax.hub.IframePMHubClient.prototype.connect=function(a,b){a&&(this._connectOnComplete={cb:a,sc:b}),this._msgListener=OpenAjax.hub.IframeContainer.bind(this,this._receiveMessage),window.addEventListener?window.addEventListener("message",this._msgListener,!1):window.attachEvent&&window.attachEvent("onmessage",this._msgListener);var c=window.location.protocol+"//"+window.location.host,d=document.createElement("iframe");document.body.appendChild(d),d.src=this._tunnelURI+(-1==this._tunnelURI.indexOf("?")?"?":"&")+"oahj="+encodeURIComponent(this._internalID)+"&oaht="+this._securityToken+"&oaho="+encodeURIComponent(c),d.style.position="absolute",d.style.left=d.style.top="-10px",d.style.height=d.style.width="1px",d.style.visibility="hidden",this._tunnelIframe=d},OpenAjax.hub.IframePMHubClient.prototype.disconnect=function(a,b){this._connected=!1,a&&(this._disconnectOnComplete={cb:a,sc:b}),this._sendMessage("dis",null)},OpenAjax.hub.IframePMHubClient.prototype.getPartnerOrigin=function(){return this._connected?new RegExp("^([a-zA-Z]+://[^:]+).*").exec(this._partnerOrigin)[1]:null},OpenAjax.hub.IframePMHubClient.prototype.getClientID=function(){return this._id},OpenAjax.hub.IframePMHubClient.prototype.subscribe=function(a,b,c,d,e){var f=""+this._subIndex++;return this._subs[f]={cb:b,sc:c,d:e,oc:d},this._sendMessage("sub",{t:a,s:f}),f},OpenAjax.hub.IframePMHubClient.prototype.publish=function(a,b){this._sendMessage("pub",{t:a,d:b})},OpenAjax.hub.IframePMHubClient.prototype.unsubscribe=function(a,b,c){if(!this._subs[a]||this._subs[a].uns)throw new Error(OpenAjax.hub.Error.NoSubscription);this._subs[a].uns={cb:b,sc:c},this._sendMessage("uns",{s:a})},OpenAjax.hub.IframePMHubClient.prototype.isConnected=function(){return this._connected},OpenAjax.hub.IframePMHubClient.prototype.getScope=function(){return this._scope},OpenAjax.hub.IframePMHubClient.prototype.getSubscriberData=function(a){var b=this._subs[a];if(b)return b.d;throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.IframePMHubClient.prototype.getSubscriberScope=function(a){var b=this._subs[a];if(b)return b.sc;throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.IframePMHubClient.queryURLParam=function(a){var b=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.search);return b?decodeURIComponent(b[1].replace(/\+/g,"%20")):null},OpenAjax.hub.IframePMHubClient.prototype._checkProtocolID=function(){var a=OpenAjax.hub.IframePMHubClient.queryURLParam("oahpv");if(a!=OpenAjax.hub.IframePMHubClient.protocolID)throw new Error(OpenAjax.hub.Error.WrongProtocol)},OpenAjax.hub.IframePMHubClient.prototype._receiveMessage=function(a){try{var b=JSON.parse(a.data)}catch(c){return}if(this._verifyMsg(b)&&b.i==this._internalID)if(OpenAjax.hub.IframePMContainer.originMatches(this,a)&&b.t==this._securityToken)switch(this._doLog&&this._log("received message: ["+a.data+"]"),b.m){case"sub_ack":var d=b.p.s,e=this._subs[d].oc;if(e)try{delete this._subs[d].oc;var f=this._subs[d].sc;e.call(f,b.p.s,""==b.p.e,b.p.e)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onComplete callback to HubClient.subscribe(): "+c.message)}break;case"pub":var d=b.p.s;if(this._subs[d]&&!this._subs[d].uns){var g=this._subs[d].cb,f=this._subs[d].sc,h=this._subs[d].d;try{g.call(f,b.p.t,b.p.d,h)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onData callback to HubClient.subscribe(): "+c.message)}}break;case"uns_ack":var d=b.p;if(this._subs[d]){var e=this._subs[d].uns.cb;if(e)try{var f=this._subs[d].uns.sc;e.call(f,d,!0)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onComplete callback to HubClient.unsubscribe(): "+c.message)}delete this._subs[d]}break;case"con_ack":if(this._connected=!0,this._connectOnComplete){var e=this._connectOnComplete.cb,f=this._connectOnComplete.sc;try{e.call(f,this._client,!0)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onComplete callback to HubClient.connect(): "+c.message)}delete this._connectOnComplete}break;case"dis_ack":if(window.removeEventListener?window.removeEventListener("message",this._msgListener,!1):window.detachEvent("onmessage",this._msgListener),delete this._msgListener,this._tunnelIframe.parentNode.removeChild(this._tunnelIframe),delete this._tunnelIframe,this._disconnectOnComplete){try{var e=this._disconnectOnComplete.cb,f=this._disconnectOnComplete.sc;e.call(f,this._client,!0)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onComplete callback to HubClient.disconnect(): "+c.message)}delete this._disconnectOnComplete}}else try{this._onSecurityAlert.call(this._scope,this._client,OpenAjax.hub.SecurityAlert.ForgedMsg)}catch(c){OpenAjax.hub._debugger(),this._log("caught error from onSecurityAlert callback to constructor: "+c.message)}},OpenAjax.hub.IframePMHubClient.prototype._verifyMsg=function(a){return"string"==typeof a.m&&"t"in a&&"p"in a},OpenAjax.hub.IframePMHubClient.prototype._sendMessage=function(a,b){var c=JSON.stringify({m:a,i:this._internalID,t:this._securityToken,p:b});this._postMessage(window.parent,c,this._partnerOrigin)},"undefined"==typeof OpenAjax&&(OpenAjax={hub:{}}),OpenAjax.hub.IframeFIMContainer=function(a,b,c,d){if(this._container=a,this._hub=b,this._onSecurityAlert=d.Container.onSecurityAlert,this._onConnect=d.Container.onConnect?d.Container.onConnect:null,this._onDisconnect=d.Container.onDisconnect?d.Container.onDisconnect:null,this._scope=d.Container.scope||window,this._clientURI=d.IframeContainer.uri,smash.SEComm.tunnelURI=d.IframeContainer.tunnelURI,smash._loadTimeout=d.IframeContainer.timeout||15e3,d.Container.log){var e=this._scope,f=d.Container.log;this._log=function(a){f.call(e,"IframeContainer::"+c+": "+a)},this._doLog=!0}else this._log=function(){};smash._createPRNG(this,d),smash._ensureSingletonManager(),this._internalID=smash._singletonManager.generateUniqueClientName(c)},OpenAjax.hub.IframeFIMContainer.prototype.getHub=function(){return this._hub},OpenAjax.hub.IframeFIMContainer.prototype.sendToClient=function(a,b,c){smash._singletonManager.sendToClient(this._internalID,a,b,[c])},OpenAjax.hub.IframeFIMContainer.prototype.remove=function(){return smash._singletonManager.prepareForUnload(this._internalID)},OpenAjax.hub.IframeFIMContainer.prototype.isConnected=function(){return smash._singletonManager.isConnected(this._internalID)},OpenAjax.hub.IframeFIMContainer.prototype.getPartnerOrigin=function(){return smash._singletonManager.getPartnerOrigin(this._internalID)},OpenAjax.hub.IframeFIMContainer.prototype.getURI=function(){function a(a,c){var d=null;switch(c){case smash.SecurityErrors.INVALID_TOKEN:case smash.SecurityErrors.TOKEN_VERIFICATION_FAILED:d=OpenAjax.hub.SecurityAlert.ForgedMsg;break;case smash.SecurityErrors.TUNNEL_UNLOAD:d=OpenAjax.hub.SecurityAlert.FramePhish;break;case smash.SecurityErrors.COMPONENT_LOAD:d=OpenAjax.hub.SecurityAlert.LoadTimeout}try{b._onSecurityAlert.call(b._scope,b._container,d)}catch(e){OpenAjax.hub._debugger(),b._log("caught error from onSecurityAlert callback to constructor: "+e.message)}}var b=this,c=smash._singletonManager.prepareForLoad({clientName:this._internalID,uri:this._clientURI,commErrorCallback:a,oaaContainer:this,log:this._log});return c&&OpenAjax.hub.enableDebug&&(c+=":debug"),c},OpenAjax.hub.IframeFIMHubClient=function(a,b){var c=new RegExp("[\\?&]oahm=([^&#]*)").exec(window.location.search);if(!c)throw new Error(OpenAjax.hub.Error.WrongProtocol);c=c[1];var d=c.split(":",1);if(d[0]!=smash._protocolID)throw new Error(OpenAjax.hub.Error.WrongProtocol);c=c.substring(d[0].length+1);var e=window.location.href+"#"+c;window.location.replace(e),this._client=a,this._onSecurityAlert=b.HubClient.onSecurityAlert,this._scope=b.HubClient.scope||window;var f=new RegExp("\\d{3}.{"+smash._securityTokenLength+"}.{"+smash._securityTokenLength+"}\\d{3}(.*)"),g=f.exec(c)[1],h=g.split(":"),i=decodeURIComponent(h[0]);if(this._id=i.substring(i.indexOf("_")+1),h[2]&&"debug"==h[2]&&(OpenAjax.hub.enableDebug=!0),b.HubClient.log){var j=this._id,k=this._scope,l=b.HubClient.log;this._log=function(a){l.call(k,"IframeHubClient::"+j+": "+a)},this._doLog=!0}else this._log=function(){};this._connected=!1,this._subs={},this._subIndex=1,smash._createPRNG(this,b)},OpenAjax.hub.IframeFIMHubClient.prototype.connect=function(a,b){function c(c){if(c&&(d._connected=!0),a)try{a.call(b,d._client,c)}catch(e){OpenAjax.hub._debugger(),d._log("caught error from onComplete callback to HubClient.connect(): "+e.message)}}if(null==smash._singletonClientHub){smash._singletonClientHub=new smash.SEHubClient(null,this._log);var d=this;smash._singletonClientHub.setSecurityErrorCallback(function(a){a!=smash.SecurityErrors.INVALID_TOKEN&&d._log("unknown smash security error: "+a);try{d._onSecurityAlert.call(d._scope,d._client,OpenAjax.hub.SecurityAlert.ForgedMsg)}catch(b){OpenAjax.hub._debugger(),d._log("caught error from onSecurityAlert callback to constructor: "+b.message)}})}var d=this;smash._singletonClientHub.connect(c)},OpenAjax.hub.IframeFIMHubClient.prototype.disconnect=function(a,b){function c(c){if(a)try{a.call(b,d._client,c)}catch(e){OpenAjax.hub._debugger(),d._log("caught error from onComplete callback to HubClient.disconnect(): "+e.message)}}this._connected=!1;var d=this;smash._singletonClientHub.disconnect(c)},OpenAjax.hub.IframeFIMHubClient.prototype.getPartnerOrigin=function(){return smash._singletonClientHub?smash._singletonClientHub.getPartnerOrigin():null},OpenAjax.hub.IframeFIMHubClient.prototype.getClientID=function(){return this._id},OpenAjax.hub.IframeFIMHubClient.prototype.subscribe=function(a,b,c,d,e){function f(a,d,f){try{b.call(c,d,f,e)}catch(g){OpenAjax.hub._debugger(),h._log("caught error from onData callback to HubClient.subscribe(): "+g.message)}}var g=""+this._subIndex++,h=this,i=d?function(a,b,e){try{d.call(c,g,a,e)}catch(f){OpenAjax.hub._debugger(),h._log("caught error from onComplete callback to HubClient.subscribe(): "+f.message)}}:null;return this._subs[g]=smash._singletonClientHub.subscribe(a,i,f,c,e),g},OpenAjax.hub.IframeFIMHubClient.prototype.publish=function(a,b){smash._singletonClientHub.publish(a,b)},OpenAjax.hub.IframeFIMHubClient.prototype.unsubscribe=function(a,b,c){function d(d){if(delete e._subs[a],b)try{b.call(c,a,d)}catch(f){OpenAjax.hub._debugger(),e._log("caught error from onComplete callback to HubClient.unsubscribe(): "+f.message)}}if(!this._subs[a])throw new Error(OpenAjax.hub.Error.NoSubscription);var e=this;this._subs[a].unsubscribe(d)},OpenAjax.hub.IframeFIMHubClient.prototype.isConnected=function(){return this._connected},OpenAjax.hub.IframeFIMHubClient.prototype.getScope=function(){return this._scope},OpenAjax.hub.IframeFIMHubClient.prototype.getSubscriberData=function(a){var b=this._subs[a];if(b)return b.getSubscriberData();throw new Error(OpenAjax.hub.Error.NoSubscription)},OpenAjax.hub.IframeFIMHubClient.prototype.getSubscriberScope=function(a){var b=this._subs[a];if(b)return b.getSubscriberScope();throw new Error(OpenAjax.hub.Error.NoSubscription)},"undefined"==typeof smash)var smash={};if(smash._singletonManager=void 0,smash._singletonClientHub=void 0,smash._protocolID="openajax-2.0",smash._prng=void 0,smash._securityTokenLength=6,smash._securityTokenOverhead=null,smash._computeOtherTokenConstants=function(){smash._securityTokenOverhead=2*smash._securityTokenLength,smash._multiplier=Math.pow(10,smash._securityTokenLength-1)},smash._computeOtherTokenConstants(),smash._createPRNG=function(a,b){if(!smash._prng){var c=(new Date).getTime()+Math.random()+document.cookie;smash._prng=smash.crypto.newPRNG(c)}var d=b.IframeContainer||b.IframeHubClient;if(d&&d.seed)try{var e=d.seed.call(a._scope);smash._prng.addSeed(e)}catch(f){OpenAjax.hub._debugger(),a._log("caught error from 'seed' callback: "+f.message)}},smash._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",smash._generateSecurityToken=function(){var a;if(smash._prng)a=smash._prng.nextRandomB64Str(smash._securityTokenLength);else{var b=Math.random();a="";for(var c=0;c<smash._securityTokenLength;c++){var d=64*b,e=Math.floor(d);b=d-e,a+=smash._keyStr.charAt(e)}}return a},smash._ensureSingletonManager=function(){null==smash._singletonManager&&(smash._singletonManager=new smash.SEHub)},smash.SEHub=function(){function a(a,b){this.uri=a,this.connected=!1,this.errorCallback=b}function b(a,b){var d=c.componentInfo[b];if(null!=d){var e=d.errorCallback;null!=e&&e(b,a)}}var c=this;this.componentInfo=[],this._subs=[],this.generateUniqueClientName=function(a){do a=(32767*Math.random()|0).toString(16)+"_"+a;while(c.componentInfo[a]);return a},this.prepareForLoad=function(d){var e=d.clientName,f=d.uri;return null==e||null==f?null:null!=c.componentInfo[e]?null:(c.componentInfo[e]=new a(f,d.commErrorCallback),c.componentInfo[e].seComm=new smash.SEComm,c.componentInfo[e].seComm.setSecurityListener(b),c.componentInfo[e].oaaContainer=d.oaaContainer,c.componentInfo[e].seComm.prepareForLoad(e,f,c,smash._loadTimeout,d.log))},this.prepareForUnload=function(a){return c.componentInfo[a]?(c._disconnect(a),c.componentInfo[a].seComm.prepareForUnload(),delete c.componentInfo[a],!0):!0},this.isConnected=function(a){return c.componentInfo[a]&&c.componentInfo[a].connected?!0:!1},this.sendToClient=function(a,b,d,e){if(c.isConnected(a)){var f=c.componentInfo[a].seComm;f&&f.distribute(b,e,d)}},this.componentLoaded=function(a,b){if(c.componentInfo[a]){c.componentInfo[a].connected=!0,c.componentInfo[a].partnerOrigin=new RegExp("^([a-zA-Z]+://[^:/?#]+).*").exec(b)[1];var d=c.componentInfo[a].oaaContainer;if(d._container.getIframe().style.visibility="visible",d._onConnect)try{d._onConnect.call(d._scope,d._container)}catch(e){OpenAjax.hub._debugger(),d._log("caught error from onConnect callback to constructor: "+e.message)}}},this.publishInternal=function(a,b,d){if(c.componentInfo[a]){var e=c.componentInfo[a].oaaContainer;e._hub.publishForClient(e._container,b,d)}},this.subscribeInternal=function(a,b,d){var e=c.componentInfo[a].oaaContainer;c._subs[b]=e._hub.subscribeForClient(e._container,d,b)},this.unsubscribeInternal=function(a,b){try{var d=c._subs[b],e=c.componentInfo[a].oaaContainer;return e._hub.unsubscribeForClient(e._container,d),!0}catch(f){}return!1},this.disconnect=function(a){c._disconnect(a);var b=c.componentInfo[a].oaaContainer;if(b._onDisconnect)try{b._onDisconnect.call(b._scope,b._container)}catch(d){OpenAjax.hub._debugger(),b._log("caught error from onDisconnect callback to constructor: "+d.message)}},this._disconnect=function(a){if(c.componentInfo[a].connected){c.componentInfo[a].connected=!1;var b=c.componentInfo[a].oaaContainer;b._container.getIframe().style.visibility="hidden";for(var d in c._subs)b._hub.unsubscribeForClient(b._container,c._subs[d]);c._subs=[]}},this.getPartnerOrigin=function(a){return c.componentInfo[a].connected?c.componentInfo[a].partnerOrigin:null}},smash.SEHubClient=function(a,b){function c(a,b,c,d,e,f,g){var h=!1,i=g,j=f,k=this;this.getTopic=function(){return b},this.getConnHandle=function(){return e},this.equals=function(b){return null!=b._getSubId&&"function"==typeof b._getSubId&&null!=b.getConnHandle&&"function"==typeof b.getConnHandle&&a===b._getSubId()&&e===b.getConnHandle()?!0:!1},this.isSubscribed=function(){return h},this.unsubscribe=function(a){return e._unsubscribe(k,a)},this.getSubscriberData=function(){return i},this.getSubscriberScope=function(){return j},this._getSubId=function(){return a},this._setIsSubscribed=function(a){h=a},this._getCallback=function(){return c},this._getEventCallback=function(){return d}}function d(a){if(j||a.type==smash.SECommMessage.CONNECT_ACK)switch(a.type){case smash.SECommMessage.DISTRIBUTE:if(null!=a.additionalHeader&&null!=a.additionalHeader.s)for(var b=a.additionalHeader.s,c=0;c<b.length;c++){var d=b[c];if(null!=d&&null!=h[d]){var e=h[d]._getEventCallback();null!=e&&e(h[d],a.topic,a.payload)}}break;case smash.SECommMessage.SUBSCRIBE_ACK:if(null!=a.additionalHeader){var d=a.additionalHeader.subId,f=a.additionalHeader.isOk,g=a.additionalHeader.err;if(null!=d&&null!=f&&null!=h[d]){var i=h[d]._getCallback();f?(h[d]._setIsSubscribed(!0),null!=i&&i(!0,h[d])):(null!=i&&i(!1,h[d],g),h[d]=void 0)}}break;case smash.SECommMessage.CONNECT_ACK:l(!0);break;case smash.SECommMessage.DISCONNECT_ACK:m(!0)}}function e(a){if(null==f)throw new Error(errorString);f(a)}this.equals=function(a){return k===a},this.isConnected=function(){return j},this.getClientName=function(){return a},this.connect=function(a){l=function(b){b&&(j=!0),a(b,k)},i.connect(l)},this.disconnect=function(a){m=function(b){b&&(j=!1,h=[]),a(b,k)},i.disconnect()},this.subscribe=function(a,b,d,e,f){var j=g+"";return g++,h[j]=new c(j,a,b,d,k,e,f),i.subscribe(j,a),h[j]},this.publish=function(a,b){return i.publish(a,b),!0},this.getPartnerOrigin=function(){if(j&&null!=i){var a=i.getParsedTunnelUrl();if(null!=a)return a.scheme+"://"+a.host}return null},this.setSecurityErrorCallback=function(a){f=a},this._unsubscribe=function(a,b){var c=a._getSubId();if(!h[c])throw new Error(OpenAjax.hub.Error.NoSubscription);return h[c]=void 0,i.unsubscribe(c),null!=b&&b(!0,a),a};var f=void 0,g=0,h=[],i=new smash.SECommClient(a,b),j=!1,k=this,l=null,m=null;i.handleIncomingMessage=d,i.setSecurityListener(e)},smash.SecurityErrors={INVALID_TOKEN:0,TOKEN_VERIFICATION_FAILED:1,TUNNEL_UNLOAD:2,COMPONENT_LOAD:3},smash.SECommMessage=function(){this.type=null,this.topic=null,this.additionalHeader=null,this.payload=null;var a="y",b="t",c="h",d="p";this.serialize=function(){var e=a+"="+this.type;if(null!=this.topic){var f=encodeURIComponent(this.topic),g="&"+b+"="+f;e+=g}if(null!=this.additionalHeader){var h=encodeURIComponent(JSON.stringify(this.additionalHeader)),i="&"+c+"="+h;e+=i}if(null!=this.payload){var j=encodeURIComponent(this.payload),k="&"+d+"="+j;e+=k}return e},this.deserialize=function(e){for(var f=e.split("&"),g=0;g<f.length;g++){var h=f[g].split("=");switch(h[0]){case a:this.type=h[1];break;case b:this.topic=decodeURIComponent(h[1]);break;case c:var i=decodeURIComponent(h[1]);this.additionalHeader=JSON.parse(i);break;case d:this.payload=decodeURIComponent(h[1])}}}},smash.SECommMessage.CONNECT="con",smash.SECommMessage.CONNECT_ACK="cac",smash.SECommMessage.DISCONNECT="xcon",smash.SECommMessage.DISCONNECT_ACK="xac",smash.SECommMessage.PUBLISH="pub",smash.SECommMessage.DISTRIBUTE="dis",smash.SECommMessage.SUBSCRIBE="sub",smash.SECommMessage.UNSUBSCRIBE="uns",smash.SECommMessage.SUBSCRIBE_ACK="sac",smash.SECommMessage.ERROR="err",smash.SECommErrors={},smash.SECommErrors.tunnelNotSetError=new Error("The tunnel URI was not set. Please set the tunnel URI."),smash.SEComm=function(){function a(a,b){var c=a.split("?");return c.length>1?c[0]+"?"+b+"&"+c[1]:(c=a.split("#"),c.length>1?c[0]+"?"+b+c[1]:a+"?"+b)}function b(){clearInterval(h),h=null,l||r.handleSecurityError(smash.SecurityErrors.COMPONENT_LOAD)}function c(){clearInterval(j),r.handleSecurityError(smash.SecurityErrors.COMPONENT_LOAD)}function d(a,b){return function(){q(a,b)}}function e(){null==q?setTimeout("throw tunnelUnloadError;",g):setTimeout(d(smash.SecurityErrors.TUNNEL_UNLOAD,m),g)}function f(a){0==s?n.push(a):l.send(a)}var g=1,h=null,i=0,j=null,k=null,l=null,m=null,n=[],o=null,p=null,q=null,r=this,s=!1,t=null;this.setSecurityListener=function(a){q=a},this.prepareForLoad=function(c,d,e,f,g){if(t=g,this.log("Parent connecting to : "+c),o=e,m=c,i=f,null==smash.SEComm.tunnelURI)throw smash.SECommErrors.tunnelNotSetError;return p=smash._generateSecurityToken(),k=a(d,"oahm="+smash._protocolID+":100"+p+p+"000"+encodeURIComponent(c)+":"+encodeURIComponent(smash.SEComm.tunnelURI)),smash.SEComm.instances[c]=r,h=setInterval(b,i),k},this.getScope=function(){return this},this.getCallback=function(){return"messageReceived"},this.initializationFinished=function(a,b,c,d,f){if(this.log("Tunnel commLib initialization finished. Processing outgoing queue. Security token: "+b),p!=b)return r.handleSecurityError(smash.SecurityErrors.TOKEN_VERIFICATION_FAILED),!1;for(l=a,s=!0,this.log("Token verified."),f.onunload=e,o.componentLoaded(m,c);n.length>0;)l.send(n.shift());return!0},this.prepareForUnload=function(){null!=h&&(clearInterval(h),h=null)},this.handleSecurityError=function(a){if(a==smash.SecurityErrors.COMPONENT_LOAD&&(this.initializationFinished=function(){return!1}),null==q)throw new Error(a);q(a,m)},this.messageReceived=function(a){var b=new smash.SECommMessage;switch(b.deserialize(a),b.type){case smash.SECommMessage.PUBLISH:if(null!=b.additionalHeader){var d=b.payload;"J"==b.additionalHeader.f&&(d=JSON.parse(b.payload)),o.publishInternal(m,b.topic,d)}break;case smash.SECommMessage.SUBSCRIBE:if(null!=b.additionalHeader){var e=!0,g="";try{o.subscribeInternal(m,b.additionalHeader.subId,b.topic)}catch(h){e=!1,g=h.message}var k=new smash.SECommMessage;k.type=smash.SECommMessage.SUBSCRIBE_ACK,k.additionalHeader={subId:b.additionalHeader.subId,isOk:e,err:g},f(k.serialize())}break;case smash.SECommMessage.UNSUBSCRIBE:null!=b.additionalHeader&&o.unsubscribeInternal(m,b.additionalHeader.subId);break;case smash.SECommMessage.CONNECT:clearInterval(j),o.componentLoaded(m,b.payload);var b=new smash.SECommMessage;b.type=smash.SECommMessage.CONNECT_ACK,f(b.serialize());break;case smash.SECommMessage.DISCONNECT:o.disconnect(m),j=setInterval(c,i);var b=new smash.SECommMessage;b.type=smash.SECommMessage.DISCONNECT_ACK,f(b.serialize())}},this.distribute=function(a,b,c){var d=new smash.SECommMessage;d.type=smash.SECommMessage.DISTRIBUTE,d.topic=a,d.additionalHeader={s:b},"string"==typeof c?(d.additionalHeader.f="S",d.payload=c):(d.additionalHeader.f="J",d.payload=JSON.stringify(c)),f(d.serialize())},this.log=function(a){t(a)}},smash.SEComm.instances=[],smash.SECommClient=function(a,b){function c(a){var b=a.match(n);this.scheme=""==b[2]?null:b[2],this.host=""==b[4]?null:b[4],this.port=""==b[6]?null:b[6],this.path=""==b[7]?null:b[7],this.query=""==b[8]?null:b[8]}function d(a){0==i?h.push(a):f.send(a)}var e=[];e.child=this;var f=new smash.CommLib(!0,e,a),g=this,h=[],i=!1,j=null,k={f:"J"},l={f:"S"},m=null;this.publish=function(a,b){var c=new smash.SECommMessage;c.type=smash.SECommMessage.PUBLISH,c.topic=a,"string"==typeof b?(c.additionalHeader=l,c.payload=b):(c.additionalHeader=k,c.payload=JSON.stringify(b)),d(c.serialize())},this.subscribe=function(a,b){var c=new smash.SECommMessage;c.type=smash.SECommMessage.SUBSCRIBE,c.topic=b,c.additionalHeader={subId:a},d(c.serialize())},this.connect=function(a){if(i){var b=new smash.SECommMessage;return b.type=smash.SECommMessage.CONNECT,b.payload=window.location.href.split("#")[0],void d(b.serialize())}connectCallback=a},this.disconnect=function(){var a=new smash.SECommMessage;a.type=smash.SECommMessage.DISCONNECT,d(a.serialize())},this.initializationFinished=function(a){for(this.log("Initialization finished. Processing outgoing queue."),m=new c(a),i=!0,connectCallback(!0);h.length>0;)f.send(h.shift())},this.getParsedTunnelUrl=function(){return m};var n=new RegExp("^((http|https):)?(//([^/?#:]*))?(:([0-9]*))?([^?#]*)(\\?([^#]*))?");this.unsubscribe=function(a){var b=new smash.SECommMessage;b.type=smash.SECommMessage.UNSUBSCRIBE,b.additionalHeader={subId:a},d(b.serialize())},this.messageReceived=function(a){var b=new smash.SECommMessage;if(b.deserialize(a),b.type==smash.SECommMessage.DISTRIBUTE){var c=b.additionalHeader;null!=c&&"J"==c.f&&(b.payload=JSON.parse(b.payload))}g.handleIncomingMessage(b)},this.handleSecurityError=function(b){if(null==j)throw new Error(b);j(b,a)},this.setSecurityListener=function(a){j=a},this.handleIncomingMessage=function(a){alert("SECommClient\n\nTopic: "+a.topic+"\n\nPayload: "+a.payload)},this.log=function(a){b(a)}},smash.CommLib=function(a,b,c){function d(){g()&&h()&&i()&&j(),e()&&o()}function e(){return F.type==t?!0:F.msn==C.ackMsn&&1==C.ack?!0:(r("Waiting for ACK : "+F.msn),!1)}function f(){return J++,100==J&&(J=0),10>J?"0"+J:""+J}function g(){var a=window.location.href.split("#");if(2==a.length){var b=a[1];if(""!=b&&b!=B)return B=b,!0}return!1}function h(){var a=B.substr(0,1),b=B.substr(1,2),c=3,d=B.substr(c,smash._securityTokenLength);c+=smash._securityTokenLength;var e=B.substr(c,smash._securityTokenLength);c+=smash._securityTokenLength;var f=B.substr(c,1);c+=1;var g=B.substr(c,2);c+=2;var h=B.substr(c);return r("In : Type: "+a+" msn: "+b+" tokenParent: "+d+" tokenChild: "+e+" ack: "+f+" msn: "+g+" payload: "+h),C={type:a,msn:b,tokenParent:d,tokenChild:e,ack:f,ackMsn:g,payload:h},!0}function i(){return C.type==s||C.tokenParent==M&&C.tokenChild==N?!0:(r("Security token error: Invalid security token received. The message will be discarded."),q(smash.SecurityErrors.INVALID_TOKEN),!1)}function j(){switch(A=1,C.type!=s&&a&&F.type==s&&"1"==C.ack&&F.msn==C.ackMsn&&O.initializationFinished(G),C.type){case s:k();break;case t:l();break;case u:m();break;case v:n()}D=C}function k(){var d=C.payload.split(":"),e=decodeURIComponent(d[0]);if(G=decodeURIComponent(d[1]),M=C.tokenParent,N=C.tokenChild,a){null!=c&&(e=c),N=smash._generateSecurityToken();var f="3827816c-f3b1-11db-8314-0800200c9a66",g=document.createElement("iframe"),h=encodeURIComponent(window.location.href.split("#")[0]),i=h,j=encodeURIComponent(e)+":"+h+":"+i;G+=(-1!=G.indexOf("?")?"&":"?")+"oahm=100"+M+N+"100"+j,g.src=G,g.name=f,g.id=f,document.body.appendChild(g),g.style.position="absolute",g.style.left=g.style.top="-10px",g.style.height=g.style.width="1px",g.style.visibility="hidden",A=0,H=window.frames[f],F={type:s,msn:"00",tokenParent:M,tokenChild:N,ack:"0",ackMsn:"00",payload:j},O=b.child}else{var i=decodeURIComponent(d[2]);H=window.parent,O=b[e];var k=O.initializationFinished(w,M,G,i,window);k||(A=0),F={type:s,msn:"00",tokenParent:M,tokenChild:N,ack:"0",ackMsn:"00",payload:encodeURIComponent(e)+":"+encodeURIComponent(window.location.href.split("#")[0])}}null==H&&r("Init failed.")}function l(){A=0}function m(){K+=C.payload}function n(){K+=C.payload,r("Received: "+K),O.messageReceived(K),K=""}function o(){0==I.length&&1==A&&I.push({type:t,payload:""}),0!=I.length&&(E=I.shift(),E.tokenParent=M,E.tokenChild=N,E.msn=f(),E.ack="1",E.ackMsn=D.msn,A=0,p())}function p(){var a=G+"#"+E.type+E.msn+E.tokenParent+E.tokenChild+E.ack+E.ackMsn+E.payload;H.location.replace(a),F=E,r("Out: Type: "+E.type+" msn: "+E.msn+" tokenParent: "+E.tokenParent+" tokenChild: "+E.tokenChild+" ack: "+E.ack+" msn: "+E.ackMsn+" payload: "+E.payload)}function q(a){clearInterval(L),O.handleSecurityError(a)}function r(a){if(O){for(;P.length>0;)O.log(P.shift());O.log(a)}else P.push(a)}var s="1",t="2",u="3",v="4",w=this,x=100,y=4e3,z=6,A=0,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=[],J=0,K="",L=null,M=null,N=null,O=null,P=[];this.send=function(a){if(null==G)return void r("Trying to send without proper initialization. Message will be discarded. "+a);r("Sending: "+a);for(var b=a,c=y-z-smash._securityTokenOverhead-G.length,d=b;d.length>0;){var e=d.substr(0,c);d=d.substr(c),I.push(0==d?{type:v,payload:e}:{type:u,payload:e})}},L=setInterval(d,x)},"undefined"==typeof smash)var smash={};smash.crypto={strToWA:function(a,b){for(var c=Array(),d=(1<<b)-1,e=0;e<a.length*b;e+=b)c[e>>5]|=(a.charCodeAt(e/b)&d)<<32-b-e%32;return c},hmac_sha1:function(a,b,c){for(var d=Array(16),e=Array(16),f=0;16>f;f++)d[f]=909522486^a[f],e[f]=1549556828^a[f];var g=this.sha1(d.concat(this.strToWA(b,c)),512+b.length*c);return this.sha1(e.concat(g),672)},newPRNG:function(a){function b(a){return that.hmac_sha1(d,a,8)}function c(a){for(var c=b(a),d=0;5>d;d++)e[d]^=c[d]}that=this,("string"!=typeof a||a.length<12)&&alert("WARNING: Seed length too short ...");var d=[43417,15926,18182,33130,9585,30800,49772,40144,47678,55453,4659,38181,65340,6787,54417,65301],e=[],f=0;return c(a),{addSeed:function(a){c(a)},nextRandomOctets:function(a){for(var b=[];a>0;){f+=1;var c=that.hmac_sha1(e,f.toString(16),8);for(i=0;20>i&a>0;i++,a--)b.push((c[i>>2]>>i%4)%256)}return b},nextRandomB64Str:function(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",c=this.nextRandomOctets(a),d="",e=0;a>e;e++)d+=b.charAt(63&c[e]);return d}}},sha1:function(){function a(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function b(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}var c=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},d=function(a,b){return a<<b|a>>>32-b};return function(e,f){e[f>>5]|=128<<24-f%32,e[(f+64>>9<<4)+15]=f;for(var g=Array(80),h=1732584193,i=-271733879,j=-1732584194,k=271733878,l=-1009589776,m=0;m<e.length;m+=16){for(var n=h,o=i,p=j,q=k,r=l,s=0;80>s;s++){g[s]=16>s?e[m+s]:d(g[s-3]^g[s-8]^g[s-14]^g[s-16],1);var t=c(c(d(n,5),a(s,o,p,q)),c(c(r,g[s]),b(s)));r=q,q=p,p=d(o,30),o=n,n=t}h=c(n,h),i=c(o,i),j=c(p,j),k=c(q,k),l=c(r,l)}return Array(h,i,j,k,l)}}()},this.JSON||(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);
return reviver.call(a,b,e)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var PageBus={};return PageBus._debug=function(){},PageBus._esc=function(a){return a.replace(/\./g,"!")},PageBus._assertPubTopic=function(a){if(null==a||""==a||-1!=a.indexOf("*")||-1!=a.indexOf("..")||"."==a.charAt(0)||"."==a.charAt(a.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)},PageBus._assertSubTopic=function(a){if(null==a||""==a)throw new Error(OpenAjax.hub.Error.BadParameters);for(var b=a.split("."),c=b.length,d=0;c>d;d++){var e=b[d];if(""==e||-1!=e.indexOf("*")&&"*"!=e&&"**"!=e)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==e&&c-1>d)throw new Error(OpenAjax.hub.Error.BadParameters)}},PageBus._copy=function(a){var b;if("object"==typeof a){if(null==a)return null;if(a.constructor==Array){b=[];for(var c=0;c<a.length;c++)b[c]=PageBus._copy(a[c]);return b}if(a.constructor==Date)return b=new Date,b.setDate(a.getDate()),b;b={};for(var d in a)b[d]=PageBus._copy(a[d]);return b}return a},PageBus._TopicMatcher=function(){this._items={}},PageBus._TopicMatcher.prototype.store=function(a,b){var c=a.split("."),d=c.length;(_recurse=function(e,f){if(f==d)e["."]={topic:a,value:b};else{var g=c[f];e[g]||(e[g]={}),_recurse(e[g],f+1)}})(this._items,0)},PageBus._TopicMatcher.prototype.match=function(a,b){var c=a.split("."),d=c.length,e=[];return _recurse=function(a,f){if(a){var g;if(f==d)g=a;else{if(_recurse(a[c[f]],f+1),b)return;"**"!=c[f]&&_recurse(a["*"],f+1),g=a["**"]}g&&g["."]&&e.push(g["."])}},_recurse(this._items,0),e},PageBus._TopicMatcher.prototype.exists=function(a,b){var c=a.split("."),d=c.length,e=!1;return _recurse=function(a,f){if(a){var g;if(f==d)g=a;else{if(_recurse(a[c[f]],f+1),e||b)return;if("**"!=c[f]&&(_recurse(a["*"],f+1),e))return;g=a["**"]}g&&g["."]&&(e=!0)}},_recurse(this._items,0),e},PageBus._TopicMatcher.prototype.clear=function(a){var b=a.split("."),c=b.length;(_recurse=function(a,d){if(a)if(d==c)a["."]&&delete a["."];else{_recurse(a[b[d]],d+1);for(var e in a[b[d]])return;delete a[b[d]]}})(this._items,0)},PageBus._TopicMatcher.prototype.wildcardClear=function(a){var b=a.split("."),c=b.length;_clean=function(a,b){for(m in a[b])return;delete a[b]},(_recurse=function(a,d){if(a){if(d==c)return void(a["."]&&delete a["."]);var e,f=b[d];if(a[f]&&(_recurse(a[f],d+1),_clean(a,f)),"*"==f)for(e in a)"**"!=e&&"."!=e&&(_recurse(a[e],d+1),_clean(a,e));else if("**"==f)for(e in a)delete a[e]}})(this._items,0)},PageBus._TopicMatcher.prototype.wildcardMatch=function(a){var b=a.split("."),c=b.length,d=[];return _recurse=function(a,e){var f,g=b[e];if(a&&e!=c)if("**"==g)for(var h in a)"."!=h&&(f=a[h],f["."]&&d.push(f["."]),_recurse(f,e));else if("*"==g)for(var h in a)"."!=h&&"**"!=h&&(f=a[h],e==c-1?f["."]&&d.push(f["."]):_recurse(f,e+1));else{if(f=a[g],!f)return;e==c-1?f["."]&&d.push(f["."]):_recurse(f,e+1)}},_recurse(this._items,0),d},PageBus.policy={Ops:{Publish:"p",Subscribe:"s"},Error:{BadParameters:"PageBus.policy.Error.BadParameters"},_assertName:function(a){if(null==a||""==a)throw new Error(OpenAjax.hub.Error.BadParameters);if(!PageBus.policy._tops[a]){for(var b=a.split("."),c=b.length,d=0;c>d;d++){var e=b[d];if(""==e||-1!=e.indexOf("*")&&"*"!=e&&"**"!=e)throw new Error(PageBus.policy.Error.BadParameters);if("**"==e&&c-1>d)throw new Error(PageBus.policy.Error.BadParameters)}PageBus.policy._tops[a]=!0}},_tops:{}},PageBus.policy.HubPolicy=function(a){a||(a={}),this._cfg=a,this._log=a.log,this._topicMgr=new PageBus._TopicMatcher},PageBus.policy.HubPolicy.prototype.onPublish=function(a,b,c,d){var e,f=!0;if(null!=d){if(e=d.getPartnerOrigin(),!e)return!1;f=this.isAllowed.call(this,e,PageBus.policy.Ops.Subscribe,a)}if(f&&null!=c){if(e=c.getPartnerOrigin(),!e)return!1;f=this.isAllowed.call(this,e,PageBus.policy.Ops.Publish,a)}if(this._log){var g=d?d.getClientID():"(Mgr)",h=c?c.getClientID():"(Mgr)";this._log("(PageBus.policy) ["+h+", "+g+"] onPublish: "+(f?"ALLOWED ":"DENIED  ")+a)}return f},PageBus.policy.HubPolicy.prototype.onSubscribe=function(a,b){var c,d=!0;if(null!=b){if(c=b.getPartnerOrigin(),!c)return!1;d=this.isAllowed.call(this,c,PageBus.policy.Ops.Subscribe,a)}if(this._log){var e=b?b.getClientID():"(Mgr)";this._log("(PageBus.policy) ["+e+"] onSubscribe: "+(d?"ALLOWED ":"DENIED  ")+a)}return d},PageBus.policy.HubPolicy.prototype.onUnsubscribe=function(){},PageBus.policy.HubPolicy.prototype.onSend=function(a,b,c){var d=this.isAllowed(c,PageBus.policy.Ops.Subscribe,a);return this._log&&this._log("(PageBus.policy) ["+c+"] onSend: "+(d?"ALLOWED ":"DENIED  ")+a),d},PageBus.policy.HubPolicy.prototype.onReceive=function(a,b,c){var d=this.isAllowed(c,PageBus.policy.Ops.Publish,a);return this._log&&this._log("(PageBus.policy) ["+c+"] onReceive: "+(d?"ALLOWED ":"DENIED  ")+a),d},PageBus.policy.HubPolicy.prototype._getMyOrigin=function(){var a=window.location.href.match(/[^:]*:\/\/[^:\/\?#]*/);return a[0]},PageBus.policy.HubPolicy.prototype.grant=function(a,b,c){if(!a||!b||!c)throw new Error(PageBus.policy.Error.BadParameters);var d=PageBus._esc(a)+"."+b+"."+c;PageBus.policy._assertName(d),this._topicMgr.store(d,{dm:a,op:b,tp:c}),this._log&&this._log("(PageBus.policy) ["+a+"] grant: "+b+" on "+c);var e="_pagebus.cache.s."+c;this._topicMgr.store(PageBus._esc(a)+"."+b+"."+e,{dm:a,op:b,tp:e}),this._log&&this._log("(PageBus.policy) ["+a+"] implicit grant: "+b+" on "+e)},PageBus.policy.HubPolicy.prototype.revoke=function(a,b,c){if(!a||!b||!c)throw new Error(PageBus.policy.Error.BadParameters);var d=PageBus._esc(a)+"."+b+"."+c;PageBus.policy._assertName(d),this._topicMgr.clear(d),this._log&&this._log("(PageBus.policy) ["+a+"] revoke: "+b+" on "+c);var e="_pagebus.cache.s."+c;this._topicMgr.clear(PageBus._esc(a)+"."+b+"."+e),this._log&&this._log("(PageBus.policy) ["+a+"] implicit revoke: "+b+" on "+e)},PageBus.policy.HubPolicy.prototype.revokeAll=function(a){if(!a)throw new Error(PageBus.policy.Error.BadParameters);this._topicMgr.wildcardClear(PageBus._esc(a)+".**"),this._log&&this._log("(PageBus.policy) ["+a+"] revokeAll")},PageBus.policy.HubPolicy.prototype.isAllowed=function(a,b,c){if(!a||""==a||!b||""==b||!c||""==c)throw new Error(PageBus.policy.Error.BadParameters);var d=PageBus._esc(a)+"."+b+"."+c;return this._topicMgr.exists(d,!1)},PageBus.policy.HubPolicy.prototype.listAllowed=function(a,b){if(!a||!b)throw new Error(PageBus.policy.Error.BadParameters);var c=this._topicMgr.wildcardMatch(PageBus._esc(a)+"."+b+".**"),d=[];for(var e in c)"_pagebus."!=c[e].value.tp.substring(0,9)&&d.push(c[e].value.tp);return d},PageBus.cache={},PageBus.cache.Error={NoCache:"PageBus.cache.Error.NoCache"},PageBus._cache={},PageBus._cache.isCacheable=function(a){return a&&"object"==typeof a&&a.PageBus&&a.PageBus.cache},PageBus._cache.Cache=function(){this._refs={},this._doCache=new PageBus._TopicMatcher,this._caches=new PageBus._TopicMatcher},PageBus._cache.Cache.prototype.add=function(a,b){var c,d=this._doCache.match(a,!0);d.length>0?c=d[0].value:(c={rc:0},this._doCache.store(a,c)),c.rc++,this._refs[b]=a},PageBus._cache.Cache.prototype.remove=function(a){var b=this._refs[a];if(b){delete this._refs[a];var c=this._doCache.match(b,!0);if(0!=c.length&&(c[0].value.rc--,0==c[0].value.rc)){this._doCache.clear(b);for(var d=this._caches.wildcardMatch(b),e=0;e<d.length;e++)this._doCache.exists(d[e].topic,!1)||this._caches.clear(d[e].topic)}}},PageBus._cache.Cache.prototype.storeCopy=function(a,b){PageBus._assertPubTopic(a);var c=PageBus._copy(b);this._caches.store(a,c)},PageBus._cache.Cache.prototype.clear=function(a){PageBus._assertPubTopic(a),this._caches.clear(a)},PageBus._cache.Cache.prototype.query=function(a){return PageBus._assertSubTopic(a),this._caches.wildcardMatch(a)},PageBus._cache.Cache.prototype.isCaching=function(a){for(var b in this._refs);return this._doCache.exists(a,!1)},PageBus._enableMH=function(){var a=OpenAjax.hub.ManagedHub;OpenAjax.hub.ManagedHub=function(b){if(!b)throw new Error(OpenAjax.hub.Error.BadParameters);if(!b.onPublish||!b.onSubscribe)throw new Error(OpenAjax.hub.Error.BadParameters);var c=null;b.PageBus||(b.PageBus={}),b.PageBus.policy||(b.PageBus.policy=c),b.scope||(b.scope=window),this._pagebus={_params:{},_getActualParameters:function(){return this._pagebus._params},_policy:b.PageBus.policy,_hub:this},this.pagebus={_hub:this};var d=this._pagebus;d._cache=new PageBus._cache.Cache,this.pagebus.query=function(a){return this._hub._pagebus._cache.query(a)},this.pagebus.store=function(a,b){this._hub._pagebus._cache.isCaching(a)&&this._hub.publish(a,b)},this.pagebus.clear=function(a){this._hub._pagebus._cache.isCaching(a)&&this._hub.publish(a,null)};var e=b.scope?b.scope:window,f=this._pagebus._params;for(var g in b)f[g]=b[g];f.scope=b.scope?b.scope:window,f.onPublish=function(a,c,d,g){try{var h=f.PageBus.policy;if(h){var i=h.onPublish.call(h,a,c,d,g);if(!i)return!1}return b.onPublish.call(e,a,c,d,g)}catch(j){return!1}},f.onSubscribe=function(a,c){try{var d=f.PageBus.policy;if(d){var g=d.onSubscribe.call(d,a,c);if(!g)return!1}return g=b.onSubscribe.call(e,a,c)}catch(h){return!1}},f.onUnsubscribe=function(a,c){try{var d=f.PageBus.policy;d&&d.onUnsubscribe.call(d,b.scope,a,c),b.onUnsubscribe.call(e,a,c)}catch(g){return}},d._policy||(d._policy=null),a.call(this,f),this.getParameters=function(){return b}},OpenAjax.hub.ManagedHub.prototype=a.prototype;var b=OpenAjax.hub.ManagedHub.prototype.publish,c=OpenAjax.hub.ManagedHub.prototype.subscribe,d=OpenAjax.hub.ManagedHub.prototype.unsubscribe,e=OpenAjax.hub.ManagedHub.prototype.publishForClient,f=OpenAjax.hub.ManagedHub.prototype.subscribeForClient,g=OpenAjax.hub.ManagedHub.prototype.unsubscribeForClient,h=OpenAjax.hub.ManagedHub.prototype.getScope;OpenAjax.hub.ManagedHub.prototype.publish=function(a,c){PageBus._assertPubTopic(a),this._pagebus._cache.isCaching(a)&&(null==c?this._pagebus._cache.clear(a):this._pagebus._cache.storeCopy(a,c)),b.call(this,a,c)},OpenAjax.hub.ManagedHub.prototype.subscribe=function(a,b,d,e,f){PageBus._assertSubTopic(a);var g=c.call(this,a,b,d,e,f);if(PageBus._cache.isCacheable(f)){var h=this._pagebus._cache;h.add(a,g);for(var i=h.query(a),j=0;j<i.length;j++)try{b.call(d?d:window,i[j].topic,i[j].value,f)}catch(k){PageBus._debug()}}return g},OpenAjax.hub.ManagedHub.prototype.unsubscribe=function(a,b,c){var e=this._pagebus._cache;e.remove(a),d.call(this,a,b,c)},OpenAjax.hub.ManagedHub.prototype.getScope=function(){return h.call(this)},OpenAjax.hub.ManagedHub.prototype.publishForClient=function(a,b,c){PageBus._assertPubTopic(b),(!this._pagebus._policy||this._pagebus._policy.isAllowed(a.getPartnerOrigin(),PageBus.policy.Ops.Publish,b))&&this._pagebus._cache.isCaching(b)&&(null==c?this._pagebus._cache.clear(b):this._pagebus._cache.storeCopy(b,c)),e.call(this,a,b,c)},OpenAjax.hub.ManagedHub.prototype.subscribeForClient=function(a,b,c){function d(){for(var b=0;b<h.length;b++)a.sendToClient(h[b].topic,h[b].value,c)}PageBus._assertSubTopic(b);var e=f.call(this,a,b,c);if("_pagebus.cache.s."==b.substring(0,17)){var g=b.substring(17);this._pagebus._cache.add(g,e);var h=this._pagebus._cache.query(g);setTimeout(d,0)}return e},OpenAjax.hub.ManagedHub.prototype.unsubscribeForClient=function(a,b){this._pagebus._cache.remove(b);try{var c=this.getSubscriberData(b);PageBus._cache.isCacheable(c)&&this._pagebus._cacheSids[b]&&(this.unsubscribe(this._pagebus._cacheSids[b],null,null),delete this._pagebus._cacheSids[b],this._pagebus._cache.remove(b)),g.call(this,a,b)}catch(d){PageBus._debug()}}},PageBus._enableMH(),PageBus.HubClientExtender=function(a,b){var c=this;this._hub=a,this._params=b,b.PageBus||(this._params.PageBus={log:b.log}),b.PageBus.policy||(b.PageBus.policy=null),this._policy=b.PageBus.policy,this._cache=new PageBus._cache.Cache,this._cacheSids={},this._wrappedSubscribe=a.subscribe,this._wrappedUnsubscribe=a.unsubscribe,this._wrappedPublish=a.publish,this._wrappedDisconnect=a.disconnect,a.publish=function(a,b){c._publishWrapper(a,b)},a.subscribe=function(a,b,d,e,f){return c._subscribeWrapper(a,b,d,e,f)},a.unsubscribe=function(a,b,d){c._unsubscribeWrapper(a,b,d)},a.disconnect=function(a,b){c._disconnectWrapper(a,b)}},PageBus.HubClientExtender.prototype._publishWrapper=function(a,b){if(!this._hub.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected);PageBus._assertPubTopic(a),this._cache.isCaching(a)&&(null==b?this._cache.clear(a):this._cache.storeCopy(a,b));var c=this._hub.getPartnerOrigin();if(!c)throw new Error(OpenAjax.hub.Error.Disconnected);(!this._policy||this._policy.onSend(a,b,c))&&this._wrappedPublish.call(this._hub,a,b)},PageBus.HubClientExtender.prototype._subscribeWrapper=function(a,b,c,d,e){var f=this;if(!this._hub.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected);if(PageBus._assertSubTopic(a),!b)throw new Error(OpenAjax.hub.Error.BadParameters);var g=this._policy,h=this._hub.getPartnerOrigin();if(!h)throw new Error(OpenAjax.hub.Error.Disconnected);if(g&&!g.onReceive.call(g,a,null,h))throw new Error(OpenAjax.hub.Error.NotAllowed);dataHook=function(a,d,e){var g=f._policy,h=f._hub.getPartnerOrigin();if(!g||g.onReceive.call(g,a,d,h)){PageBus._cache.isCacheable(e)&&f._cache.isCaching(a)&&(null==d?f._cache.clear(a):f._cache.storeCopy(a,d));try{var i=c?c:window;b.call(i,a,d,e)}catch(j){PageBus._debug()}}},completeHook=function(a,b,e){b||f._cacheSids[a]&&(f._hub.unsubscribe(f._cacheSids[a],null,null),delete f._cacheSids[a],f._cache.remove(a));try{var g=c?c:window;d.call(g,a,b,e)}catch(h){PageBus._debug()}};var i=this._wrappedSubscribe.call(this._hub,a,dataHook,c,completeHook,e);try{this._hub.getSubscriberData(i)}catch(j){if(j.message==OpenAjax.hub.Error.NoSubscription)return i}return PageBus._cache.isCacheable(e)&&(this._cache.add(a,i),this._cacheSids[i]=this._hub.subscribe("_pagebus.cache.s."+a,function(a,d){var f=this._policy,g=this._hub.getPartnerOrigin();if(!f||this._policy.onReceive(a,d,g)){PageBus._cache.isCacheable(e)&&this._cache.isCaching(a)&&(null==d?this._cache.clear(a):this._cache.storeCopy(a,d));try{var h=c?c:window;b.call(h,a,d,e)}catch(i){PageBus._debug()}}},this,function(){},null)),i},PageBus.HubClientExtender.prototype._unsubscribeWrapper=function(a,b,c){if(!this._hub.isConnected())throw new Error(OpenAjax.hub.Error.Disconnected);if(null==a||""==a)throw new Error(OpenAjax.hub.Error.BadParameters);var d=this._hub.getSubscriberData(a);PageBus._cache.isCacheable(d)&&this._cacheSids[a]&&(this._hub.unsubscribe(this._cacheSids[a],null,null),delete this._cacheSids[a],this._cache.remove(a)),this._wrappedUnsubscribe.call(this._hub,a,b,c)},PageBus.HubClientExtender.prototype._disconnectWrapper=function(a,b){this._cache._caches.wildcardClear("**"),this._cacheSids={},this._wrappedDisconnect.call(this._hub,a,b)},PageBus.HubClientExtender.prototype.query=function(a){return this._cache.query(a)},PageBus.HubClientExtender.prototype.store=function(a,b){if(!this._cache.isCaching(a))throw new Error(PageBus.cache.Error.NoCache);this._hub.publish(a,b)},PageBus.HubClientExtender.prototype.clear=function(a){if(!this._cache.isCaching(a))throw new Error(PageBus.cache.Error.NoCache);this._hub.publish(a,null)},PageBus.enableHubClientClass=function(a){a.prototype._pagebusWrappedConnect=a.prototype.connect,a.prototype.connect=function(a,b){var c=this;c.pagebus||(c.pagebus=new PageBus.HubClientExtender(c,c.getParameters())),c._pagebusWrappedConnect.call(c,a,b)}},!OpenAjax.hub,OpenAjax.hub.InlineHubClient&&PageBus.enableHubClientClass(OpenAjax.hub.InlineHubClient),OpenAjax.hub.IframeHubClient&&PageBus.enableHubClientClass(OpenAjax.hub.IframeHubClient),OpenAjax.hub._hub=new OpenAjax.hub.ManagedHub({onSubscribe:function(){return!0},onPublish:function(){return!0},log:function(){return"undefined"==typeof console?null:"undefined"!=typeof console.log?function(a){console.log(a)}:void 0}()}),OpenAjax.hub.subscribe=function(a,b,c,d){return"string"==typeof b&&(c=c||window,b=c[b]||null),OpenAjax.hub._hub.subscribe(a,b,c,null,d)},OpenAjax.hub.unsubscribe=function(a){return OpenAjax.hub._hub.unsubscribe(a)},OpenAjax.hub.publish=function(a,b){OpenAjax.hub._hub.publish(a,b)},PageBus.publish=function(a,b){OpenAjax.hub.publish(a,b)},PageBus.subscribe=function(a,b,c,d){return OpenAjax.hub.subscribe(a,c,b,d)},PageBus.unsubscribe=function(a){OpenAjax.hub.unsubscribe(a)},PageBus.store=function(a,b){OpenAjax.hub._hub.pagebus.store(a,b)},PageBus.query=function(a){return OpenAjax.hub._hub.pagebus.query(a)},OpenAjax.hub.registerLibrary("PageBus","http://pagebus.org/pagebus","2.0",{}),PageBus}),define("app/Deprecated/lib/cd-pagebus",["require","underscore","app/Deprecated/lib/3rdparty/pagebus/full/pagebus"],function(require){function a(){b.isArray(this.subscriptions)||(this.subscriptions=[])}var b=require("underscore"),c=require("app/Deprecated/lib/3rdparty/pagebus/full/pagebus"),d={subscriptions:null,subscribe:function(b,d,e,f,g){a.call(this);var h=c.subscribe(b,d,e,f,g);return this.subscriptions.push(h),h},unsubscribe:function(b){var d;for(a.call(this),d=0;d<this.subscriptions.length;d++)if(this.subscriptions[d]===b){delete this.subscriptions[d];break}return c.unsubscribe(b)},publish:function(a,b){return c.publish(a,b)},query:function(a,b,d,e,f){return c.query(a,b,d,e,f)},destroy:function(){var b;for(a.call(this),b=0;b<this.subscriptions.length;b++)"undefined"!=typeof this.subscriptions[b]&&this.unsubscribe(this.subscriptions[b]);try{"undefined"!=typeof this.view&&this.view.destroy()}catch(c){console.warn(c)}try{if("undefined"!=typeof this.children)for(b=0;b<this.children.length;b++)this.children[b].destroy()}catch(d){console.warn(d)}try{if("undefined"!=typeof this.widgets)for(b=0;b<this.widgets.length;b++)this.widgets[b].destroy()}catch(e){console.warn(e)}}};return d}),define("app/Deprecated/MVC/Ajax/ResponseHandler",["require","app/Deprecated/lib/cd-prototype"],function(require){function a(a,c,d){function e(a){var c="";switch(a){case b.CODES.E_USER_ERROR:c="Error";break;case b.CODES.E_USER_WARNING:c="Warning";break;case b.CODES.E_USER_NOTICE:c="Notice"}return c}function f(a){var b=document.location.href,c="sessionexpired";a.responseJSON&&(c=a.responseJSON.securityMessage);var d="/login?eid="+c+"&rurl="+encodeURIComponent(b);document.location.href=d}var g,h,i=window.cdwm;try{if(c=c||1,"undefined"!=typeof a.responseJSON&&"exception"===a.responseJSON.classname){if("undefined"!=typeof a.responseJSON&&"CD_Controller_Exception_LoginRequired"===a.responseJSON.exception)return f(a),!1;if(a.responseJSON&&"CD_Controller_Exception"===a.responseJSON.exception&&401===a.status&&(h=a.responseJSON.message.split(":"),"Unable to find milestone"===h[0]))return i.alert("This Milestone no longer exists",{title:"Milestone not found",width:480}),window.CD.Project.Router.navigate("",!0),!1;switch(g={title:e(a.responseJSON.code)},"undefined"==typeof a.responseJSON.mode||"devel"!==a.responseJSON.mode&&"devvm"!==a.responseJSON.mode||(g.width=480,g.title=g.title+" [DEVEL MODE]"),a.responseJSON.code){case b.CODES.E_USER_ERROR:i.alert("<h3>"+g.title+"</h3><br/>"+a.responseJSON.message,g);break;case b.CODES.E_USER_NOTICE:g.buttons=[{title:"OK",click:function(){return"function"!=typeof d.onCancel?(window.parent.location.reload(),!1):void d.onCancel()}}],i.alert("<h3>"+g.title+"</h3><br/>"+a.responseJSON.message,g);break;case b.CODES.E_USER_WARNING:i.confirm("<h3>"+g.title+"</h3><br/>"+a.responseJSON.message,function(b){if(b){var c=a.request.options;c.parameters.dialogConfirmed=!0;var e=a.request.url;new Ajax.Request(e,c)}else"function"==typeof d.onCancel&&d.onCancel()},g)}return!1}return"BAD REQUEST"===a?(i.alert("<h3>Invalid Request</h3><br/>This error has been logged."),!1):"FAIL"===a?(i.alert("<h3>Operation Failed</h3>"),!1):a.response&&a.response.exception&&a.response.exception.xdebug_message&&(h=a.response.exception.xdebug_message.trim().split("/"),"Zend_Controller_Action_Exception: Missing model object in "===h[0])?(window.CD.Project.Router.navigate("",!0),!1):a.code&&256===a.code&&a.exception&&"Error"===a.exception&&a.message&&(h=a.message.split(" "),"'CD_Controller_Exception_LoginRequired'"===h[1])?(f(a),!1):a.response&&a.response.code&&512===a.response.code&&a.response.exception&&a.response.message?!1:!0}catch(j){return console.warn(j,j.message),console.trace(),!1}}function b(b,c){var d,e,f,g=window.cdwm,h=b.getHeader("X-Json-Version")||b.request.version||1;if(!(h>=2)){try{if(b.responseJSON||(b.responseJSON=JSON.parse(b.responseText.strip().replace(/^\s*\/\*[^\*]+\*\/\s*/,"").replace(/^\s*var response =\s*/,"").replace(/;$/,""))),!b.responseJSON&&b.responseJSON!==!1)throw new Error("invalid responseJSON")}catch(i){return b.responseJSON=null,b}var j=a(b,h,c);return j&&(f=b.request.options,f.parameters.dialogConfirmed=!0,"undefined"!=typeof f.parameters.format&&"json"===f.parameters.format)?b.responseJSON:b}try{return d=JSON.parse(b.responseText),a(d,h)?d:(g.confirm(d.response.message,function(a){a&&b.request.onConfirm()}),!1)}catch(k){e={classname:"exception",code:256,exception:"Error",message:b.responseText},a(e,h)}}require("app/Deprecated/lib/cd-prototype");return b.CODES={E_USER_ERROR:256,E_USER_WARNING:512,E_USER_NOTICE:1024},b}),define("app/Deprecated/MVC/Ajax/Request",["require","app/Deprecated/lib/cd-prototype","./ResponseHandler"],function(require){var a=(require("app/Deprecated/lib/cd-prototype"),require("./ResponseHandler")),b=function(b,c,d,e){var f,g=window.CD||{Environment:void 0};c=c||{},c.parameters=c.parameters||{},e="undefined"!=typeof c.parameters&&"undefined"!=typeof c.parameters.format&&"jsonenv"===c.parameters.format?!1:e===!1?!1:!0,c.parameters.isAjaxRequest=!0,"undefined"==typeof c.parameters.r&&"undefined"==typeof c.parameters.rand&&(c.parameters.rand=Math.random()),"undefined"==typeof c.parameters.spid&&"undefined"!=typeof g.Environment&&"undefined"!=typeof g.Environment.space&&"undefined"!=typeof g.Environment.space.id&&(c.parameters.spid=g.Environment.space.id),"undefined"!=typeof g.Environment&&"undefined"!=typeof g.Environment.company&&"undefined"!=typeof g.Environment.company.id&&(c.parameters.coid=g.Environment.company.id),e&&"undefined"!=typeof g.Environment&&"undefined"!=typeof g.Environment.model&&(c.parameters.model=Object.toJSON(g.Environment.model)||null);var h={onCancel:c.onCancel};if("function"==typeof c.onSuccess&&(f=c.onSuccess,c.onSuccess=function(b){var c=a(b,h),d=b.request;d.version=d.version||1;try{"jsonenv"===d.parameters.format&&(d.version=2)}catch(e){console.warn("unknown ver")}f(c)}),"function"==typeof c.onFailure){var i=c.onFailure;c.onFailure=function(b){var c=a(b,h);i(c)}}var j=new Ajax.Request(b,c);return j.onConfirm=function(){c.parameters.confirmed=!0;new Ajax.Request(b,c)},j};return b}),define("app/Deprecated/lib/backbone-ported/sync",["require","underscore","app/Deprecated/lib/cd-prototype","app/Deprecated/lib/cd-pagebus","app/Deprecated/lib/3rdparty/backbone-0.5.2","app/Deprecated/MVC/Ajax/Request"],function(require){function a(a){throw new Error(a)}function b(a,b){return a&&a[b]?e.isFunction(a[b])?a[b]():a[b]:null}function c(a,b){var c={};return"object"==typeof a?e.each(a,function(a,d){c[-1===b.indexOf(d)?d:d+"_attr"]=a}):c=a,c}function d(d,k,l){k||a("Backbone.sync: No model passed"),"object"==typeof k.request_options&&(l=e.extend({},k.request_options[d]||k.request_options,l)),l=e.extend({},j,l),l.type=i[d]||"GET";var m=b(l,"url")||b(k,"url")||a('A "url" property or function must be specified'),n={};return k instanceof h.Model&&(n="read"===d||"delete"===d||l.sendmodel?{id:k.id}:k.toJSON()),l.data=e.extend(n,b(l,"data")),"object"==typeof k.request_options&&(l.data=e.extend({},b(k.request_options[d],"data")||k.request_options.data,b(l,"data"))),l.data._method=i[d],l.data.format=l.format,e.each(n,function(a,b){"object"==typeof a&&null!==a&&(l.data[b]=Object.toJSON(a))}),e.isFunction(l.cast_request)&&(l.data=l.cast_request(l.data)),new f(m,{method:l.type,parameters:l.data,onException:function(a,b){throw console.warn(b),b},onSuccess:function(a){var b=a&&a.response||a||{};e.isObject(b)||(b={});var f=b;e.isFunction(l.cast_response)&&(f=l.cast_response(f));var h=function(a){return c(a,l.safenames)};f=e.isArray(f)?e.map(f,h):h(f),l.success(f,200,null),l.reqsuccess(k,f,b),"delete"!==d&&g.publish(k+".loaded",k,null)},onFailure:function(a){l.error.call(window,a.responseJSON)}},!0,!1)}var e=(require("app/Deprecated/lib/cd-prototype"),require("underscore")),f=require("app/Deprecated/MVC/Ajax/Request"),g=require("app/Deprecated/lib/cd-pagebus"),h=require("app/Deprecated/lib/3rdparty/backbone-0.5.2"),i={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},j={contentType:"application/json",accept:"application/json, text/javascript, */*; q=0.01",format:"jsonenv",safenames:["collection","model"],cast_request:null,cast_response:null,data:{},sendmodel:!1,success:Prototype.emptyFunction,error:Prototype.emptyFunction,reqsuccess:Prototype.emptyFunction};return d}),define("app/Deprecated/lib/backbone-ported",["require","mixin","./3rdparty/backbone-0.5.2","./backbone-ported/sync"],function(require){var a=require("mixin"),b=require("./3rdparty/backbone-0.5.2"),c=require("./backbone-ported/sync");return b.sync=c,b.Model.mixin=b.Collection.mixin=b.View.mixin=b.Router.mixin=a,b}),define("app/Deprecated/lib/storage",[],function(){var a=function(b){if(!a.compatible)throw new Error("HTML5 Local Storage not supported on this User-Agent");if(!b)throw new Error("Cannot instantiate an Storage object without a _storeName parameter");var c=b+".";this.get=function(a){var b=window.localStorage[c+a];return b?JSON.parse(b):null},this.set=function(a,b){var d=JSON.stringify(b);try{return window.localStorage[c+a]=d,!0}catch(e){return console.warn(e),!1}},this.unset=function(a){window.localStorage.removeItem(c+a)},this.unsetWhereNot=function(a,b){var d,e=window.localStorage.length;for(d=e-1;d>=0;d--){var f=window.localStorage.key(d);if(0===f.indexOf(c)){var g=JSON.parse(window.localStorage.getItem(f));g[a]!==b&&window.localStorage.removeItem(f)}}},this.reset=function(){var a,b=window.localStorage.length;for(a=b-1;a>=0;a--){var d=window.localStorage.key(a);0===d.indexOf(c)&&window.localStorage.removeItem(d)}}};return a.compatible=window.Modernizr?window.Modernizr.localstorage:"undefined"!=typeof window.localStorage,a.instances={},a.getInstance=function(b){return"undefined"==typeof a.instances[b]&&(a.instances[b]=new this(b)),a.instances[b]},a}),define("app/Deprecated/lib/readonly",[],function(){function a(a,b){var c=b;if("__defineSetter__"in this&&this.__defineSetter__.call)this.__defineSetter__(a,function(){}),this.__defineGetter__(a,function(){return c});else if(Object.defineProperty&&Object.defineProperty.call)try{Object.defineProperty(this,a,{get:function(){return c},set:function(){}})}catch(d){this[a]=b}else this[a]=b}return a}),define("app/Deprecated/MVC/BaseController",["require","underscore","clsextend","app/Deprecated/lib/backbone-ported","app/Deprecated/lib/cd-pagebus"],function(require){var a=require("underscore"),b=require("clsextend"),c=(require("app/Deprecated/lib/backbone-ported"),require("app/Deprecated/lib/cd-pagebus")),d=function(b,c){this.data=a.extend(this.data,b||{}),this.options=a.extend(this.options,c||{}),this.initialize(b)};return a.extend(d.prototype,{options:{},data:{},initialize:function(){}}),a.extend(d.prototype,c),d.extend=b,d}),define("app/Deprecated/MVC/BaseModel",["require","underscore","app/Deprecated/lib/cd-prototype","clsextend","app/Deprecated/lib/backbone-ported","app/Deprecated/lib/cd-pagebus"],function(require){function a(a,b){this.el=new Element("span").update("["+a+" missing meta.views."+b+"]")}var b=require("underscore"),c=(require("app/Deprecated/lib/cd-prototype"),require("clsextend"),require("app/Deprecated/lib/backbone-ported")),d=require("app/Deprecated/lib/cd-pagebus"),e={change:"changed",destroy:"deleted",add:"adopted",remove:"orphaned"};a.prototype.render=Prototype.emptyFunction,a.prototype.remove=Prototype.emptyFunction;var f=c.Model.extend({idAttribute:"pk_id",request_options:null,constructor:function(a,f){this.toString=function(){return this.namespace+"."+(this.id||"new")},c.Model.prototype.constructor.apply(this,arguments),a=a||{},f=f||{},this.request_options=this.request_options||{},f.autoLoad&&this.fetch(),b.each(e,function(a,b){this.bind(b,function(){d.publish(this+"."+a,this,null)})},this);var g=!1;this.loaded=function(a){return b.isUndefined(a)?g:(g=!!a,g&&d.publish(this+".loaded",this,null),this)},this.loaded(f.loaded)},meta:function(){var a={icon:"icon_file",label:"[ untitled ]",views:{},actions:{},edit_actions:[],shortcut_actions:[]};return a},mkview:function(b,c){c=c||{},c.model=this;try{var d=new(this.meta().views[b])(c);return c.skip_render||d.render(),d}catch(e){return console.warn("Failed to render view",this.toString(),b,e),new a(this,b)}},viewed:function(a){var c=this.url("viewed");a=b.extend({},{context:"web"},a),window.CD&&window.CD.Ajax.Request(c,{method:"post",parameters:a,onSuccess:function(){},onFailure:function(){}})},url:function(a){a=(a||"").split("."),a[0]=a[0]||"index",a[1]=a[1]||"jsonenv";var b=window.CD||window.CD.Environment;return[b.zf_uriprefix||"/",b.space?b.space.name:"home",this.urlNamespace,this.id||null,a[0]].compact().join("/")+"."+a[1]}});return f.url=function(a,c){return a=isNaN(a)?null:a,c=b.isString(c)?c:null,["",window.CD.Environment.space.name,this.prototype.urlNamespace,[a,c],""].flatten().compact().join("/")},f}),define("app/Deprecated/MVC/BaseCollection",["require","underscore","clsextend","app/Deprecated/lib/backbone-ported","app/Deprecated/lib/cd-pagebus"],function(require){var a=require("underscore"),b=(require("clsextend"),require("app/Deprecated/lib/backbone-ported")),c=require("app/Deprecated/lib/cd-pagebus"),d={add:"changed",remove:"changed",reset:"changed",destroy:"deleted"},e=b.Collection.extend({url:function(){return["",window.CD.Environment.space.name,this.urlNamespace,""].compact().join("/")},request_options:null,constructor:function(e,f){this.toString=function(){return this.namespace+"."+this.cid},b.Collection.prototype.constructor.apply(this,arguments),e=e||[],f=f||{},this.cid=a.uniqueId("c"),this.request_options=this.request_options||{},f.autoLoad&&this.fetch(),this.bind("all",function(b){a.isUndefined(d[b])||c.publish(this+"."+d[b],this,null)}),e.length>0&&c.publish(this+".loaded",this,null),this.options=f,this.initialize.apply(this,arguments)},clear:function(){this.each(this.remove.bind(this))},_prepareModel:function(){return b.Collection.prototype._prepareModel.apply(this,arguments).loaded(!0)}});return e}),define("app/Deprecated/MVC/BaseView",["require","underscore","clsextend","app/Deprecated/lib/cd-pagebus","app/Deprecated/lib/backbone-ported","dombind"],function(require){var a=require("underscore"),b=(require("clsextend"),require("app/Deprecated/lib/backbone-ported")),c=require("app/Deprecated/lib/cd-pagebus"),d=require("dombind"),e=b.View.extend({watch_model:!1,cls:"",constructor:function(c){var e=this;this.toString=function(){return this.ns()+"."+this.cid},b.View.prototype.constructor.call(this,c),this.options=this.options||{},this.el.addClassName(this.options.cls||this.cls||""),this._watching_model=!1,this.model&&(this.watch_model||this.options.watch_model)&&(this._watching_model||(e=this,this._watching_model=!0,a.isFunction(this._redraw)||(this._redraw=this.render.bind(this)),a.isArray(this.watch_model)?this.watch_model.each(function(a){e.model.bind("change:"+a,e._redraw)}):this.model.bind("change",e._redraw),this.model.bind("destroy",this.remove.bind(this)))),this.options.noctl||d.watch_ctl(this,this.el)}});return e.getInstance=function(){return a.isUndefined(this.__instance)&&(this.__instance=new this),this.__instance},a.extend(e.prototype,c),e
}),define("app/Deprecated/MVC/HBHelper",["require","underscore","handlebars"],function(){var a=require("underscore"),b=require("handlebars"),c={tpls:{},compiledTpls:{},compile:function(c){var d=b.compile(c);return function(b){var c="undefined"!=typeof b&&"undefined"!=typeof b.fk_spaceid?b.fk_spaceid:window.spid,e=window.CD&&window.CD.permissions;return"undefined"!=typeof c&&e&&(b=a.extend({},b,{canAdd:e.canAdd(c),canRead:e.canRead(c),canEdit:e.canEdit(c),canDelete:e.canDelete(c),isAdmin:e.isAdmin(c),canListManage:e.canListManage(c)})),d(b)}},setTemplate:function(a,b){this.tpls[a]=b},getTemplate:function(a){return this.tpls.hasOwnProperty(a)||this.setTemplate(a,""),this.compiledTpls.hasOwnProperty(a)||(this.compiledTpls[a]=this.compile(this.tpls[a])),this.compiledTpls[a]}};return b.registerHelper("json",function(a){return JSON.stringify(a)}),c}),define("app/Deprecated/MVC/Template/View",["require","app/Deprecated/MVC/BaseView","app/Deprecated/MVC/HBHelper"],function(require){var a=require("app/Deprecated/MVC/BaseView"),b=require("app/Deprecated/MVC/HBHelper"),c=a.extend({rendered:!1,get_template:function(){var a,c=this.model?this.model.attributes:{},d={view:this,model:c};return(a=b.getTemplate(this.template))(d)},render:function(){try{this.template&&this.el.insert(this.get_template())}catch(a){console.warn("template",this.id,this.template,this.el,this.get_template()),console.warn("You probably forgot to add your widget's jstemplate to your xhtml template.")}},update:function(){this.el.update(this.get_template())}});return c}),define("app/Deprecated/MVC/Template/Loader",["require","underscore","app/Deprecated/lib/cd-prototype","handlebars"],function(){var _=require("underscore"),P=require("app/Deprecated/lib/cd-prototype"),Handlebars=require("handlebars"),compiled={},url=function(){return(window.CD&&window.CD.Environment.zf_uriprefix)+"/home/jstemplate.json"},compile=function(str){var ret=null;if(_.isFunction(str))ret=str;else if(_.isString(str))try{ret=str.match(/^\s*function\s*\(/)?Handlebars.template(eval("("+str+")")):Handlebars.compile(str)}catch(err){console.warn("Failed to compile template:",_.isString(str)?str.substr(0,25)+" ... ("+(str.length-25)+")":str)}var decorated;return ret},Loader={get:function(a,b){if(b=b||{},b.success=b.success||Prototype.emptyFunction,b.success_context=b.success_context||window,b.error=b.error||Prototype.emptyFunction,b.error_context=b.error_context||window,_.isUndefined(compiled[a])){new Ajax.Request(url(),{method:"post",parameters:{name:a},onSuccess:function(c){compiled[a]=compile(c.responseText.evalJSON().template),b.success.call(b.success_context,compiled[a])},onFailure:function(){compiled[a]=null,b.error.call(b.error_context)}})}else b.success.call(b.success_context,compiled[a])},set:function(a,b){compiled[a]=compile(b)}};return Loader}),define("app/Deprecated/MVC/widget",["require","app/Deprecated/lib/cd-prototype","underscore","clsextend","app/Deprecated/lib/cd-pagebus","app/Deprecated/lib/backbone-ported","app/Deprecated/lib/storage","app/Deprecated/lib/ns/resolve"],function(require){var a=require("underscore"),b=require("clsextend"),c=require("app/Deprecated/lib/cd-pagebus"),d=require("app/Deprecated/lib/storage"),e=require("app/Deprecated/lib/backbone-ported"),f=require("app/Deprecated/lib/ns/resolve"),g=["placeholder","automount"],h=function(b){b=a.extend({},this.options,b||{}),a.each(g,function(c){a.isUndefined(b[c])||(this[c]=b[c])},this),this.options=b,this.cid=a.uniqueId("w"),this.id=b.id||this.cid,this.el=this.mkel(),this._baseCls=["wdg",this.cls,b.cls].compact().join(" "),this.el.className=this._baseCls,this.el.msgclose.observe("click",function(a){this.msg(!1),a.stop()}.bind(this)),this.is_locked=!1,this.is_processing=!0,this.is_msg=!1,this.automount&&this.placeholder&&this.mount(this.placeholder),this.storage=d.compatible?d.getInstance(this.ns()+(this.options.persistent_id?"."+this.options.persistent_id:"")):null,this.initialize(b)};a.extend(h.prototype,e.Events,c,{cls:"",options:{},placeholder:null,automount:!0,storage:null,mkel:function(){var a=new Element("div");return a.update('<div class="wdg wdg-w-proc"><div class="wdg-cnt"></div><div class="wdg-lck"><span>Processing&hellip;</span></div><div class="wdg-msg"><span></span><a href="#close">&times;</a></div></div>'),a=a.firstDescendant(),function(){var b=$(a.clone(!0));return b.content=b.select(".wdg-cnt").first(),b.message=b.select(".wdg-msg span").first(),b.msgclose=b.select(".wdg-msg a").first(),b}}(),initialize:function(){},mount:function(a){return a=$(a||this.placeholder),a&&a.replace(this.el),this},msg:function(a,b){return a===!1?(this.el.removeClassName("wdg-w-msg"),this.is_msg=!1):(this.el.addClassName("wdg-w-msg"),this.el.message.up().className="wdg-msg wdg-msg-"+a,this.el.message.update(b),this.is_msg=!0),this},locked:function(a){return a?(this.el.addClassName("wdg-w-lck"),this.is_locked=!0):(this.el.removeClassName("wdg-w-lck"),this.is_locked=!1),this},processing:function(a){return a?(this.el.addClassName("wdg-w-proc"),this.is_processing=!0):(this.el.removeClassName("wdg-w-proc"),this.is_processing=!1),this.trigger("processing",this.is_processing),this},html:function(b){return a.isUndefined(b)?this.el.content.innerHTML:(this.el.content.update(b),this)},state:function(b){if(!this.storage)return console.warn("Browser does not allow to persist widget state"),{};try{if(a.isUndefined(b))return this.storage.get("state")||{};null===b?this.storage.unset("state"):this.storage.set("state",a.extend(this.storage.get("state")||{},b))}catch(c){console.warn(this+" failed to persist state",c)}},toString:function(){try{return this.ns()+"."+this.id}catch(a){return"[object Widget]"}}}),h.extend=b,h.init=function(b,c){try{var d=$$('[data-init-widget="'+b+'"]').first(),e=f(b);if(e)return c=a.extend({placeholder:d,automount:!0},c||{}),new e(c);console.warn("No widget "+b)}catch(g){throw console.warn(b+" failed to initialize. ",g),g}},h.initall=function(b){b=a.extend({widgets:{}},b||{});var c=[];return $$("[data-init-widget], .x-widget").each(function(d){var e=d.data("init-widget"),g=b.widgets[e]||f(e);if(g){var h=a.extend({},b[e]||{},{placeholder:d,automount:!0});try{c.push(new g(h))}catch(i){throw i}}else console.warn("No widget "+e)}),c};var i=1;return h.getNextId=function(){return i++},h}),define("app/Deprecated/MVC/Store",["require","jquery","underscore","clsextend","app/Deprecated/lib/cd-pagebus"],function(require){var a=require("jquery"),b=require("underscore"),c=require("clsextend"),d=require("app/Deprecated/lib/cd-pagebus"),e=function(a){if(this.dataSet={},this.index=[],!this.model)throw new Error('Object "'+this.namespace+'" extending Store MUST declare a model!');d.subscribe(this.model.prototype.namespace+".*.loaded",this,this.onLoad,null),this.initialize(a)};return b.extend(e.prototype,{dataSet:null,index:null,model:null,initialize:function(){},onLoad:function(a,b){var c=b.get("pk_id");this.dataSet[c]=b},getRecord:function(c,d){var e,f=new a.Deferred,g=!0;if(d=d||{},void 0!==this.dataSet[c])for(e in d.required_attributes)if(d.required_attributes.hasOwnProperty(e)&&void 0===this.dataSet[c][e]){g=!1;break}if(d.success=function(a){return function(){var b=[].slice.call(arguments,0);a.apply(this,b),f.resolve.apply(f,b)}}(d.success||a.noop),d.error=function(a){return function(){var b=[].slice.call(arguments,0);a.apply(this,b),f.reject.apply(f,b)}}(d.error||a.noop),"undefined"!=typeof this.dataSet[c]&&g)d.success.call(window,this.dataSet[c]);else{var h,i=d.success,j={},k=this;d.success=function(a){b.isUndefined(k.dataSet[c])&&(k.dataSet[c]=a),i(k.dataSet[c])},j[this.model.prototype.idAttribute]=c,h=new this.model(j),h.fetch(d)}return f.promise()}}),e.getInstance=function(){return b.isUndefined(this.__instance)&&(this.__instance=new this),this.__instance},e.extend=c,e}),define("events",["require","underscore"],function(a){var b=a("underscore"),c=/\s+/,d=function(a,b,d,e){if(!d)return!0;if("object"==typeof d)for(var f in d)a[b].apply(a,[f,d[f]].concat(e));else{if(!c.test(d))return!0;for(var g=d.split(c),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(e))}},e=function(a,b,c){var d,e=-1,f=b.length;switch(c.length){case 0:for(;++e<f;)(d=b[e]).callback.call(d.ctx);return;case 1:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0]);return;case 2:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0],c[1]);return;case 3:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0],c[1],c[2]);return;default:for(;++e<f;)(d=b[e]).callback.apply(d.ctx,c)}},f={on:function(a,b,c){if(!d(this,"on",a,[b,c])||!b)return this;this._events=this._events||{};var e=this._events[a]||(this._events[a]=[]);return e.push({callback:b,context:c,ctx:c||this}),this},once:function(a,c,e){if(!d(this,"once",a,[c,e])||!c)return this;var f=this,g=b.once(function(){f.off(a,g),c.apply(this,arguments)});return g._callback=c,this.on(a,g,e),this},off:function(a,c,e){var f,g,h,i,j,k,l,m;if(!this._events||!d(this,"off",a,[c,e]))return this;if(!a&&!c&&!e)return this._events={},this;for(i=a?[a]:b.keys(this._events),j=0,k=i.length;k>j;j++)if(a=i[j],f=this._events[a]){if(h=[],c||e)for(l=0,m=f.length;m>l;l++)g=f[l],(c&&c!==(g.callback._callback||g.callback)||e&&e!==g.context)&&h.push(g);this._events[a]=h}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!d(this,"trigger",a,b))return this;var c=this._events[a],f=this._events.all;return c&&e(this,c,b),f&&e(this,f,arguments),this},listenTo:function(a,c,d){var e=this._listeners||(this._listeners={}),f=a._listenerId||(a._listenerId=b.uniqueId("l"));return e[f]=a,a.on(c,d||this,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,c,this),b||c||delete d[a._listenerId];else{for(var e in d)d[e].off(null,null,this);this._listeners={}}return this}}};return f.bind=f.on,f.unbind=f.off,f}),define("app/Deprecated/UI/Helpers/Viewport",["require","underscore","app/Deprecated/lib/cd-prototype","events"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("events")),c=function(b){if(this.options=a.extend({},this.options||{},{content:null,container:null,dimensions:c.boxSize,observe_resize:!0},b),!a.isElement(this.options.content))throw new Error("Passed content is not a DOM Element");if(!a.isFunction(this.options.dimensions))throw new Error("Passed dimensions is not a Function");if(this.viewport={},this.content={el:$(this.options.content)},this.container={el:$(this.options.container)},this._measure(),this.options.observe_resize){var d=this,e=setInterval(function(){var a=c.boxSize(d.container.el);d.container.prev_width!==a.width&&d.trigger("action:resize:horizontal"),d.container.prev_height!==a.height&&d.trigger("action:resize:vertical"),d.container.prev_width=a.width,d.container.prev_height=a.height},100);this._destroy_observer=function(){clearInterval(e)}}else this._destroy_observer=Prototype.emptyFunction};return c.boxSize=function(b){if(a.isNull(b)||a.isUndefined(b)||!b.getLayout)return document.viewport.getDimensions();var c=b.getLayout();return{width:c.get("border-box-width"),height:c.get("border-box-height")}},c.viewportOffset=function(b){return a.isNull(b)||a.isUndefined(b)||!b.viewportOffset?{0:0,1:0,left:0,top:0}:b.viewportOffset()},a.extend(c.prototype,b,{_measure:function(){a.extend(this.content,this.options.dimensions(this.content.el)),a.extend(this.container,c.boxSize(this.container.el)),a.extend(this.viewport,{top:0,width:document.viewport.getDimensions().width,height:document.viewport.getDimensions().height,left:0}),a.extend(this.content,c.viewportOffset(this.content.el)),a.extend(this.container,c.viewportOffset(this.container.el))},get_position:function(){this._measure();var a=Math.max(this.container.top,this.viewport.top),b=Math.min(this.container.left+this.container.width,this.viewport.left+this.viewport.width),c=Math.min(this.container.top+this.container.height,this.viewport.height),d=Math.min(this.container.left,this.viewport.left);return{top:this.content.top-a,right:b-this.content.left-this.content.width,bottom:c-this.content.top-this.content.height,left:this.content.left-d}},destroy:function(){this._destroy_observer()}}),c}),define("app/Deprecated/UI/Helpers/Dropdown",["require","app/Deprecated/lib/cd-prototype"],function(require){function a(a,b,c){b=b||function(a){return a};var d=new Element("ul",c||{});return d.addClassName("dd-list"),d.hide(),a.each(function(a){a=b(a);var c=new Element("li"),e=new Element("a",{"class":"dd-link dd-choice",href:a.href||"#"}),f=new Element("span");"function"==typeof a.onclick?e.observe("click",function(b){b.preventDefault(),a.onclick()}):"string"==typeof a.onclick&&e.setAttribute("onclick",a.onclick+"; return false"),f.wrap(e),f.update(a.label),isNaN(a.count)||f.insert({bottom:"("+a.count+")"}),a.icon&&f.insert({top:'<ins class="icon '+a.icon+'"></ins>'}),c.update(e),d.insert(c)}),d}require("app/Deprecated/lib/cd-prototype");return{mklist:a}}),define("uicore/Helpers/Promise",["require","underscore","clsextend","events"],function(a){var b=a("underscore"),c=a("clsextend"),d=a("events"),e=function(a){this.options=a||{},this.initialize()};return b.extend(e.prototype,d,{initialize:function(){}}),e.extend=c,e}),define("app/Deprecated/UI/Helpers/Promise/Action",["require","dombind","uicore/Helpers/Promise"],function(require){var a=require("dombind"),b=require("uicore/Helpers/Promise"),c=b.extend({initialize:function(){this.el=this.options.el,this._handler=a.dombind(this,this.el)},off:function(){this._handler.stop()}});return c}),define("app/Deprecated/UI/Helpers/Icons",["require","app/Deprecated/lib/cd-prototype"],function(require){var a=(require("app/Deprecated/lib/cd-prototype"),"icon_file");return{icon:function(a,b){return new Element(b||"ins",{"class":"icon "+a})},prepend_icon:function(a,b){return $(b).insert({top:this.icon(a)}).addClassName("preiconed")},apend_icon:function(a,b){return $(b).insert({bottom:this.icon(a)}).addClassName("posticoned")},action:function(b){b=b||{};var c;return b.titled?(c=new Element("a").update(b.label),this.prepend_icon(b.icon||a,c)):c=this.icon(b.icon||a),c.title=b.label||"",b.url&&(c.href=b.url),b.title&&(c.title=b.title||""),b.onclick&&c.on("click",function(a){a.stop(),b.onclick()}),c}}}),define("uicore/Helpers/Stylesheet",["require","underscore"],function(a){function b(a){document.getElementsByTagName("head")[0].appendChild(a)}return a("underscore"),{inject:function(a,b){return this.mkstylesheet({media:b,css:a})},load:function(a){if(!document.querySelector('link[href="'+a+'"]')){var c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b(c)}},mkstylesheet:function(a){a=a||{},a.media=a.media||"screen",a.css=a.css||null;var c=document.createElement("style");return c.type="text/css",c.media=a.media,a.css&&(c.styleSheet?c.styleSheet.cssText=a.css:c.appendChild(document.createTextNode(a.css))),b(c),document.styleSheets[document.styleSheets.length-1]},mkrule:function(a,b,c){c=c||this.mkstylesheet();var d;return c.insertRule?(c.insertRule(a+"{"+b+"}",c.cssRules.length),d=c.cssRules[c.cssRules.length-1]):(c.addRule(a,b,-1),d=c.rules[c.rules.length-1]),d}}}),define("app/Deprecated/UI/Forms/AbstractField",["require","app/Deprecated/lib/cd-prototype","underscore","clsextend","events"],function(require){function a(a,c){if(!a)throw new Error("No input element defined");if(this.input=$(a),this.require_element&&!a.match(this.require_element))throw new Error('Input element MUST be "'+this.require_element+'"');this.input.id||this.input.writeAttribute("id",b.uniqueId("inp")),c=b.extend({},this.options,c||{}),this.make(c),this.el.id||this.el.writeAttribute("id","wdg_"+this.input.id),this.el.addClassName("edt-input "+this.cls),this.initialize(c),this.options=c,this.input.observe("change",function(){this.trigger("change",this.value())}.bind(this))}var b=require("underscore"),c=require("clsextend"),d=require("events");return b.extend(a.prototype,d,{cls:"",require_element:null,uioptions:{},make:function(){return this.el=this.input.wrap("div"),this},_setvalue:function(){console.warn("Method _setvalue() must be implemented in child class")},_getvalue:function(){console.warn("Method _getvalue() must be implemented in child class")},value:function(a){try{if(0===arguments.length)return this._getvalue();this._setvalue(a),this.trigger("change",a)}catch(b){console.warn("Can not set/get value on "+this,b)}},enable:function(a){this.input.disabled=!a},visible:function(a){return b.isUndefined(a)?this.el.visible():void(a?this.el.show():this.el.hide())},clear:function(){console.warn("Method clear() must be implemented in child class")},focus:function(){console.warn("Method focus() must be implemented in child class")},name:function(){return this.input.name},initialize:function(){},toString:function(){return this.ns()+"("+(this.input?this.input.id:"undefined input element")+")"}}),a.extend=c,a}),define("app/Deprecated/UI/Forms/CheckboxField",["require","./AbstractField"],function(require){var a=require("./AbstractField"),b=a.extend({cls:"edt-input-checkbox",uioptions:{},_setvalue:function(a){this.input.checked=!!a},_getvalue:function(){return this.input.checked},clear:function(){this.input.checked=!1},focus:function(){},make:function(){var a=new Element("div");a.update("<span></span>");var b=a.select("span").first();return this.input.insert({after:a}),b.insert(this.input),this.el=a,this}});return b}),define("app/Deprecated/UI/Forms/DateField",["require","uicore/Helpers/Dates","./AbstractField"],function(require){var a=require("uicore/Helpers/Dates"),b=require("./AbstractField"),c={none:"None",clear:"",yesterday:"-1 day",today:a.date(new Date),tomorrow:"+1 day","next month":"+1 month"},d=b.extend({cls:"edt-input-date",uioptions:{format:function(a){return a||"%d/%m/%y"},choices:function(a){if(a=(a||"").toLowerCase(),""===a)return $H(c).keys();if("no"===a||"false"===a||"0"===a)return[];var b=[];return a.split(",").each(function(a){c.hasOwnProperty(a)&&b.push(a)}),b}},_setvalue:function(a){this.input.value=null===a||void 0===a?"":a,this.trigger("datechange",a)},_getvalue:function(){return this.input.value},clear:function(){this._setvalue(),this.trigger("datechange",this.input.value)},showCalendar:function(){this.input._trigger_elm&&this.input._trigger_elm.showCalendar()},make:function(a){var b=this,d=new Element("div");return d.update('<span></span><img src="/components/cdfront-uicore/src/i/icons/png/calendar.png"  />'),$(a.choices).each(function(a){var e=new Element("a",{"class":"jslink"});e.update(a),e.observe("click",function(d){b._setvalue(c[a]),b.trigger("datechange",b.input.value),d.stop()}),d.insert({bottom:e})}),this.input.insert({after:d}),this.input.on("focus",function(){this.blur(),b.showCalendar()}),d.select("span").first().update(this.input),window.addCal?(addCal(this.input,{button:d.select("img").first(),onUpdate:function(a){this.trigger("datechange",this.input.value,a)}.bind(this),ifFormat:"%b %e, %Y",electric:!1}),this.input._trigger_elm=d.select("img").first()):console.warn("Missing addCal function"),this.el=d,this}});return d}),define("app/Deprecated/UI/Forms/PickerField",["require","underscore","app/Deprecated/lib/cd-prototype","./AbstractField"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("./AbstractField")),c=b.extend({cls:"edt-input-picker",uioptions:{picker:function(a){return resolve(a)}},_setvalue:function(b){if(!a.isArray(b))throw new Error("Only Array values accepted");a.each(b,this.picker.select,this.picker)},_getvalue:function(){return this.picker.get_selected()},make:function(b){if(!a.isFunction(b.deploy))throw new Error("options.deploy should be the function returning configured Picker instance");return this.el=new Element("div"),this.input.wrap(this.el),this.picker=b.deploy(this.input),this},select:function(a){this.picker.select(a)},unselect:function(a){this.picker.unselect(a)},clear:function(){this.picker.clear()}});return c}),define("app/Deprecated/UI/Forms/RecurrenceField",["require","underscore","app/Deprecated/lib/cd-prototype","./AbstractField"],function(require){function a(a,b){a._inputs=a._inputs||$(a).select("input,select,textarea"),a._inputs.each(function(a){a.disabled=!b})}function b(a,b,d){c.isUndefined(d)&&(d=""),a._inputs=a._inputs||$(a).select("input,select,textarea"),a._inputs.each(function(a){var c=a.name.slice(d.length);"radio"===a.type&&a._group_num>0||a.setValue(b[c])})}var c=require("underscore"),d=(require("app/Deprecated/lib/cd-prototype"),require("./AbstractField")),e={recur_type:0,recur_when:0,recur_weekday:"",recur_range:0,recur_range_end_date:"",recur_frequency:1},f={1:' <div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>',6:' <div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>',2:' <div><h3>Repeats</h3><label>Every <input type="text" name="recur_frequency" class="validate-number-more-than-zero" maxlength="3" size="2" value="1"/> week(s)</label></div><div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>',3:' <div><h3>Repeats</h3> <select name="recur_when"><option value="0">First</option><option value="1">Second</option><option value="2">Third</option><option value="3">Fourth</option></select> <select name="recur_weekday"><option value="Monday">Monday</option><option value="Tuesday">Tuesday</option><option value="Wednesday">Wednesday</option><option value="Thursday">Thursday</option><option value="Friday">Friday</option><option value="Saturday">Saturday</option><option value="Sunday">Sunday</option></select> of every <select name="recur_frequency"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option></select> month(s)</div><div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>',4:' <div><h3>Repeats</h3> every <select name="recur_frequency"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option></select> month(s)</div><div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>',5:' <div><h3>End repeat</h3><label><input type="radio" name="recur_range_end_date" checked="true" value="" /> Never</label><label><input type="radio" name="recur_range_end_date" class="edt-input-rcr-until" value="" /> <span>Until&hellip;</span></label></div>'},g=d.extend({cls:"edt-input-rcr",require_element:"select",uioptions:{uom:function(a){return(a||"").toLowerCase()},uomloc:function(a){return a=(a||"").toLowerCase(),"left"===a?a:"right"}},_setvalue:function(a){c.isUndefined(a)||c.isUndefined(a.recur_type)||(this.input.setValue(a.recur_type),this._showConf(a.recur_type,a))},_getvalue:function(){var a=c.extend({},e),b=this.input.id+"_"+this.input.value+"_",d=b.length;return this.el.select("input, select, textarea").each(function(c){if(c!==this.input&&!c.disabled&&0===c.name.indexOf(b)){var e=c.name.slice(d);a[e]=c.getValue()}}.bind(this)),a.recur_type=this.input.value,a},clear:function(){this._setvalue({recur_type:0})},focus:function(){this.input.focus()},make:function(){var d=this;this.el=new Element("div"),this.choices=[];var e,g=new Element("ul"),h={};return g.hide(),this.input.insert({after:this.el}),this.el.insert(this.input),this.el.insert(g),$A(this.input.options).each(function(a){if(f[a.value]){var b=a.value,c=f[b]||"",i=d.input.id+"_"+a.value+"_",j=new Element("li");j.data("type",b),j.update(c),j._inputs=j.select("input,select,textarea"),j._inputs.each(function(b){b.name=i+b.name,b.disabled=!a.selected}),a.selected?(e=j,g.show(),j.show()):j.hide(),h[b]=j,g.insert(j)}}),g.select(".edt-input-rcr-until").each(function(a){function b(b){var c=!1;b?i.each(function(a){a.value===b&&(a.checked=!0,c=!0,f.update(h))}):(i[0].checked=!0,c=!0,f.update(h)),c||(a.checked=!0,a.value=b,f.update(b))}function d(){var a="";return i.each(function(b){b.checked&&(a=b.value)}),a}var e=a.up("label"),f=e.select("span").first(),h=f.innerHTML,i=g.select("[name="+a.name+"]");i.each(function(a,c){a.getValue=d,a.setValue=b,a.on("change",function(){b(this.value)}),a._group_num=c}),c.isFunction(window.addCal)?addCal(a,{button:e,onUpdate:function(){f.update(a.value),a.checked=!0}}):console.warn("Missing addCal() function")}),this._showConf=function(c,d){e&&e.hide(),e=null,h[c]&&(a(g,!1),a(h[c],!0),"object"==typeof d&&b(h[c],d,this.input.id+"_"+c+"_"),2===c?h[c].select("input[type='text']").first().addClassName("required"):h[2].select("input[type='text']").first().removeClassName("required"),g.show(),h[c].show(),e=h[c]),e||g.hide()},this.input.on("change",function(){d._showConf(this.value)}),this}});return g}),define("app/Deprecated/UI/Forms/RTEField",["require","underscore","app/Deprecated/lib/cd-prototype","./AbstractField"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("./AbstractField")),c=b.extend({cls:"edt-input-rte mce-rtewrapper mce-hasstatusbar",uioptions:{conftype:function(a){return a}},_setvalue:function(a){this.input.value=a;try{this.tinyMCE.setContent(a)}catch(b){}},_getvalue:function(){try{return this.tinyMCE.getContent()}catch(a){return this.input.value}},clear:function(){this.input.value="";try{this.tinyMCE.setContent("")}catch(a){}},make:function(){var b=this,c=new Element("div");return this.input.insert({after:c}),c.insert(this.input),a.isUndefined(window.tinyMCE)?console.warn("Missing TinyMCE"):(this.input.setStyle({width:"100%"}),tinyMCE.execCommand("mceAddControl",!1,this.input.id+":rte_task"),this.tinyMCE=tinyMCE.get(this.input.id),void 0===this.tinyMCE&&setTimeout(function(){tinyMCE.execCommand("mceAddControl",!1,b.input.id+":rte_task"),b.tinyMCE=tinyMCE.get(b.input.id),void 0===b.tinyMCE&&alert("There was a problem loading the page, and it may be unpredictable until you refresh the page")},100)),this.el=c,this}});return c}),define("app/Deprecated/UI/Forms/SelectField",["require","underscore","app/Deprecated/lib/cd-prototype","./AbstractField"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("./AbstractField")),c=b.extend({cls:"edt-input-select",require_element:"select",uioptions:{source:null,default_options:[]},_setvalue:function(a){a=String(a);var b=0;$A(this.input.options).each(function(c,d){c.value===a&&(b=d)}.bind(this)),this.input.selectedIndex=b},_getvalue:function(){return this.input.value},add_option:function(a){var b=new Element("option",{value:a.id,disabled:!!a.disabled});b.update(a.label),this.input.insert(b)},remove_option:function(b){for(var c,d=a.toArray(this.input.options);d.length;)c=d.shift(),b.id.toString()===c.value&&c.remove()},clear_options:function(){for(var b,c=a.toArray(this.input.options);c.length;)b=c.shift(),b.remove()},clear:function(){this.input.selectedIndex=0},make:function(b){if(this.el=new Element("div"),this.el.update(),b.width&&this.el.setStyle({width:b.width+"px"}),a.isArray(b.default_options)&&b.default_options.each(this.add_option,this),b.source){var c=function(a){a.each(function(a){this.input.insert(new Element("option",{value:a.id}).update(a.label))},this)};b.source.getall(c),b.source.bind("reset",c)}return this.input.wrap(this.el),this}});return c}),define("app/Deprecated/UI/Forms/TextField",["require","underscore","app/Deprecated/lib/cd-prototype","./AbstractField"],function(require){var a=(require("underscore"),require("app/Deprecated/lib/cd-prototype"),require("./AbstractField")),b=a.extend({cls:"edt-input-text",uioptions:{uom:function(a){return(a||"").toLowerCase()},uomloc:function(a){return a=(a||"").toLowerCase(),"left"===a?a:"right"}},_setvalue:function(a){this.input.value=a},_getvalue:function(){return this.input.value},clear:function(){this.input.value=""},focus:function(){this.input.focus()},make:function(a){var b=new Element("div");a.width&&b.setStyle({width:a.width+"px"}),b.data("placeholder",this.input.placeholder||a.placeholder||" "),b.update("<span></span>");var c=b.select("span").first();if(this.input.insert({after:b}),c.insert(this.input),a.uom){var d={};d["left"===a.uomloc?"top":"bottom"]='<ins style="font-family: courier">'+a.uom+"</ins>",c.insert(d);var e=7*a.uom.length;"left"===a.uomloc?(this.cls+=" edt-input-luom",c.setStyle({marginLeft:e+"px"})):(this.cls+=" edt-input-ruom",c.setStyle({paddingRight:e+"px"}))}return this.el=b,this}});return b}),define("uicore/lib/requirejs/hbs/i18nprecompile",["handlebars","underscore"],function(a,b){function c(d,e,f){return f=f||{},e=e||{},d&&"program"===d.type&&d.statements&&(b(d.statements).forEach(function(b,g){var h="<!-- i18n error -->";if("mustache"===b.type&&b.id&&"$"===b.id.original){if(b.params.length&&b.params[0].string){var i=b.params[0].string;h=e[i]||(f.originalKeyFallback?i:h)}d.statements[g]=new a.AST.ContentNode(h)}else b.program&&(b.program=c(b.program,e,f))}),d.inverse&&c(d.inverse,e,f)),d}return function(b,d,e){e=e||{};var f,g;return f=a.parse(b),d!==!1&&(f=c(f,d,e)),g=(new a.Compiler).compile(f,e),(new a.JavaScriptCompiler).compile(g,e)}}),define("hbs",["handlebars","underscore","uicore/lib/requirejs/hbs/i18nprecompile"],function(a,b,c){var d,e,f=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],g=function(){throw new Error("Environment unsupported.")},h=[],i="w+",j="hbs",k="@hbs",l="/styles/",m="/demo-build/styles/",n="template/helpers/",o="template/i18n/",p="screen.build.css";a.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(e=function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(b=0;3>b;b++){c=f[b];try{a=new ActiveXObject(c)}catch(d){}if(a){f=[c];break}}if(!a)throw new Error("getXhr(): XMLHttpRequest not available");return a},g=function(a,b){var c=e();c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)},c.send(null)}):"undefined"!=typeof process&&process.versions&&process.versions.node?(d=require.nodeRequire("fs"),g=function(a,b){var c=d.readFileSync(a,"utf8")||"";c=c.replace(/^\uFEFF/,""),b(c)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(g=function(a,b){for(var c,d=new java.io.File(a),e=new java.io.FileReader(d),f=new java.io.BufferedReader(e),g="";null!==(c=f.readLine());)g+=new String(c)+"\n";f.close(),b(g)});var q={},r=function(a,b){q[a]?b(q[a]):g(a,function(c){q[a]=c,b.call(this,c)})},s=[],t={};return{get:function(){return a},write:function(a,b,c){if(b+k in h){var d=h[b+k];c.asModule(a+"!"+b,d)}},version:"0.4.0",load:function(e,f,q,u){function v(a,c){return b(a).forEach(function(a){a&&a.type&&"partial"===a.type&&c.push(a.partialName.name),a&&a.program&&a.program.statements&&v(a.program.statements,c),a&&a.program&&a.program.inverse&&a.program.inverse.statements&&v(a.program.inverse.statements,c)}),c}function w(a){var c=[];return a&&a.statements&&(c=v(a.statements,[])),b(c).unique()}function x(a){var b,c,d;if(a&&a.statements&&(b=a.statements[0],b&&"comment"===b.type))try{return c=b.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),d=JSON.parse(c),c
}catch(e){return"{}"}return"{}"}function y(a){if(!a)return[];var b,c=[a[0]],d=a[0];for(b=1;b<a.length;++b)a.hasOwnProperty(b)&&(d+="."+a[b],c.push(d));return c}function z(c,d,e,f){e=e?e+".":"";var g="";return b(c).forEach(function(c){var h,i,j;if(c&&c.type&&"mustache"===c.type){if(!c.params||!c.params.length){h=y(c.id.parts);for(i in h)h[i]&&(g=h[i]||g,d.push(e+h[i]));d.push(e+c.id.string)}var k=["this",".","..","./..","../..","../../.."];c.params&&"undefined"==typeof a.helpers[c.id.string]&&b(c.params).forEach(function(i){(b(k).contains(i.original)||i instanceof a.AST.StringNode||i instanceof a.AST.IntegerNode||i instanceof a.AST.BooleanNode)&&f.push(c.id.string),h=y(i.parts);for(var j in h)h[j]&&(g=h[j]||g,f.push(c.id.string),d.push(e+h[j]))})}c&&c.mustache&&z([c.mustache],d,e+g,f),c&&c.program&&c.program.statements&&(j=z([c.mustache],[],"",f)[0]||"",c.program.inverse&&c.program.inverse.statements&&z(c.program.inverse.statements,d,e+g+(j?e+g?"."+j:j:""),f),z(c.program.statements,d,e+g+(j?e+g?"."+j:j:""),f))}),d}function A(a){var c=[],d=[];a&&a.statements&&(c=z(a.statements,[],void 0,d));var e=["helperMissing","blockHelperMissing","each","if","unless","with"];return{vars:b(c).chain().unique().map(function(a){return""===a?".":a.length&&"."===a[a.length-1]?a.substr(0,a.length-1)+"[]":a}).value(),helpers:b(d).chain().unique().map(function(a){return b(e).contains(a)?void 0:a}).compact().value()}}function B(j){g(C,function(g){var k,o,r,v=a.parse(g),y=w(v),z=x(v),B=A(v),F=B.vars,G=B.helpers||[],H=y.join("', 'hbs!").replace(/_/g,"/"),I=u.hbs&&u.hbs.disableHelpers?"":function(){var a,b=[],c=u.hbs&&u.hbs.helperPathCallback?u.hbs.helperPathCallback:function(a){return(u.hbs&&u.hbs.helperDirectory?u.hbs.helperDirectory:n)+a};for(a=0;a<G.length;a++)b[a]="'"+c(G[a],C)+"'";return b}().join(","),J="",K="",L="";if(H&&(H=",'hbs!"+H+"'"),I&&(I=","+I),"{}"!==z)try{k=JSON.parse(z),k&&k.styles&&(s=b.union(s,k.styles),require.isBrowser&&!u.isBuild?(o=document.head||document.getElementsByTagName("head")[0],b(k.styles).forEach(function(a){t[a]||(r=document.createElement("link"),r.href=u.baseUrl+l+a+".css",r.media="all",r.rel="stylesheet",r.type="text/css",o.appendChild(r),t[a]=r)})):u.isBuild&&function(){var a=require.nodeRequire("fs"),c=b(k.styles).map(function(a){return t[a]?"":(t[a]=!0,"@import url("+a+".css);\n")}).join("\n");a.open(__dirname+m+p,i,"0666",function(b,d){a.writeSync(d,c,null,encoding="utf8"),a.close(d)}),i="a"}())}catch(M){console.log("error injecting styles")}u.isBuild||u.serverRender||(J="<!-- START - "+e+" -->",K="<!-- END - "+e+" -->",L="t.meta = "+z+";\nt.helpers = "+JSON.stringify(G)+";\nt.deps = "+JSON.stringify(y)+";\nt.vars = "+JSON.stringify(F)+";\n");var N=E?!1:b.extend(j,u.localeMapping),O=u.hbs||{},P=b.extend(O.compileOptions||{},{originalKeyFallback:O.originalKeyFallback}),Q=c(g,N,P);g="/* START_TEMPLATE */\ndefine(['hbs','handlebars'"+H+I+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Q+");\nHandlebars.registerPartial('"+e.replace(/\//g,"_")+"', t);\n"+L+"return t;\n});\n/* END_TEMPLATE */\n",u.isBuild&&(h[D]=g),u.isBuild||(g+="\r\n//@ sourceURL="+C);for(var R in y)y.hasOwnProperty(R)&&(y[R]="hbs!"+y[R].replace(/_/g,"/"));u.isBuild?(q.fromText(e,g),f([e],function(a){q(a)})):require(y,function(){q.fromText(g),f([e],function(a){q(a)})}),u.removeCombined&&d.unlinkSync(C)})}var C,D=e+k,E=u.hbs&&u.hbs.disableI18n,F=u.hbs&&u.hbs.templateExtension===!1;if(C=f.toUrl(F?e:e+"."+(u.hbs&&u.hbs.templateExtension?u.hbs.templateExtension:j)),E)B(!1);else{var G=(u.hbs&&u.hbs.i18nDirectory?u.hbs.i18nDirectory:o)+(u.locale||"en_us")+".json";try{r(f.toUrl(G),function(a){B(JSON.parse(a))})}catch(H){if(u.hbs)throw H;console.warn("hbs: Error reading "+G+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),u.hbs={disableI18n:!0},B(!1)}}}}}),define("hbs!app/Deprecated/UI/Grid/Template/table",["hbs","handlebars"],function(a,b){var c=b.template(function(a,b,c,d,e){function f(){return"grd-st-nolstatic"}function g(){return"grd-st-norstatic"}function h(a,b){var d,e,f,g="";return g+='\n    <li class="grd-row grd-hdr">\n        <ul class="grd-cells">\n            ',f={hash:{},inverse:C.noop,fn:C.programWithDepth(6,i,b,a)},(e=c.spaceless)?d=e.call(a,f):(e=a&&a.spaceless,d=typeof e===A?e.call(a,f):e),c.spaceless||(d=E.call(a,d,{hash:{},inverse:C.noop,fn:C.programWithDepth(6,i,b,a)})),(d||0===d)&&(g+=d),g+="\n        </ul>\n        ",d=c["if"].call(a,a&&a.hasleft,{hash:{},inverse:C.noop,fn:C.program(14,n,b)}),(d||0===d)&&(g+=d),g+="\n        ",d=c["if"].call(a,a&&a.hasright,{hash:{},inverse:C.noop,fn:C.program(16,o,b)}),(d||0===d)&&(g+=d),g+="\n    </li>\n    "}function i(a,b,d){var e,f,g,h="";return h+="\n            ",f=c.iter||d&&d.iter,g={hash:{},inverse:C.noop,fn:C.program(7,j,b)},e=f?f.call(a,d&&d.columns,g):D.call(a,"iter",d&&d.columns,g),(e||0===e)&&(h+=e),h+="\n            "}function j(a,b){var d,e,f="";return f+='\n            <li class="grd-cell grd-cell-'+B((d=a&&a.loop,d=null==d||d===!1?d:d.index,typeof d===A?d.apply(a):d))+" grd-cell-",(e=c.name)?d=e.call(a,{hash:{}}):(e=a&&a.name,d=typeof e===A?e.call(a,{hash:{}}):e),f+=B(d)+'"',d=c["if"].call(a,a&&a.style,{hash:{},inverse:C.noop,fn:C.program(8,k,b)}),(d||0===d)&&(f+=d),f+=">\n                ",d=c["if"].call(a,a&&a.sortable,{hash:{},inverse:C.program(12,m,b),fn:C.program(10,l,b)}),(d||0===d)&&(f+=d),f+="\n            </li>\n            "}function k(a){var b,d,e="";return e+=' style="',(d=c.style)?b=d.call(a,{hash:{}}):(d=a&&a.style,b=typeof d===A?d.call(a,{hash:{}}):d),e+=B(b)+'"'}function l(a){var b,d,e="";return e+='\n                <a href="#sort" data-action="sort:',(d=c.name)?b=d.call(a,{hash:{}}):(d=a&&a.name,b=typeof d===A?d.call(a,{hash:{}}):d),e+=B(b)+'">',(d=c.title)?b=d.call(a,{hash:{}}):(d=a&&a.title,b=typeof d===A?d.call(a,{hash:{}}):d),e+=B(b)+'</a>\n                <ins class="grd-sort-asc icon icon_bullet_arrow_down"></ins>\n                <ins class="grd-sort-desc icon icon_bullet_arrow_up"></ins>\n                '}function m(a){var b,d,e="";return e+="\n                ",(d=c.title)?b=d.call(a,{hash:{}}):(d=a&&a.title,b=typeof d===A?d.call(a,{hash:{}}):d),e+=B(b)+"\n                "}function n(){return'\n        <div class="grd-lstatic">\n            <a href="#sort" class="icon"></a>\n        </div>\n        '}function o(a,b){var d,e="";return e+='\n        <div class="grd-rstatic">\n            ',d=c["if"].call(a,a&&a.rightname,{hash:{},inverse:C.program(19,q,b),fn:C.program(17,p,b)}),(d||0===d)&&(e+=d),e+="\n        </div>\n        "}function p(a){var b,d;return(d=c.rightname)?b=d.call(a,{hash:{}}):(d=a&&a.rightname,b=typeof d===A?d.call(a,{hash:{}}):d),B(b)}function q(){return"Actions"}function r(a,b,d){var e,f,g,h="";return h+='\n    <li class="grd-row grd-row ',(f=c.cls)?e=f.call(a,{hash:{}}):(f=a&&a.cls,e=typeof f===A?f.call(a,{hash:{}}):f),h+=B(e)+'" data-id="',(f=c.id)?e=f.call(a,{hash:{}}):(f=a&&a.id,e=typeof f===A?f.call(a,{hash:{}}):f),h+=B(e)+'">\n        <ul class="grd-cells">\n            ',g={hash:{},inverse:C.noop,fn:C.programWithDepth(22,s,b,a)},(f=c.spaceless)?e=f.call(a,g):(f=a&&a.spaceless,e=typeof f===A?f.call(a,g):f),c.spaceless||(e=E.call(a,e,{hash:{},inverse:C.noop,fn:C.programWithDepth(22,s,b,a)})),(e||0===e)&&(h+=e),h+="\n        </ul>\n        ",e=c["if"].call(a,d&&d.hasleft,{hash:{},inverse:C.noop,fn:C.programWithDepth(25,u,b,d)}),(e||0===e)&&(h+=e),h+="\n        ",e=c["if"].call(a,d&&d.hasright,{hash:{},inverse:C.noop,fn:C.program(27,v,b)}),(e||0===e)&&(h+=e),h+="\n        ",e=c["if"].call(a,a&&a.full,{hash:{},inverse:C.noop,fn:C.program(30,x,b)}),(e||0===e)&&(h+=e),h+="\n    </li>\n    "}function s(a,b,d){var e,f,g,h="";return h+="\n            ",f=c.iter||d&&d.iter,g={hash:{},inverse:C.noop,fn:C.program(23,t,b)},e=f?f.call(a,d&&d.cells,g):D.call(a,"iter",d&&d.cells,g),(e||0===e)&&(h+=e),h+="\n            "}function t(a,b){var d,e,f="";return f+='\n            <li class="grd-cell grd-cell-'+B((d=a&&a.loop,d=null==d||d===!1?d:d.index,typeof d===A?d.apply(a):d))+" grd-cell-",(e=c.name)?d=e.call(a,{hash:{}}):(e=a&&a.name,d=typeof e===A?e.call(a,{hash:{}}):e),f+=B(d)+" ",(e=c.cls)?d=e.call(a,{hash:{}}):(e=a&&a.cls,d=typeof e===A?e.call(a,{hash:{}}):e),f+=B(d)+'"',d=c["if"].call(a,a&&a.style,{hash:{},inverse:C.noop,fn:C.program(8,k,b)}),(d||0===d)&&(f+=d),f+=">",(e=c.html)?d=e.call(a,{hash:{}}):(e=a&&a.html,d=typeof e===A?e.call(a,{hash:{}}):e),(d||0===d)&&(f+=d),f+="</li>\n            "}function u(a,b,d){var e,f,g="";return g+='\n        <div class="grd-lstatic">\n            <div><input type="checkbox" name="'+B((e=d&&d.inpname,typeof e===A?e.apply(a):e))+'[]" value="',(f=c.id)?e=f.call(a,{hash:{}}):(f=a&&a.id,e=typeof f===A?f.call(a,{hash:{}}):f),g+=B(e)+'" /></div>\n        </div>\n        '}function v(a,b){var d,e,f,g="";return g+='\n        <div class="grd-rstatic">\n            <div>\n            ',e=c.iter||a&&a.iter,f={hash:{},inverse:C.noop,fn:C.programWithDepth(28,w,b,a)},d=e?e.call(a,a&&a.actions,f):D.call(a,"iter",a&&a.actions,f),(d||0===d)&&(g+=d),g+="\n            </div>\n        </div>\n        "}function w(a,b,d){var e,f,g="";return g+='\n                <a href="#',(f=c.title)?e=f.call(a,{hash:{}}):(f=a&&a.title,e=typeof f===A?f.call(a,{hash:{}}):f),g+=B(e)+'" data-action="',(f=c.name)?e=f.call(a,{hash:{}}):(f=a&&a.name,e=typeof f===A?f.call(a,{hash:{}}):f),g+=B(e)+":"+B((e=d&&d.id,typeof e===A?e.apply(a):e))+'" class="icon ',(f=c.icon)?e=f.call(a,{hash:{}}):(f=a&&a.icon,e=typeof f===A?f.call(a,{hash:{}}):f),g+=B(e)+'" title="',(f=c.title)?e=f.call(a,{hash:{}}):(f=a&&a.title,e=typeof f===A?f.call(a,{hash:{}}):f),g+=B(e)+'"></a>\n            '}function x(a){var b,d,e="";return e+='\n        <div class="grd-full">',(d=c.full)?b=d.call(a,{hash:{}}):(d=a&&a.full,b=typeof d===A?d.call(a,{hash:{}}):d),(b||0===b)&&(e+=b),e+="</div>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers);var y,z="",A="function",B=this.escapeExpression,C=this,D=c.helperMissing,E=c.blockHelperMissing;return z+='<ul class="grd tgrd ',y=c.unless.call(b,b&&b.hasleft,{hash:{},inverse:C.noop,fn:C.program(1,f,e)}),(y||0===y)&&(z+=y),z+=" ",y=c.unless.call(b,b&&b.hasright,{hash:{},inverse:C.noop,fn:C.program(3,g,e)}),(y||0===y)&&(z+=y),z+='">\n    ',y=c.unless.call(b,b&&b.nohead,{hash:{},inverse:C.noop,fn:C.program(5,h,e)}),(y||0===y)&&(z+=y),z+="\n    ",y=c.each.call(b,b&&b.rows,{hash:{},inverse:C.noop,fn:C.programWithDepth(21,r,e,b)}),(y||0===y)&&(z+=y),z+="\n</ul>\n"});return b.registerPartial("app_Deprecated_UI_Grid_Template_table",c),c}),define("app/Deprecated/UI/Grid/Base",["require","underscore","events","app/Deprecated/lib/cd-prototype","app/Deprecated/lib/backbone-ported","app/Deprecated/MVC/BaseView","hbs!./Template/table"],function(require){require("app/Deprecated/lib/cd-prototype");var a=require("underscore"),b=(require("events"),require("app/Deprecated/lib/backbone-ported")),c=require("app/Deprecated/MVC/BaseView"),d=require("hbs!./Template/table"),e=function(b){if("number"!=typeof b)return String.fromCharCode.apply(String,a.map(b.split(""),function(a){return 65535-a.charCodeAt()}));var c=parseInt(b,10);return 65535-c},f=String.fromCharCode(65520,65520,65520,65520,65520,65520),g=b.Collection.extend({fetch:Prototype.emptyFunction}),h=function(){return[]},i={grid:h,row:h,cell:h},j={id:"",collection:null,columns:null,nohead:!1,selectable:!1,inpname:"item",actions:null,html_full:Prototype.emptyFunction,jssort:!0,allow_unsorted:!1,styles:null},k=c.extend({options:{},data:null,constructor:function(d){var e=this;if(this.options=a.extend({},j),c.prototype.constructor.apply(this,arguments),!(this.options.collection instanceof b.Collection))throw"No options.collection";if(!a.isArray(this.options.columns)||0===this.options.columns.lebgth)throw"Missing columns definition.";if(!a.isNull(this.options.actions)&&!a.isFunction(this.options.actions))throw"Invalid options.action";this.options.styles=a.extend({},i,d.styles||{}),this.data=new g(this.options.collection.models);var f=function(){var a=null;arguments[0]instanceof b.Collection&&(a=arguments[0]),arguments[0]instanceof b.Model&&(a=arguments[0].collection||null),a&&this.data.reset(a.models)};this.options.collection.bind("add",f,this),this.options.collection.bind("remove",f,this),this.options.collection.bind("change",f,this),this.options.collection.bind("reset",f,this),this.data.bind("reset",this.render,this),this._sort_trans={},this._sort_trans[0]=1,this._sort_trans[1]=-1,this._sort_trans[-1]=this.options.allow_unsorted?0:1,this._sort_state={},this._columns_index={};var h,k;for(h=0,k=this.options.columns.length;k>h;h++)this.options.columns[h].sortable&&(this._sort_state[this.options.columns[h].name]=0),this._columns_index[this.options.columns[h].name]=h;this.bind("action:sort",this.set_sort,this),this.bind("rendered",function(){var a,b,c;for(a=0,b=this.options.columns.length;b>a;a++)c=this.options.columns[a].name,this.el.removeClassName("grd-st-sorted-"+a+"-asc"),this.el.removeClassName("grd-st-sorted-"+a+"-desc"),this._sort_state[c]&&0!==this._sort_state[c]&&this.el.addClassName("grd-st-sorted-"+a+"-"+(this._sort_state[c]>0?"asc":"desc"))},this),this.bind("action:toggle",function(a,b){if(arguments.length>1){var c=b.element().up(".grd-row");c.hasClassName("grd-row-expanded")?this.collapse(a):this.expand(a)}else this.el.hasClassName("grd-st-expanded")?this.collapse():this.expand()}),this.el.on("click","input[type=checkbox]",function(a){var b=a.element();e.trigger("action","select",parseFloat(b.value),b.checked),e.trigger("action:select",parseFloat(b.value),b.checked)}),this.el.addClassName(this.options.styles.grid(this.data).join(" "))},get_selected:function(){return this.el.select("input[type=checkbox]").collect(function(a){return a.checked?parseInt(a.value,10):null}).compact()},rows_data:function(){var b=[];return this.data.each(function(c,d){var e,f,g={id:a.isUndefined(c.id)?"":c.id,actions:[],cells:[],cls:this.options.styles.row(c,d).join(" "),full:null};for(a.isFunction(this.options.actions)&&a.each(this.options.actions(c),function(a,b){a.name=b,g.actions.push(a)}),a.isFunction(this.options.html_full)&&(g.full=this.options.html_full(c,d)||null),e=0,f=this.options.columns.length;f>e;e++)g.cells.push({name:this.options.columns[e].name,html:this.options.columns[e].html(c,d),style:this.options.columns[e].style,cls:this.options.styles.cell(c,this.options.columns[e].name).join(" ")});b.push(g)},this),b},set_sort:function(a,b){var c=isNaN(b)?this._sort_trans[this._sort_state[a]]:b/Math.abs(b)||0;if(this._sort_state[a]=c,this.options.jssort){if(null===a)this.data.comparator=Prototype.emptyFunction;else{var d=this.options.columns[this._columns_index[a]].cmpval;this.data.comparator=function(a){var b=d(a);return 0>c&&(b=e(b)),b?b:f}}this.data.sort(),this.render(),this.trigger("sorted",a,c),this.trigger("sorted:"+a,c)}return this},get_sort:function(b){if(a.isUndefined(b)){var c,d;for(c=0,d=this.options.columns.length;d>c;c++)if(0!==this._sort_state[this.options.columns[c]])return[this.options.columns[c],this._sort_state[this.options.columns[c]]];return null}return this._sort_state[b]},set_collection:function(a){return this.data.reset(a.models),this},row:function(a){return this.el.select(".grd > .grd-row[data-id="+a+"]").first()},expand:function(a){if(arguments.length>0){var b=this.row(a);b.addClassName("grd-row-expanded"),this.trigger("row-expanded",a,b)}else this.el.addClassName("grd-st-expanded"),this.trigger("grid-expanded")},collapse:function(a){if(arguments.length>0){var b=this.row(a);b.removeClassName("grd-row-expanded"),this.trigger("row-collapsed",a,b)}else this.el.removeClassName("grd-st-expanded"),this.trigger("grid-collapsed")},render:function(){this.trigger("prerender"),this.el.update(d({rows:this.rows_data(),columns:a.values(this.options.columns),hasleft:this.options.selectable,hasright:!a.isNull(this.options.actions),nohead:this.options.nohead,inpname:this.options.inpname,rightname:this.options.rightname})),this.trigger("rendered")}});return k}),define("app/Deprecated/UI/Grid/List",["require","./Base"],function(require){var a=require("./Base"),b=a.extend({initialize:function(){}});return b}),define("app/Deprecated/UI/Grid/Table",["require","./Base"],function(require){var a=require("./Base"),b=a.extend({initialize:function(){}});return b}),define("app/Deprecated/UI/ContentBox/Abstract",["require","app/Deprecated/lib/backbone-ported"],function(require){var a=require("app/Deprecated/lib/backbone-ported"),b=a.View.extend({_processing:!1,options:{lang_loading:"Loading content"},initialize:function(){this.el.addClassName("cbox"),this.el.data("loading",this.options.lang_loading)},processing:function(a){return arguments.length>0?(this._processing=!!a,void(this._processing?this.el.addClassName("cbox-st-loading"):this.el.removeClassName("cbox-st-loading"))):this._processing}});return b}),!function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||void 0),h=[];define("text",[],function(){var i,j;return i={version:"1.0.8",strip:function(a){if(a){var a=a.replace(b,""),d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(c=0;3>c;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),a=a.substring(c+1,a.length),c=a.indexOf("!");return-1!==c&&(b=a.substring(c+1,a.length),b="strip"===b,a=a.substring(0,c)),{moduleName:d,ext:a,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e,f=i.xdRegExp.exec(a);return f?(a=f[2],f=f[3],f=f.split(":"),e=f[1],f=f[0],!(a&&a!==b||f&&f!==c||(e||f)&&e!==d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText)c();else{var j=i.parseName(a),k=j.moduleName+"."+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})}},write:function(a,b,c){if(h.hasOwnProperty(b)){var d=i.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+d+"';});\n")}},writeFile:function(a,b,c,d,e){var b=i.parseName(b),f=b.moduleName+"."+b.ext,g=c.toUrl(b.moduleName+"."+b.ext)+".js";i.load(f,c,function(){var b=function(a){return d(g,a)};b.asModule=function(a,b){return d.asModule(a,g,b)},i.write(a,f,b,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)},c.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(j=require.nodeRequire("fs"),i.get=function(a,b){var c=j.readFileSync(a,"utf8");0===c.indexOf("")&&(c=c.substring(1)),b(c)}):"undefined"!=typeof Packages&&(i.get=function(a,b){var c,d,e=new java.io.File(a),f=java.lang.System.getProperty("line.separator"),e=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),g="";try{for(c=new java.lang.StringBuffer,(d=e.readLine())&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=e.readLine());)c.append(f),c.append(d);g=String(c.toString())}finally{e.close()}b(g)}),i})}(),define("text!app/Deprecated/UI/MasonryWall/Template/Item.html",[],function(){return'<div class="mwl-item" id="mwl-item-{{id}}" data-action="detail:{{id}}" style="top:{{offset.top}}px; left:{{offset.left}}px">\n    <div class="mwl-item-inner">\n        <img src="{{image.src}}" width="{{image.width}}" height="{{image.height}}" alt="{{image.alt}}" />\n\n        <div class="mwl-item-overlay">\n        	<a href="#delete:{{id}}" data-action="delete:{{id}}" class="mwl-item-delete" title="Delete">Delete</a>\n        	{{{meta}}}\n        </div>\n    </div>\n</div>'}),define("app/Deprecated/UI/MasonryWall/Item",["require","underscore","handlebars","app/Deprecated/lib/backbone-ported","app/Deprecated/MVC/BaseView","text!./Template/Item.html"],function(require){var a=require("underscore"),b=require("app/Deprecated/lib/backbone-ported"),c=require("handlebars"),d=require("app/Deprecated/MVC/BaseView"),e=require("text!./Template/Item.html");e=c.compile(e);var f=d.extend({initialize:function(d){if(!d.model instanceof b.Model)throw new Error("ItemThumb View: argument is invalid. Expecting an Item model.");this.model=d.model,this.offset=d.offset,this.width=d.width,this.wrapMeta=d.wrapMeta,a.isFunction(this.wrapMeta)||(this.wrapMeta=c.compile(""))},render:function(){var a={id:this.model.get("id"),offset:this.offset,image:{src:this.model.get("media").thumb,width:this.width,height:Math.round(this.width/this.model.get("aspect")),alt:this.model.get("title")},title:this.model.get("title")||"[no title]",meta:this.wrapMeta(this.model.attributes)},b=e(a),c=this.make("div");return c.insert(b),this.el=c.firstDescendant(),this.el}});return f}),define("text!app/Deprecated/UI/MasonryWall/Template/ItemMeta.html",[],function(){return'{{#if title}}\n<div class="mwl-item-caption">\n    <h4>{{wraptruncate title 46}}</h4>\n</div>\n{{/if}}\n\n<div class="mwl-item-author">\n    <span class="mwl-item-author-avatar"></span>\n    <span class="mwl-item-author-name"></span>\n</div>\n\n<div class="mwl-item-actions">\n    {{#if likes_count}}<span><strong>{{likes_count}}</strong> {{likes_text}}</span>{{/if}}\n    {{#if comments_count}}<span><strong>{{comments_count}}</strong> {{comments_text}}</span>{{/if}}\n</div>'}),define("app/Deprecated/UI/MasonryWall/Helpers/StdWrapMeta",["require","handlebars","text!../Template/ItemMeta.html"],function(require){var a,b;return a=require("handlebars"),b=require("text!../Template/ItemMeta.html"),b=a.compile(b),function(a){var c={};return c.title=a.description,(void 0===a.description||""===a.description)&&(c.title=a.title),c.comments_count=parseInt(a.comments_count,10),c.comments_text=c.comments_count>1?"comments":"comment",c.likes_count=parseInt(a.likes_count,10),c.likes_text=c.likes_count>1?"likes":"like",b(c)}}),define("app/Deprecated/UI/MasonryWall/Components/Column",["require","underscore"],function(require){var a=require("underscore"),b=function(a,b){return this.config=b,this.index=a,this.height=0,this.offsetX=this.config.itemOuterWidth*this.index,this};return a.extend(b.prototype,{push:function(a,b){var c=$(a).getLayout();b=b||c.get("border-box-height"),this.height=this.height+b+this.config.itemMarginBottom},get_height:function(){return this.height},get_offset_x:function(){return this.offsetX},get_offset_y:function(){return this.height},get_offset:function(){return{top:this.get_offset_y(),left:this.get_offset_x()}}}),b}),define("app/Deprecated/UI/MasonryWall/Components/Wall",["require","underscore","./Column"],function(require){var a=require("underscore"),b=require("./Column"),c=function(c,d){this.config=d||{};var e=a.range(c);a.each(e,function(a,c){e[c]=new b(c,d)}),this.columns=e,this.length=c};return a.extend(c.prototype,{get_shortest_column:function(){return a.min(this.columns,function(a){return a.get_height()})},get_shortest_column_height:function(){var b=a.filter(this.columns,function(a){return a.get_height()>-1}),c=a.min(b,function(a){return a.get_height()});return c?c.get_height():0},get_num_cols:function(){return this.columns.length},get_col_width:function(){return this.config.itemOuterWidth},get_height:function(){var b=a.max(this.columns,function(a){return a.get_height()});return b.height-b.config.itemMarginBottom},get_width:function(){return this.length*this.get_col_width()},get_offset:function(){var a=this.get_shortest_column();return a.get_offset()},insert:function(a,b){var c=this.get_shortest_column();c.push(a,b)}}),c}),define("app/Deprecated/UI/MasonryWall/Wall",["require","underscore","handlebars","dombind","app/Deprecated/lib/backbone-ported","app/Deprecated/UI/ContentBox/Abstract","./Item","./Helpers/StdWrapMeta","./Components/Wall","./Components/Column"],function(require){var a=require("underscore"),b=require("dombind"),c=require("handlebars"),d=require("app/Deprecated/lib/backbone-ported"),e=require("app/Deprecated/UI/ContentBox/Abstract"),f=require("./Item"),g=require("./Helpers/StdWrapMeta"),h=require("./Components/Wall"),i=(require("./Components/Column"),'<span class="uw uw-small"><span class="uw-pic uw-nopic"></span></span>'),j=e.extend({className:"mwl-layout-items",initialize:function(f){if(e.prototype.initialize.apply(this,arguments),b.watch_ctl(this,this.el),this.config=a.extend({itemOuterWidth:221,itemInnerWidth:200,itemPadding:10,itemMarginBottom:1,itemAnimate:!1,itemDelay:0,layoutMinCols:1,layoutLoadMoreThreshold:100},f.config||{}),this.el.data("loading","Please wait..."),this.processing(!0),!f.collection instanceof d.Collection)throw new Error("Wall view: options.collection argument is invalid. Expecting a Backbone collection.");if(this.collection=f.collection,this.collection.bind("reset",this.reflow,this),this.collection.bind("remove",this.reflow,this),this.collection.bind("add",this._add_one_brick,this),this.collection.bind("action:loading",this._show_loading_indicator,this),this.collection.bind("action:nothing-to-fetch",this._hide_loading_indicator,this),this.collection.bind("action:batch-loaded",this._hide_loading_indicator,this),this.container=f.container||null,!a.isElement(this.container)){var h=this.config.itemOuterWidth*this.config.layoutMinCols;this.container=new Element("div"),this.container.setStyle({width:h+"px"})}this.container.update(this.el),this.wrapMeta=f.wrapMeta||g||c.compile(""),this.bind("action:detail",this._show_item_detail,this),this.bind("action:delete",this._delete_item,this)},render:function(){this.rendered=this.rendered||!1,this.rendered?this._hide_loading_indicator():(this.processing(!1),this._setup_wall(),this.collection.each(this._add_one_brick,this),this.rendered=!0)},reflow:function(){this.rendered=!1,this.render()},get_min_height:function(){return a.isUndefined(this.wall)?null:this.wall.get_shortest_column_height()},get_height:function(){return a.isUndefined(this.wall)?null:this.wall.get_height()},_setup_wall:function(){this.wall=void 0,this.el.update("");var a=Math.floor(this.container.getWidth()/this.config.itemOuterWidth),b=a>this.config.layoutMinCols?a:this.config.layoutMinCols;this.wall=new h(b,{itemMarginBottom:this.config.itemMarginBottom,itemOuterWidth:this.config.itemOuterWidth})},_add_one_brick:function(b){var c,d=this.wall.get_offset(),e=new f({model:b,offset:d,wrapMeta:this.wrapMeta,width:this.config.itemInnerWidth}),g=b.get("aspect")||b.get("aspect_ratio");if(a.isUndefined(g))throw new Error("Wall.js _add_one_brick(): Item model is required to have `aspect` or `aspect_ratio` attribute!");c=Math.round(this.config.itemInnerWidth/g)+2*this.config.itemPadding,e.render(),this.el.insert(e.el),this.wall.insert(e.el,c),b.get_author(a.bind(this._update_item_author,this,b)),this.el.setStyle({height:this.wall.get_height()+"px",width:this.wall.get_width()+"px"}),this.trigger("item-rendered")},_update_item_author:function(a,b){var c,d=this.el.select("#mwl-item-"+a.id).pop();void 0!==d&&(c=null===b.pics.small?i:new Element("img",{src:b.pics.small,width:"25px",height:"25px"}),d.select(".mwl-item-author-avatar").pop().insert(c),d.select(".mwl-item-author-name").pop().update(b.fullname))},_show_item_detail:function(a){var b=this.collection.get({id:a})||null;this.trigger("show-detail",b)},_show_loading_indicator:function(){this.el.data("loading","Loading more..."),this.el.addClassName("mwl-loading"),this.processing(!0)},_hide_loading_indicator:function(){this.el.removeClassName("mwl-loading"),this.processing(!1)},_delete_item:function(a,b){b.preventDefault(),b.stopPropagation();var c=this.collection.get({id:a})||null;this.trigger("delete-item",c)}});return j}),define("components/3rdparty-backbone/backbone",["require","underscore","jquery"],function(){var a={_:require("underscore"),jQuery:require("jquery")};return function(){(function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)
}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}).call(this)}.call(a),a.Backbone.noConflict()}),define("backbone",["require","mixin","underscore","jquery","components/3rdparty-backbone/backbone"],function(a){var b=(a("underscore"),a("jquery"),a("mixin")),c=a("components/3rdparty-backbone/backbone");return c.Model.mixin=c.Collection.mixin=c.View.mixin=c.Router.mixin=b,c}),define("hbs!uicore/Overlay/Template/dialog",["hbs","handlebars"],function(a,b){var c=b.template(function(a,b,c){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),'<div class="ovr-dlg-win">\n    <div class="ovr-dlg-box">\n        <div class="ovr-dlg-content"></div>\n        <span data-action="close" class="i-close ovr-dlg-close"></span>\n    </div>\n</div>'});return b.registerPartial("uicore_Overlay_Template_dialog",c),c}),define("hbs!uicore/Overlay/Template/Dialog/alert",["hbs","handlebars"],function(a,b){var c=b.template(function(a,b,c,d,e){function f(a){var b,d,e="";return e+="<h1>",(d=c.msg)?b=d.call(a,{hash:{}}):(d=a&&a.msg,b=typeof d===k?d.call(a,{hash:{}}):d),e+=l(b)+"</h1>"}function g(a){var b,d,e="";return e+="<p>",(d=c.descr)?b=d.call(a,{hash:{}}):(d=a&&a.descr,b=typeof d===k?d.call(a,{hash:{}}):d),e+=l(b)+"</p>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers);var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="frm frm-dlg frm-dlg-alert">\n    ',h=c["if"].call(b,b&&b.msg,{hash:{},inverse:m.noop,fn:m.program(1,f,e)}),(h||0===h)&&(j+=h),j+="\n    \n    ",h=c["if"].call(b,b&&b.descr,{hash:{},inverse:m.noop,fn:m.program(3,g,e)}),(h||0===h)&&(j+=h),j+='\n    \n    <div class="frm-buttons">\n        <input type="button" class="btn" value="',(i=c.label_ok)?h=i.call(b,{hash:{}}):(i=b&&b.label_ok,h=typeof i===k?i.call(b,{hash:{}}):i),j+=l(h)+'" data-action="close" />\n    </div>\n</div>'});return b.registerPartial("uicore_Overlay_Template_Dialog_alert",c),c}),define("hbs!uicore/Overlay/Template/Dialog/confirm",["hbs","handlebars"],function(a,b){var c=b.template(function(a,b,c,d,e){function f(a){var b,d,e="";return e+="<h1>",(d=c.msg)?b=d.call(a,{hash:{}}):(d=a&&a.msg,b=typeof d===n?d.call(a,{hash:{}}):d),e+=o(b)+"</h1>"}function g(a){var b,d,e="";return e+="<p>",(d=c.descr)?b=d.call(a,{hash:{}}):(d=a&&a.descr,b=typeof d===n?d.call(a,{hash:{}}):d),e+=o(b)+"</p>"}function h(){return" btn-warn"}function i(a){var b,d;return(d=c.label_delete)?b=d.call(a,{hash:{}}):(d=a&&a.label_delete,b=typeof d===n?d.call(a,{hash:{}}):d),o(b)}function j(a){var b,d;return(d=c.label_ok)?b=d.call(a,{hash:{}}):(d=a&&a.label_ok,b=typeof d===n?d.call(a,{hash:{}}):d),o(b)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers);var k,l,m="",n="function",o=this.escapeExpression,p=this;return m+='<div class="frm frm-dlg frm-dlg-confirm">\n    ',k=c["if"].call(b,b&&b.msg,{hash:{},inverse:p.noop,fn:p.program(1,f,e)}),(k||0===k)&&(m+=k),m+="\n    \n    ",k=c["if"].call(b,b&&b.descr,{hash:{},inverse:p.noop,fn:p.program(3,g,e)}),(k||0===k)&&(m+=k),m+='\n    \n    <div class="frm-buttons">\n        <input type="button" class="btn',k=c["if"].call(b,b&&b.is_delete,{hash:{},inverse:p.noop,fn:p.program(5,h,e)}),(k||0===k)&&(m+=k),m+='" value="',k=c["if"].call(b,b&&b.is_delete,{hash:{},inverse:p.program(9,j,e),fn:p.program(7,i,e)}),(k||0===k)&&(m+=k),m+='" data-action="ok" />\n        <input type="button" class="btn-sec" value="',(l=c.label_cancel)?k=l.call(b,{hash:{}}):(l=b&&b.label_cancel,k=typeof l===n?l.call(b,{hash:{}}):l),m+=o(k)+'"  data-action="close" />\n    </div>\n</div>'});return b.registerPartial("uicore_Overlay_Template_Dialog_confirm",c),c}),define("hbs!uicore/Overlay/Template/Dialog/prompt",["hbs","handlebars"],function(a,b){var c=b.template(function(a,b,c,d,e){function f(a){var b,d,e="";return e+="<h1>",(d=c.msg)?b=d.call(a,{hash:{}}):(d=a&&a.msg,b=typeof d===k?d.call(a,{hash:{}}):d),e+=l(b)+"</h1>"}function g(a){var b,d,e="";return e+="<p>",(d=c.descr)?b=d.call(a,{hash:{}}):(d=a&&a.descr,b=typeof d===k?d.call(a,{hash:{}}):d),e+=l(b)+"</p>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers);var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<form class="frm frm-dlg frm-dlg-prompt" action="javascript:void(0);">\n    ',h=c["if"].call(b,b&&b.msg,{hash:{},inverse:m.noop,fn:m.program(1,f,e)}),(h||0===h)&&(j+=h),j+="\n\n    ",h=c["if"].call(b,b&&b.descr,{hash:{},inverse:m.noop,fn:m.program(3,g,e)}),(h||0===h)&&(j+=h),j+='\n\n    <div class="frm-row-flat">\n        <input type="text" value="',(i=c.value)?h=i.call(b,{hash:{}}):(i=b&&b.value,h=typeof i===k?i.call(b,{hash:{}}):i),j+=l(h)+'" placeholder="',(i=c.placeholder)?h=i.call(b,{hash:{}}):(i=b&&b.placeholder,h=typeof i===k?i.call(b,{hash:{}}):i),j+=l(h)+'" autofocus />\n    </div>\n\n    <div class="frm-buttons">\n        <input type="submit" class="btn" value="',(i=c.label_ok)?h=i.call(b,{hash:{}}):(i=b&&b.label_ok,h=typeof i===k?i.call(b,{hash:{}}):i),j+=l(h)+'" />\n        <input type="button" class="btn-sec" value="',(i=c.label_cancel)?h=i.call(b,{hash:{}}):(i=b&&b.label_cancel,h=typeof i===k?i.call(b,{hash:{}}):i),j+=l(h)+'"  data-action="close" />\n    </div>\n</form>'});return b.registerPartial("uicore_Overlay_Template_Dialog_prompt",c),c}),define("uicore/Overlay/Dialog",["require","jquery","underscore","backbone","handlebars","dombind","uicore/Helpers/Promise","hbs!./Template/dialog","hbs!./Template/Dialog/alert","hbs!./Template/Dialog/confirm","hbs!./Template/Dialog/prompt"],function(a){var b=a("underscore"),c=a("jquery"),d=a("backbone"),e=(a("handlebars"),a("dombind")),f=a("uicore/Helpers/Promise"),g=a("hbs!./Template/dialog"),h=a("hbs!./Template/Dialog/alert"),i=a("hbs!./Template/Dialog/confirm"),j=a("hbs!./Template/Dialog/prompt"),k=27,l={alert:{title:"",descr:"",label_ok:"OK"},confirm:{title:"",descr:"",is_delete:!1,label_ok:"OK",label_delete:"Delete",label_cancel:"Cancel"},prompt:{title:"",descr:"",required:!1,value:"",placeholder:"",label_ok:"OK",label_cancel:"Cancel"}},m=[],n=function(a){var b=c(a).closest(".ovr-dlg.ovr-st-on"),d=c(".ovr-bb.ovr-st-on:first"),e=parseInt(b.css("z-index"),10),f=parseInt(d.css("z-index"),10);return!isNaN(e)&&!isNaN(f)&&f>e},o=d.View.extend({className:"ovr-dlg",initialize:function(){this._rendered=!1,this.dombind_initialize(),this.bind("action:close",function(){this.close()}.bind(this)),c(document).on("keyup",b.bind(function(a){if(a.keyCode===k){var c=b.last(m);n.apply(null,c)||b.delay(this.trigger.bind(this,"action:close"))}},this))},render:function(){return this._rendered||(c(document.body).append(this.el),this._rendered=!0),c(document.body).addClass("ovr-st-dlg-on"),this.$el.addClass("ovr-st-on"),this},open:function(a,d){if(b.isFunction(a))return a(b.bind(this.open,this));d=b.defaults(d||{},{onbeforeclose:c.noop});var h=c(g({}));this.render().$el.append(h),a.el&&b.isElement(a.el)?a=a.el:b.isElement(a)||(a=c("<div>").html(a)),h.find(".ovr-dlg-content").html(a),this.trigger("content-set");var i=new f;return e.dombind(i,a),m.push([h,i,d]),i},alert:function(a,c){return c=b.extend({},l.alert,{msg:a},c),this._dlg(h,c)},confirm:function(a,c){return c=b.extend({},l.confirm,{msg:a},c),this._dlg(i,c)},prompt:function(a,d){d=b.extend({},l.prompt,{msg:a},d);var e=c(j(d)),f=e.find('input[type="text"]'),g=e.find('input[type="submit"]')[0],h=this.open(e),i=function(){var a=d.validate||function(a){return""!==a.trim()};return function(){return a(f.val())}}();return f[0].focus(),h.value=function(){return f.val().trim()},d.required&&(g.disabled=!i(),f.on("keyup",function(){g.disabled=!i()})),e.on("submit",function(){g.disabled||h.trigger("action:ok")}),h},close:function(a){var b=m.length&&m[m.length-1][2].onbeforeclose();if(!b||window.confirm(b)){var d=m.pop();d&&(d[0].remove(),d[1].trigger("action:close"),0===m.length?(c(document.body).removeClass("ovr-st-dlg-on"),this.$el.removeClass("ovr-st-on")):a&&this.close())}},remove:function(){this._rendered=!1,this.$el.detach()},_dlg:function(a,b){return this.open(c(a(b)))}});return o.mixin(e),new o}),define("uicore/Overlay/Bubble/Helper",["require","jquery","underscore"],function(a){function b(a,c,f){f=e.defaults(f||{},{cls:"",pos:b.preferred_pos});var g=function(a){return d("<div></div>").addClass(e.compact(["ovr-tt"].concat(f.cls)).join(" ")).html(a).get(0)};return this.open(e.extend({target:a,content:g(c),pos:f.pos,wrap:g},f))}function c(a,b,f){f=e.defaults(f||{},{cls:"",pos:c.preferred_pos,autoclose:!0});var g=this,h=function(b){var c=d("<div></div>").addClass(e.compact(["ovr-dd"].concat(f.cls)).join(" ")).html(b);return f.autowidth&&c.css("width",d(a).outerWidth()),c[0]};return this.open(e.extend({target:a,content:h(b),pos:f.pos,wrap:h},f)),d(a).addClass("pseudo-active"),this.once("close",function(){d(a).removeClass("pseudo-active")}),f.autoclose&&d(this.el).one("click",".ovr-dd-options > li[data-action]",function(){g.close()}),this}var d=a("jquery"),e=a("underscore");return b.preferred_pos=[[.5,1,.5,0],[.5,0,.5,1],[1,.5,0,.5],[0,.5,1,.5]],c.preferred_pos=[[0,1,0,0],[1,1,1,0],[0,0,0,1],[1,0,1,1]],{tooltip:b,dropdown:c,dropdown_item:function(a,b){var c=e.extend({},a.attrs||{},{"class":[]});(a.disabled||c.disabled)&&(c.disabled="disabled"),a.cls&&c["class"].push(a.cls),a.caption&&c["class"].push(["ovr-dd-caption"]),a.delim&&c["class"].push(["ovr-dd-delim"]),c["class"].length?c["class"]=c["class"].join(" "):delete c["class"],a.action&&!a.disabled&&(c["data-action"]=a.action),c=e.reduce(c,function(a,b,c){return a.concat(c+'="'+e.escape(b)+'"')},[]).join(" ");var f="<li "+c+">"+e.escape(a.label||"")+(a.label_raw||"")+"</li>";return b?f:d(f).get(0)},dropdown_list:function(a,b){a=a||[];var c='<ul class="ovr-dd-options">'+e.map(a,function(a){return this.dropdown_item(a,!0)},this).join("")+"</ul>";return b?c:d(c).get(0)}}}),define("uicore/Overlay/Bubble",["require","jquery","underscore","backbone","./Bubble/Helper"],function(a){var b=a("jquery"),c=a("underscore"),d=a("backbone"),e=a("./Bubble/Helper"),f=27,g=1e3,h=[[0,0,1,1],[1,0,0,1],[1,1,0,0],[0,1,1,0]],i={hide_on_click:!0,hide_on_esc:!0,hide_on_mouseout:!1,zindex:""},j=function(a){var c=b(a?a:window);return{width:c[a?"outerWidth":"width"](),height:c[a?"outerHeight":"height"]()}},k=function(a,b,c,d){return[b.left+d[0]*b.width-d[2]*c.width,b.top+d[1]*b.height-d[3]*c.height]},l=function(a,b,d,e){var f={x:b.left+b.width/2,y:b.top+b.height/2},g=c.map(a,function(a){var c=k(b,d,e,a),g={x:c[0]+e.width/2,y:c[1]+e.height/2};return Math.sqrt(Math.pow(g.x-f.x,2)+Math.pow(g.y-f.y,2))});return a[c.indexOf(g,c.min(g))]},m=function(a){for(var c=a;c&&c!==document;){if("fixed"===b(c).css("position"))return!0;c=c.parentNode}return!1},n=function(a){var c=b(".ovr-dlg.ovr-st-on:first"),d=b(a).closest(".ovr-bb.ovr-st-on"),e=parseInt(c.css("z-index"),10),f=parseInt(d.css("z-index"),10);return!isNaN(e)&&!isNaN(f)&&e>f},o=d.View.extend({className:"ovr-bb",initialize:function(){this.on("align",this._align,this),this.$container=null,this._pieces=[]},align:function(a){a=a||h;var b,d={top:"auto",right:"auto",bottom:"auto",left:"auto"},e=c.extend({},this._offset(),j()),f=c.extend({},this._offset(this._target),j(this._target)),g=c.extend({},j(this.$container));return b=l.call(this,a,e,f,g),b[2]<=.5?d.left=f.left+b[0]*f.width-b[2]*g.width+"px":d.right=-1*(f.left+f.width*b[0])+"px",b[3]<=.5?d.top=f.top+b[1]*f.height-b[3]*g.height+"px":d.bottom=-1*(f.top+f.height*b[1])+"px",this.$el.attr("data-pos",c.indexOf(a,b)),this.$el.addClass("ovr-st-on"),this.$container.css(d),this.trigger("align"),this},render:function(){return this.$container=this.$container||this.$el.appendTo(document.body).html('<div class="ovr-bb-wrapped"></div>').find(".ovr-bb-wrapped"),this},open:function(a){var e=this;if(a=c.defaults(a||{},i),c.isFunction(a.content))return a.content(a.target,function(b){e.open(c.extend({},a,{content:b}))}),this;var f,h=b(a.target),j=h.closest(this.$el).length;if(this.render(),f=b(a.content instanceof d.View?a.content.el:a.content),this.$el.css("z-index",a.zindex),j?h.after(f):(this._target=a.target,this.close(),this.$container.children().detach(),this.$container.html(f)),this._pieces.push(f),this.align(a.pos).trigger("open"),!j){if(a.hide_on_click&&b(document).on("click.Overlay/Bubble",this._on_click.bind(this)),a.hide_on_esc&&b(document).on("keyup.Overlay/Bubble",this._on_key.bind(this)),a.hide_on_mouseout){var k=null,l=function(){k&&(clearTimeout(k),k=null)},m=function(){l(),k=setTimeout(e.close.bind(e),c.isNumber(a.hide_on_mouseout)?a.hide_on_mouseout:g)};h.one("mouseenter.Overlay/Bubble",l).one("mouseleave.Overlay/Bubble",m),f.one("mouseenter.Overlay/Bubble",l).one("mouseleave.Overlay/Bubble",m)}return this}},close:function(a){if(this.$el.hasClass("ovr-st-on")){var d=this._pieces.pop().detach();0===this._pieces.length&&(this.$el.removeClass("ovr-st-on"),b(document).off(".Overlay/Bubble")),a=c.extend(a||{},{el:d.children().get(0)}),this.trigger("close",a)}return this},contains:function(a){return b(a).closest(this.$el).length>0},dropdown:e.dropdown,tooltip:e.tooltip,helper:e,_on_click:function(a){var d=b(a.target);d.closest(document).length&&0===d.closest(".ovr-bb").length&&0===d.closest(this._target).length&&!n(c.last(this._pieces))&&c.delay(this.close.bind(this))},_on_key:function(a){a.which!==f||n(c.last(this._pieces))||c.delay(this.close.bind(this,{esc:!0}))},_offset:function(a){var c=b(a?a:window);if(m(a)){this.$el.addClass("ovr-bb-fixed");var d=c.offset();return{left:d.left,top:d.top-b(document).scrollTop()}}return this.$el.removeClass("ovr-bb-fixed"),a?c.offset():{left:c.scrollLeft(),top:c.scrollTop()}}});return new o}),define("app/Deprecated/UI/Paginator/VScroll",["require","underscore","app/Deprecated/lib/cd-prototype","events"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("events")),c={el:null,total:1/0,chunk:25,treshold:20},d=function(b){b=b||{},this.options=a.extend({},c,this.options||{},b),this.el=this.options.el||new Element("div"),this._scroll_listener=null,this._prev_rest=1/0,this.reset(),this.attach(this.el)};return d.prototype.processing=function(a){return arguments.length>0&&(this._processing=!!a,this.trigger("paginator:processing",this._processing)),this._processing},d.prototype.attach=function(a){var b=this;this.el=a,this._scroll_listener=this.el.on("scroll",function(){var a=this.scrollHeight-this.offsetHeight-this.scrollTop,c=a<b._prev_rest,d=a<b.options.treshold;b._prev_rest=a,!b.processing()&&c&&d&&b.next()})},d.prototype.dettach=function(){this._scroll_listener&&this._scroll_listener.stop()},d.prototype.next=function(){!this.processing()&&this._page<this._total_pages&&(this.processing(!0),this.trigger("paginator:page",this._page+1,this.options.chunk*this._page,this.options.chunk),this._page++)},d.prototype.reset=function(){this._page=0,this._total_pages=Math.ceil(this.options.total/this.options.chunk)},d.prototype.end=function(){this._total_pages=this._page,this.trigger("paginator:last")},a.extend(d.prototype,b),d}),define("app/Deprecated/UI/Paginator/PageNum",["require","underscore","app/Deprecated/lib/cd-prototype","events","dombind"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("events")),c=require("dombind"),d={el:null,cls:"",total:0,chunk:25,page:0,autolock:!1},e=function(){return Element.make(' <span class="pgn pgn-pnum"><a href="#previous" data-action="moveby:-1" class="icon icon_filepreviewbar_previous_page"></a><span class="pgn-pnum-input"><input type="text" maxlength="3" /><ins class="uic-prg-spinner"></ins></span> <span class="pgn-pnum-total">of '+this._total_pages+'</span><a href="#next" data-action="moveby:1" class="icon icon_filepreviewbar_next_page"></a></span>')},f=function(b){b=b||{};var f=this;this.options=a.extend({},d,this.options||{},b),this.options.wrap=this.options.wrap||this.wrap,this._page=null,this._total_pages=Math.ceil(this.options.total/this.options.chunk),this._autolock=this.options.autolock,this._processing=!1,this.elms={},this.elms.box=e.call(this),this.elms.input=this.elms.box.select(".pgn-pnum-input input").first(),this.elms.total=this.elms.box.select(".pgn-pnum-total").first(),this.elms.box.addClassName(this.options.cls),this.el?(this.el=$(this.el),this.el.insert(this.elms.box)):this.el=this.elms.box,c.watch_ctl(this,this.elms.box),this.bind("action:moveby",function(a){this.page(this._page+a)}),this.elms.input.on("keypress",function(a){if(a.keyCode===Event.KEY_RETURN){var b=f.page();f.page(this.getValue()-1),b===f.page()&&f.page(b)}}),this._autolock=!1,this.page(this.options.page),this._autolock=this.options.autolock};return f.prototype.processing=function(a){return arguments.length>0&&(this._processing=!!a,this.el[this._processing?"addClassName":"removeClassName"]("pgn-pnum-st-processing")),this._processing},f.prototype.page=function(a){return arguments.length>0?(a=Math.max(0,Math.min(this._total_pages-1,parseInt(a,10)||0)),void(this.processing()||a===this._page||(this._page=a,this.elms.input.value=this._page+1,this._autolock&&this.processing(!0),this.trigger("paginator:page",this._page,this.options.chunk*this._page,this.options.chunk),0===this._page?(this.elms.box.addClassName("pgn-pnum-st-first"),this.trigger("paginator:first")):this.elms.box.removeClassName("pgn-pnum-st-first"),this._page===this._total_pages-1?(this.elms.box.addClassName("pgn-pnum-st-last"),this.trigger("paginator:last")):this.elms.box.removeClassName("pgn-pnum-st-last")))):this._page
},a.extend(f.prototype,b),f}),define("app/Deprecated/UI/Paginator/Continuous",["require","underscore","app/Deprecated/lib/cd-prototype","events","dombind"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("events")),c=require("dombind"),d={el:null,cls:"",label:function(a){return"Page "+a},lbound:null,rbound:null,chunk:25,autolock:!1},e=function(){return Element.make(' <span class="pgn pgn-con"><a href="#moveby:-1" class="icon icon_filepreviewbar_previous_page"></a><span class="pgn-con-mid"><span class="pgn-con-label"></span><ins class="uic-prg-spinner"></ins></span> <a href="#moveby:1" class="icon icon_filepreviewbar_next_page"></a></span>')},f=function(b){b=b||{};this.options=a.extend({},d,this.options||{},b),this.options.wrap=this.options.wrap||this.wrap,this._page=null,this._autolock=this.options.autolock,this._processing=!1,this.lbound(this.options.lbound),this.rbound(this.options.rbound),this.elms={},this.elms.box=e.call(this),this.elms.label=this.elms.box.select(".pgn-con-label").first(),this.elms.box.addClassName(this.options.cls),this.el?(this.el=$(this.el),this.el.insert(this.elms.box)):this.el=this.elms.box,c.watch_ctl(this,this.elms.box),this.bind("action:moveby",function(a){this.page(this._page+a)}),this._autolock=!1,this.page(this.options.page),this._autolock=this.options.autolock};return f.prototype.processing=function(a){return arguments.length>0&&(this._processing=!!a,this.el[this._processing?"addClassName":"removeClassName"]("pgn-con-st-processing")),this._processing},f.prototype.label=function(a){return arguments.length>0?void this.elms.label.update(a):this.elms.label.innerHTML},f.prototype.lbound=function(a){return arguments.length>0?(a=parseInt(this.options.lbound,10),void(this._lbound=isNaN(a)?-1/0:a)):this._lbound},f.prototype.rbound=function(a){return arguments.length>0?(a=parseInt(this.options.rbound,10),void(this._rbound=isNaN(a)?1/0:a)):this._rbound},f.prototype.page=function(a){if(!(arguments.length>0))return this._page;if(a=Math.max(this._lbound,Math.min(this._rbound,parseInt(a,10)||0)),!this.processing()&&a!==this._page){var b=this._page;this._page=a,this.label(this.options.label(this._page)),this._autolock&&this.processing(!0),this.trigger("paginator:page",this._page,this.options.chunk*this._page,this.options.chunk),this.trigger("paginator:move",b<this._page?1:-1),this._page===this._lbound?(this.elms.box.addClassName("pgn-con-st-first"),this.trigger("paginator:first")):this.elms.box.removeClassName("pgn-con-st-first"),this._page===this._rbound?(this.elms.box.addClassName("pgn-con-st-last"),this.trigger("paginator:last")):this.elms.box.removeClassName("pgn-con-st-last")}},a.extend(f.prototype,b),f}),define("app/Deprecated/UI/Picker/Filter/Abstract",["require","underscore","app/Deprecated/lib/cd-prototype","clsextend","events"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("clsextend")),c=require("events"),d={title:"Untitled",value:void 0},e=function(b){this.options=a.extend({},d,this.options,b||{}),this.argname=this.options.argname||a.uniqueId("obfilter"),this.title=this.options.title,this.el=new Element("div"),this.initialize(b),a.isUndefined(this.options.value)||this.value(this.options.value)};return a.extend(e.prototype,c),e.prototype.options={},e.prototype.initialize=Prototype.emptyFunction,e.prototype.focus=function(){console.warn("Method focus() must be implemented in child class")},e.prototype.label=function(){return this.value()},e.prototype.validate=function(){throw new Error("Method validate() must be implemented in child class")},e.prototype.value=function(a){if(0===arguments.length)return this._getvalue();if(!this.validate(a))throw console.warn("Invalid filter value",a,this),new Error("Invalid filter value for "+this.options.argname);this._setvalue(a)},e.prototype._setvalue=function(){console.warn("Method _setvalue() must be implemented in child class")},e.prototype._getvalue=function(){console.warn("Method _getvalue() must be implemented in child class")},e.prototype._apply=function(){var a=this.value();this.validate(a)?this.trigger("filter:apply",this):this.trigger("filter:invalid",this)},e.extend=b,e}),define("app/Deprecated/UI/Picker/Filter/Match",["require","underscore","app/Deprecated/lib/cd-prototype","clsextend","./Abstract"],function(require){var a=(require("underscore"),require("app/Deprecated/lib/cd-prototype"),require("clsextend"),require("./Abstract")),b=a.extend({render:function(){var a=this;return this.el.update(' <div class="ob-filter-form"><h3>'+this.options.title+'</h3><input type="text" value="" /></div>'),this.elms={input:this.el.select("input").first()},this.elms.input.on("change",function(){a._value=this.getValue()}),this.elms.input.on("keydown",function(b){b.keyCode===Event.KEY_RETURN&&a._apply()}),this},focus:function(){this.elms.input.focus()},validate:function(a){return""!==String(a).strip()},_getvalue:function(){return this.elms.input.getValue()},_setvalue:function(a){this.elms.input.setValue(a)}});return b}),define("app/Deprecated/UI/Picker/Filter/Select",["require","underscore","app/Deprecated/lib/cd-prototype","clsextend","./Abstract"],function(require){require("app/Deprecated/lib/cd-prototype");var a=require("underscore"),b=(require("clsextend"),require("./Abstract")),c=b.extend({options:{choices:null,empty_choice:null},initialize:function(){var a=this;this.options.choices=this.options.choices||{},this._value=null,this.bind("input:change",function(){a._value=a.elms.input.getValue(),a._apply()})},render:function(){var b=this;return this.el.update(' <div class="ob-filter-form"><h3>'+this.options.title+"</h3><select></select></div>"),this.elms={input:this.el.select("select")[0]},null!==this.options.empty_choice&&this._append_option(this.options.empty_choice,""),a.each(this.options.choices,this._append_option,this),this.elms.input.onchange=function(){b.trigger("input:change")},this},focus:function(){this.elms.input.focus()},label:function(){return this.options.choices[this.value()]},validate:function(a){return this.options.choices.hasOwnProperty(a)||null!==this.options.empty_choice&&0===this.elms.input.selectedIndex},_append_option:function(a,b){var c=new Element("option",{value:b});c.update(a),this.elms.input.insert(c)},_getvalue:function(){return this._value},_setvalue:function(a){this._value=a,this.elms.input.setValue(a)}});return c}),define("app/Deprecated/lib/polyfills/input.placeholder",["require","app/Deprecated/lib/cd-prototype"],function(require){require("app/Deprecated/lib/cd-prototype");var a=$(document),b=!1,c=function(a,b){var c=b.up("[data-placeholder]");c&&c.data("placeholder",b.value.length>0?" ":b.readAttribute("placeholder"))},d=function(a){a.retrieve("placeholder-adopted")||(a.on("propertychange",c),a.store("placeholder-adopted",!0)),c(null,a)},e={initialize:function(e){if(e=$(e||a.body),!b){if(!e||!e.select)return void console.warn("Can not apply polyfill to invalid root");e.select("*[placeholder]").each(d),a.on("change","[placeholder]",c),a.on("keyup","[placeholder]",c),a.on("mouseover","[placeholder]",c),document.on("dom:loaded","[placeholder]",c),document.on("change","[placeholder]",c),document.on("keyup","[placeholder]",c),document.on("mouseover","[placeholder]",c),b=!0}}};return e}),define("app/Deprecated/UI/Picker/Finder",["require","app/Deprecated/lib/cd-prototype","underscore","app/Deprecated/lib/cd-prototype","clsextend","events","app/Deprecated/lib/polyfills/input.placeholder","dombind","app/Deprecated/UI/Paginator/VScroll"],function(require){require("app/Deprecated/lib/cd-prototype");var a=require("underscore"),b=require("clsextend"),c=require("events"),d=require("dombind"),e=require("app/Deprecated/UI/Paginator/VScroll"),f=require("app/Deprecated/lib/polyfills/input.placeholder"),g=16,h={cls:"",name:"obj",delay:200,url:document.location.href,lookup_parameters:null,parse_choice:function(a){return a},num_results:100,multiselect:!1,term_delimiter:null,threshold:function(a){return a.length>=3?a:null},readonly:!1,disabled:!1,data_sugg_empty:null,data_sugg_exclude:null,data_selected:null,lang_placeholder:"Start typing",lang_noresults:"No results",wrap_widget:null,wrap_choice:null},i=window.Modernizr,j=i&&!i.input.placeholder?function(){f.initialize(this.el)}:null,k=function(b,c){var f=this;b=$(b),this._selected={},this._search={busy:!1,timer:null,request:null,last_term:""},this._selected={},this._choice={pos:0,items:[],posindex:{}},this._multikey_held=!1,this.options=a.extend({},h,this.options||{},c||{}),this.options.lookup_parameters=this.options.lookup_parameters||{},this.options.data_sugg_exclude=this.options.data_sugg_exclude||[],this.options.data_sugg_groupby=this.options.data_sugg_groupby||null,this.options.data_selected=this.options.data_selected||[],this.options.name=b.name||this.options.name,this.options.readonly=b.readOnly||this.options.readonly,this.options.disabled=b.disabled||this.options.disabled,this.options.multiselect&&"[]"!==this.options.name.substr(-2)&&(this.options.name+="[]"),this.wrap_widget=this.options.wrap_widget||this.wrap_widget,this.wrap_choice=a.bind(this._wrap_choice,this,this.options.wrap_choice||this.wrap_choice),this.el=this.wrap_widget(),this.elms=this._map_elements(),b.hide(),b.insert({after:this.el}),this.elms.input.setValue(b.getValue()),this.elms.input.writeAttribute("placeholder",this.options.lang_placeholder),b.hasClassName("required")?(this.elms.validation_input=new Element("input",{id:"validation-"+b.name,type:"hidden","class":"required",title:"Fake input for validation"}),this.el.insert({after:this.elms.validation_input})):this.elms.validation_input=null,this.el.addClassName("of"),this.options.cls&&this.el.addClassName(this.options.cls),this.el.addClassName(this.options.multiselect?"of-st-multiselect":"of-st-singleselect"),this.paginator=new e({el:this.elms.result_items,treshold:50}),this.paginator.bind("paginator:page",function(){this._lookup(this.last_term(),this._search.offset)},this),this._exclude_ids=this.options.data_sugg_exclude,this.elms.input.on("keyup",function(){var a=f.term();a!==f.last_term()&&(f._lookup(a),""===a&&f.trigger("search-cleared"))}),this.elms.result.on("click",".of-choice",function(a,b){f._pick(b.retrieve("data").id,b,!0)}),this.elms.result.on("mouseover",".of-choice",function(a,b){f._choice.items[f._choice.pos]&&f._choice.items[f._choice.pos].removeClassName("of-choice-current"),f._choice.pos=f._choice.posindex[b.retrieve("data").id],f._choice.items[f._choice.pos].addClassName("of-choice-current")}),this._blur_listener=$(document.body).on("click",function(a,b){b.match("html *")&&!b.descendantOf(f.el)&&b!==f.el&&(f.trigger("search-blur"),f._blur_listener.stop())}),this._blur_listener.stop(),this.elms.input.on("focus",function(){f.trigger("search-focus"),f._blur_listener.start()}),$(this.elms.input).on("keydown",function(a){f._hotkey_down(a.keyCode,a)}),$(this.elms.input).on("keyup",function(a){f._hotkey_up(a.keyCode,a)}),this.el.on("click",".ob-select-all a",function(a){f.select_all(a)}),this.bind("select",function(){this.elms.validation_input&&(this.elms.validation_input.value="populated"),this._blur_listener.stop()}),this.bind("unselect",function(){if(this.elms.validation_input){var a=this.get_selected();this.elms.validation_input.value=a.length?"populated":""}}),this.bind("search-blur",function(){this.el.removeClassName("of-st-suggesting"),this.term(""),this.last_term(null)}),this.bind("search-start",function(){this.el.removeClassName("of-st-suggesting"),this.el.addClassName("of-st-loading")}),this.bind("search-end",function(a,b){this.el.addClassName("of-st-suggesting"),this.el.removeClassName("of-st-loading"),b>0&&(f._choice.pos=0,f._choice.items[f._choice.pos].addClassName("of-choice-current"))}),this.initialize(),this.reset(),this.readonly(this.options.readonly),this.disabled(this.options.disabled),d.watch_ctl(this,this.el),j&&(j(),this.bind("search-blur",j))};return k.prototype.options={},k.prototype.initialize=Prototype.emptyFunction,k.prototype.lookup_parameters=function(){return this.lookup_parameters},k.prototype.wrap_choice=function(a){return Element.make(' <li class="of-choice">'+a+"</li>")},k.prototype.wrap_widget=function(){return Element.make(' <div class="of-search" data-placeholder="'+(this.options.lang_placeholder||" ")+'"><input type="text" class="of-input" /><div class="of-choices"><div class="of-noresults">'+this.options.lang_noresults+'</div><ul class="of-choices-sugg"></ul></div><span class="of-controls"><span class="of-loader"></span></span><div class="of-lock-msg">'+this.options.lang_nothing_selected+"</div></div>")},k.prototype.last_term=function(a){return arguments.length>0?void(this._search.last_term=a):this._search.last_term},k.prototype.term=function(a){return arguments.length>0?void(this.elms.input.value=String(a).strip()):this.elms.input.value.strip()},k.prototype.select=function(b,c){if(a.isUndefined(b.id))throw"Selecting invalid object, missing .id field";this._pick(b.id,this.wrap_choice(b),!!c)},k.prototype.unselect=function(a,b){if(!this.readonly()&&!this.disabled()&&this._selected[a]){var c=this._selected[a].retrieve("data");if(!c.perm){var d=this._selected[a];delete this._selected[a],this.trigger("unselect",a,d,!!b)}}},k.prototype.clear=function(){if(!this.disabled()&&!this.readonly()){var a;for(a in this._selected)this._selected.hasOwnProperty(a)&&this.unselect(a);this.term(""),this.last_term(null)}},k.prototype.reset=function(){if(!this.disabled()&&!this.readonly()){this.clear();var a,b=this.options.data_selected.length;for(a=0;b>a;a++)this.select(this.options.data_selected[a])}},k.prototype.focus=function(a){this._focus||(this._focus=function(){try{this.elms.input.focus()}catch(a){}}.bind(this)),a?setTimeout(this._focus,100):this._focus()},k.prototype.readonly=function(a){return arguments.length>0?void(a?this.el.addClassName("of-st-readonly"):this.el.removeClassName("of-st-readonly")):this.el.hasClassName("of-st-readonly")},k.prototype.disabled=function(a){return arguments.length>0?void(a?(this.term(""),this.el.removeClassName("of-st-suggesting"),this.elms.input.disabled=!0,this.el.addClassName("of-st-disabled")):(this.elms.input.disabled=!1,this.el.removeClassName("of-st-disabled"))):this.el.hasClassName("of-st-disabled")},k.prototype.is_selected=function(b){return a.isUndefined(this._selected[b])},k.prototype.num_selected=function(){return a.keys(this._selected).length},k.prototype.get_selected=function(){var a,b=[];for(a in this._selected)this._selected.hasOwnProperty(a)&&b.push(this._selected[a].retrieve("data"));return b},k.prototype.is_loading=function(){return this.el.hasClassName("of-st-loading")},k.prototype.is_suggesting=function(){return this.el.hasClassName("of-st-suggesting")},k.prototype.select_all=function(){if(this._can_select())for(var a,b=this._choice.items.length;b;)a=this._choice.items[b--],this._pick(a.retrieve("data").id,a,!1)},k.prototype._can_select=function(){return!this.disabled()&&!this.readonly()},k.prototype._select_input=function(){Prototype.Browser.IE||this.elms.input.select()},k.prototype._prepare_term=function(b){var c=this;if(b=(b||"").strip(),null!==this.options.term_delimiter)switch(b=b.split(this.options.term_delimiter),b=a.map(b,function(a){return c.options.threshold(a.strip())}),b=a.compact(b),b=a.uniq(b),b.length){case 0:b=null;break;case 1:b=null===b[0]?null:b}else b=this.options.threshold(b.strip());return b},k.prototype._pick=function(a,b,c){if(this._can_select(b.retrieve("data"))&&!this._selected[a]){var d=this._choice.items.length;if(!this.options.multiselect||b.retrieve("data").exclusive){var e;for(e in this._selected)this._selected.hasOwnProperty(e)&&this.unselect(e)}this._selected[a]=b.remove(),this._choice.items=this._choice.items.without(b),this._multikey_held&&this._choice.items.length||this.el.removeClassName("of-st-suggesting"),c&&this.options.multiselect&&this.elms.input.focus(),b.removeClassName("of-choice-current"),this._choice.pos>0&&(this._choice.pos=Math.min(this._choice.pos,this._choice.items.length-1),this._choice.items[this._choice.pos].addClassName("of-choice-current")),d!==this._choice.items.length&&this._index_result_pos(),this._selected[a]._input.disabled=!1,this.trigger("select",a,b,!!c)}},k.prototype._suggest=function(b,c,d){b=a.isArray(b)?b:[],d||this.elms.result_items.update(),b.length?(this.el.removeClassName("of-st-noresults"),b.length>1?this.el.removeClassName("of-st-singleresult"):this.el.addClassName("of-st-singleresult")):(this.el.removeClassName("of-st-singleresult"),this.el.addClassName("of-st-noresults"));var e,f,g=b.slice(),h=document.createDocumentFragment();for(e=0,f=g.length;f>e;e++)h.appendChild(this.wrap_choice(g[e],c));this.elms.result_items.appendChild(h),this._choice.pos=null,this._choice.items=this.elms.result_items.select(".of-choice"),this._index_result_pos()},k.prototype._lookup=function(b,c,d){var e,f=this;c=c||0,e=d?b:this._prepare_term(b),null!==e&&(this.last_term(b),null!==this._search.timer&&(clearTimeout(this._search.timer),this._search.timer=null),this._search.request&&(this._search.request.abort(),this._search.request=null),this._search.timer=setTimeout(function(){f.trigger("search-start",e);var b=a.keys(f._selected);b=a.union(f._exclude_ids,b);var d={term:e,offset:c,limit:f.options.num_results};d=a.extend(d,f.options.lookup_parameters,f.lookup_parameters()),d.constraints=d.constraints||{},d.constraints.exclude=b,d={p:JSON.stringify(d)},f._search.request=new Ajax.Request(f.options.url,{method:"post",parameters:d,onException:function(a){throw console.warn("Finder lookup request failed",a.stack),f.trigger("search-end",null,null),a},onSuccess:function(b){var d=(b.responseJSON.meta,b.responseJSON&&b.responseJSON.choices||[]);d=a.map(d,f.options.parse_choice),f._suggest(d,e,0!==c),f.trigger("search-end",e,d.length)}})},this.options.delay))},k.prototype._index_result_pos=function(){var a,b=this._choice.items.length;for(this._choice.posindex={},a=0;b>a;a++)this._choice.posindex[this._choice.items[a].retrieve("data").id]=a},k.prototype._hotkey_down=function(a,b){switch(a){case Event.KEY_ESC:this.is_suggesting()&&b.stop(),this.term(""),this.trigger("search-blur");break;case Event.KEY_RETURN:if(this.is_suggesting()){b.stop();var c=this._choice.items[this._choice.pos];this._pick(c.retrieve("data").id,c,!0)}break;case Event.KEY_UP:case Event.KEY_DOWN:if(this.is_suggesting()){null===this._choice.pos?this._choice.pos=0:(this._choice.items[this._choice.pos].removeClassName("of-choice-current"),this._choice.pos+=a===Event.KEY_UP?-1:1),this._choice.pos=Math.max(0,Math.min(this._choice.pos,this._choice.items.length-1));var d=this._choice.items[this._choice.pos],e=this.elms.result_items,f=20;d.addClassName("of-choice-current"),d.offsetTop-e.scrollTop+f>e.offsetHeight&&(e.scrollTop=d.offsetTop-e.offsetHeight+f),d.offsetTop-d.offsetHeight-e.scrollTop-f<0&&(e.scrollTop=d.offsetTop-d.offsetHeight-f)}else a===Event.KEY_DOWN&&this._lookup("",0,!0);break;case g:this._multikey_held=!0}},k.prototype._hotkey_up=function(a){a===g&&(this._multikey_held=!1)},k.prototype._map_elements=function(){var a={};return a.input=this.el.select(".of-input").first(),a.result=this.el.select(".of-choices").first(),a.noresults=this.el.select(".of-noresults").first(),a.result_items=this.el.select(".of-choices-sugg").first(),a.controls=this.el.select(".of-controls").first(),a},k.prototype._wrap_choice=function(a,b,c){var d=$(a.call(this,b,c));return b.hasOwnProperty("id")&&(d.store("data",b),d.data("id",b.id),d._input=new Element("input",{type:"hidden",value:b.id,name:this.options.name,disabled:!0}),d.insert(d._input)),d},k.extend=b,a.extend(k.prototype,c),k}),define("app/Deprecated/UI/Picker/Picker",["require","app/Deprecated/lib/cd-prototype","./Finder"],function(require){var a=(require("app/Deprecated/lib/cd-prototype"),require("./Finder")),b=a.extend({options:{columns:0,browse:!1,showall:!1,readonly:!1,disabled:!1,get_term:function(){return""},lang_nothing_selected:"Nothing selected"},initialize:function(){var a=this;this.el.addClassName("op"),this.options.columns=parseInt(this.options.columns,10)||0,this.options.multiselect&&this.options.columns>1&&this.el.addClassName("op-columned op-columned-"+this.options.columns),this.options.browse&&this.elms.noresults.insert('<a href="#browse" data-action="browse">Browse all</a>'),this.options.showall&&(this.options.browse=!1),this.options.multiselect?this.elms.selected.on("click",".of-choice-cls",function(b,c){a.unselect(c.up(".of-choice").retrieve("data").id,!0)}):this.elms.selected.on("click",".of-choice",function(b,c){a.unselect(c.retrieve("data").id,!0)}),this.bind("full",function(a){a?this.el.addClassName("op-st-full"):this.el.removeClassName("op-st-full")}),this.options.multiselect||(this.bind("search-focus",function(){""===this.term()&&this._lookup("",0,!0)}),this.bind("search-cleared",function(){this.is_suggesting()&&this._lookup("",0,!0)})),this.bind("action:showall",this.showall),this.bind("select",function(a,b){var c=b.retrieve("data"),d=this.num_selected();(c.exclusive||!this.options.multiselect)&&(this.full(!0),this.last_term(null),this.term("")),this.el.addClassName("op-st-selected"),this.elms.selected.insert(b),this.options.multiselect&&(this.elms.selected.scrollTop=this.elms.selected.scrollHeight+this.elms.selected.offsetHeight),1===d?this.el.addClassName("op-st-oneselected"):this.el.removeClassName("op-st-oneselected")}),this.bind("unselect",function(b,c,d){var e=c.retrieve("data"),f=this.num_selected();if(0===f&&this.el.removeClassName("op-st-selected"),1===f?this.el.addClassName("op-st-oneselected"):this.el.removeClassName("op-st-oneselected"),!this.full()||!e.exclusive&&this.options.multiselect||this.full(!1),d&&this.focus(!0),!this.options.multiselect&&this.options.showall){var g=a.options.get_term(e);a.term(g),a._lookup(g),a._select_input()}c.remove()})},showall:function(){this.focus(!0),this._lookup("",0,!0)},full:function(a){return arguments.length>0?(a=!!a,a?this.el.addClassName("op-st-full"):this.el.removeClassName("op-st-full"),this.trigger("full",a),void 0):this.el.hasClassName("op-st-full")},wrap_widget:function(){var b=Element.make(' <div><ul class="op-selected"></ul><ins class="finder-placeholder"></ins></div>');return b.select(".finder-placeholder").first().replace(a.prototype.wrap_widget.apply(this,arguments)),this.options.showall&&b.select(".of-controls").first().insert({top:'<a href="#show-all" data-action="showall" class="op-showall"></a>'}),this.options.browse&&b.select(".of-controls").first().insert({top:'<a href="#browse" data-action="browse" class="i-search op-browse"></a>'}),b},_can_select:function(){return a.prototype._can_select.apply(this,arguments)&&!this.full()},_map_elements:function(b){var c=a.prototype._map_elements.call(this,b);return c.selected=this.el.select(".op-selected").first(),c}});return b}),define("text!app/Deprecated/UI/Picker/Templates/browser.html",[],function(){return'<div>\n    <div class="ob-left">\n        <div class="ob-left-top">\n            <h1>Search & Filter</h1>\n            <ins class="finder-placeholder"></ins>\n        </div>\n        <div class="ob-filters">\n            <ul class="ob-filter-choices"></ul>\n            <div class="ob-filter"><!-- filter form --></div>\n            <ul class="ob-filter-options"><!-- filters list --></ul>\n        </div>\n    </div>\n    <div class="ob-mid">\n        <h1>Results </h1>\n        <span class="ob-select-all"><a href="#" data-action="select-all">Select all</a></span>\n        <div class="ob-choices">\n            <div class="ob-noresults">No results</div>\n            <ul class="ob-choices-sugg scrl-mini scrl-noarrs"></ul>\n            <div class="ob-overlay">\n                <ins class="uic-prg-spinner"></ins>\n            </div>\n        </div>\n    </div>\n    <div class="ob-right">\n        <h1>Added </h1>\n        <ul class="ob-selected"></ul>\n        <div class="ob-buttons">\n            <input type="button" value="Done" data-action="submit" class="btn btn-ok btn-s1" />\n        </div>\n    </div>\n</div>'}),define("app/Deprecated/UI/Picker/Browser",["require","underscore","app/Deprecated/lib/cd-prototype","app/Deprecated/UI/Paginator/VScroll","./Finder","text!./Templates/browser.html"],function(require){var a=require("underscore"),b=(require("app/Deprecated/lib/cd-prototype"),require("app/Deprecated/UI/Paginator/VScroll")),c=require("./Finder"),d=require("text!./Templates/browser.html"),e=c.extend({options:{action:"",multiselect:!0,term:null,filters:null,filters_applied:null,lang_startselecting:"Select users and groups on left side",lang_add_filter:"Add filter"},initialize:function(){var a=this;this.el.addClassName("ob"),this.filters=this.options.filters||[],this.filters_applied=this.options.filters_applied||{};for(var c=this.filters.length;c--;)this.filters[c].bind("filter:apply",this.filter_apply,this),this.filters[c].bind("filter:invalid",this.filter_invalid,this),this.filters[c].render();var d;for(d in this.filters_applied)this.filters_applied.hasOwnProperty(d)&&this.filters[d]&&this.filters[d].value(this.filters_applied[d]);this.edited_filter=null,this.render_filters(),this.bind("filters-changed",function(){var a=this.last_term();a?this._lookup(a):this._lookup("",0,!0)}),this.bind("action:filter-add",this.filter_add,this),this.bind("action:filter-edit",this.filter_edit,this),this.bind("action:filter-remove",this.filter_remove,this),this.bind("action:filter-removeall",this.filter_removeall,this);new b({el:this.elms.result_scrollable,treshold:50});this.elms.selected.on("click",".of-choice-cls",function(b,c){a.unselect(c.up(".of-choice").retrieve("data").id)}),this.bind("search-cleared",function(){this._lookup("",0,!0)}),this.bind("select",function(a,b){b._input.disabled=!1,this.el.addClassName("ob-st-selected"),this.elms.selected.insert(b),this.elms.selected.scrollTop=this.elms.selected.scrollHeight+this.elms.selected.offsetHeight,this._set_selected_count(this.num_selected()),1===this.num_selected()?this.el.addClassName("ob-st-oneselected"):this.el.removeClassName("ob-st-oneselected")}),this.bind("unselect",function(a,b){var c=this.term(),d=this.num_selected();0===d&&this.el.removeClassName("ob-st-selected"),this._set_selected_count(this.num_selected()),b.remove(),""===c?this._lookup("",0,!0):this._lookup(c)}),this.options.term?(this.elms.input.setValue(this.options.term),this._lookup(this.options.term),this.elms.input.focus()):this._lookup("",0,!0)},_map_elements:function(a){var b=c.prototype._map_elements.call(this,a);return b.result=this.el.select(".ob-choices").first(),b.result_items=this.el.select(".ob-choices-sugg").first(),b.result_scrollable=b.result_items,b.selected=this.el.select(".ob-selected").first(),b.results_count=new Element("span"),this.el.select(".ob-mid h1").first().insert(b.results_count),b.selected_count=new Element("span"),this.el.select(".ob-right h1").first().insert(b.selected_count),b.filter_add=this.el.select(".ob-filter-add").first(),b.filter_container=this.el.select(".ob-filter").first(),b.filter_choices=this.el.select(".ob-filter-choices").first(),b.filter_options=this.el.select(".ob-filter-options").first(),b.filters_applied=this.el.select(".ob-filter-applied").first(),b},_set_result_count:function(a){this.elms.results_count.update("("+a+")")},_set_selected_count:function(a){this.elms.selected_count.update("("+a+")")},_hotkey_down:function(a){c.prototype._hotkey_down.apply(this,arguments),a===Event.KEY_ESC&&(this.el.removeClassName("ob-st-filter-edit"),this.el.removeClassName("ob-st-pickfilter"))},lookup_parameters:function(){return{constraints:a.extend({},this.options.lookup_parameters.constraint||{},this.filter_args())}},filter_args:function(){var a,b={};for(a in this.filters_applied)this.filters_applied.hasOwnProperty(a)&&(b[this.filters[a].argname]=this.filters_applied[a]);return b},render_filters:function(){1===this.filters.length&&(this.edited_filter=0,this.el.addClassName("ob-st-onefilter")),this.filters[this.edited_filter]?(this.elms.filter_container.insert(this.filters[this.edited_filter].el),this.el.addClassName("ob-st-filter-edit"),this.filters[this.edited_filter].focus()):(this.elms.filter_container.update(),this.el.removeClassName("ob-st-filter-edit"));var a,b,c=document.createDocumentFragment(),d=document.createDocumentFragment();for(this.elms.filter_choices.update(),this.elms.filter_options.update(),a=0,b=this.filters.length;b>a;a++)a!==this.edited_filter&&this.filters_applied[a]&&d.appendChild(this.wrap_filter_choice(a,this.filters[a])),this.filters.length>1&&a!==this.edited_filter&&!this.filters_applied[a]&&c.appendChild(this.wrap_filter_option(a,this.filters[a]));this.elms.filter_choices.appendChild(d),this.elms.filter_options.appendChild(c)},filter_add:function(a){this.filter_edit(a)},filter_edit:function(a){this.edited_filter=a,this.render_filters()},filter_remove:function(a){this.filters_applied.hasOwnProperty(a)&&delete this.filters_applied[a],this.render_filters(),this.trigger("filters-changed")},filter_removeall:function(){this.filters_applied=[],this.edited_filter=null,this.render_filters(),this.trigger("filters-changed")},filter_apply:function(a){this.filters_applied[this.edited_filter]=a.value(),this.edited_filter=null,this.render_filters(),this.trigger("filters-changed")},filter_invalid:function(a){console.warn(a,a.value(),"is invalid")},filter_cancel:function(){this.filter_toggle(!1),this.edited_filter=null,this.render_filters()},wrap_filter_option:function(a,b){return Element.make(' <li><a href="#add-filter" data-action="filter-add:'+a+'">'+b.title+"</a></li>")},wrap_filter_choice:function(a,b){return Element.make(' <li class="ob-filter-choice"><div class="of-choice-wrp"><h3 class="of-choice-title">'+b.title+": <span>"+b.label()+'</span></h3><span class="of-choice-cls" data-action="filter-remove:'+a+'" title="Remove">&times;</span></div></li>')},wrap_widget:function(){var a=Element.make(d);return a.select(".finder-placeholder").first().replace(c.prototype.wrap_widget.apply(this,arguments)),a},select_all_members:function(){}});return e}),define("app/Deprecated/UI/Initializer",["require","underscore","app/Deprecated/lib/ns/resolve"],function(require){function a(a,b){if(!a)throw new Error("No element for reading options");var c={};return e.each(a.data(),function(a,b){0===b.indexOf("yi-")&&(c[b.slice(3)]=a)}),e.each(b,function(a,d){var h=null;if(e.isFunction(b[d]))h=b[d];else{var i=String(b[d]);h=g[i.toLowerCase()]||f(i)||function(){return b[d]}}e.isFunction(h)&&(c[d]=h(c[d]))}),c}function b(a,b){return(a?$(a).select("*[data-yi]"):$$("*[data-yi]")).select(function(a){return!b||Object.isUndefined(a.ui_handler)})}function c(b,c){return b=$(b),c=c||{},c.handler=c.handler||f(b.data("yi")),c.handler&&e.isFunction(c.handler)?e.isUndefined(b.ui_handler)&&(c=e.extend(a(b,c.handler.prototype.uioptions||{}),c),b.ui_handler=new c.handler(b,c)):(console.warn("Invalid YI handler for",b),b.ui_handler=null),b.ui_handler}function d(a){var d=[];return b(a,!0).each(function(a){try{d.push(c(a,{handler:f(a.data("yi"))}))}catch(b){console.warn("Failed to init YI for ",a,b)}}),d}var e=require("underscore"),f=require("app/Deprecated/lib/ns/resolve"),g={json:function(a){return a.evalJSON(a)},"boolean":function(a){return a=a.toLowerCase(),"1"===a||"true"===a||"yes"===a}};return{find:b,init:c,initall:d}}),define("app/modules-cache",["require","jquery","underscore","handlebars","clsextend","dombind","uicore/lib/base64","app/Deprecated/lib/ns/ns","app/Deprecated/lib/ns/resolve","app/Deprecated/lib/cd-prototype","app/Deprecated/lib/backbone-ported","app/Deprecated/lib/cd-pagebus","app/Deprecated/lib/storage","app/Deprecated/lib/readonly","app/Deprecated/MVC/Ajax/Request","app/Deprecated/MVC/Ajax/ResponseHandler","app/Deprecated/MVC/BaseController","app/Deprecated/MVC/BaseModel","app/Deprecated/MVC/BaseCollection","app/Deprecated/MVC/BaseView","app/Deprecated/MVC/Template/View","app/Deprecated/MVC/Template/Loader","app/Deprecated/MVC/widget","app/Deprecated/MVC/HBHelper","app/Deprecated/MVC/Store","app/Deprecated/UI/Helpers/Viewport","app/Deprecated/UI/Helpers/Dropdown","app/Deprecated/UI/Helpers/Promise/Action","app/Deprecated/UI/Helpers/Icons","app/Deprecated/UI/Helpers/Viewport","uicore/Helpers/Dates","uicore/Helpers/Promise","uicore/Helpers/Stylesheet","app/Deprecated/UI/Forms/AbstractField","app/Deprecated/UI/Forms/CheckboxField","app/Deprecated/UI/Forms/DateField","app/Deprecated/UI/Forms/PickerField","app/Deprecated/UI/Forms/RecurrenceField","app/Deprecated/UI/Forms/RTEField","app/Deprecated/UI/Forms/SelectField","app/Deprecated/UI/Forms/TextField","app/Deprecated/UI/Grid/List","app/Deprecated/UI/Grid/Table","app/Deprecated/UI/MasonryWall/Wall","uicore/Overlay/Dialog","uicore/Overlay/Bubble","app/Deprecated/UI/Paginator/VScroll","app/Deprecated/UI/Paginator/PageNum","app/Deprecated/UI/Paginator/Continuous","app/Deprecated/UI/Picker/Filter/Match","app/Deprecated/UI/Picker/Filter/Select","app/Deprecated/UI/Picker/Picker","app/Deprecated/UI/Picker/Browser","app/Deprecated/UI/Initializer"],function(require){function a(a,d){c(a,d,b)
}require("app/Deprecated/lib/cd-prototype");var b={},c=require("app/Deprecated/lib/ns/ns");return a("CD.Backbone",require("app/Deprecated/lib/backbone-ported")),a("CD.PageBus",require("app/Deprecated/lib/cd-pagebus")),a("CD.LocalStorage",require("app/Deprecated/lib/storage")),a("CD.Base64",require("uicore/lib/base64")),a("CD.clsextend",require("clsextend")),a("CD.Polyfills.placeholder",require("app/Deprecated/lib/polyfills/input.placeholder")),a("CD.Ajax.Request",require("app/Deprecated/MVC/Ajax/Request")),a("CD.Ajax.ResponseHandler",require("app/Deprecated/MVC/Ajax/ResponseHandler")),a("CD.BaseController",require("app/Deprecated/MVC/BaseController")),a("CD.BaseModel",require("app/Deprecated/MVC/BaseModel")),a("CD.BaseController",require("app/Deprecated/MVC/BaseController")),a("CD.BaseCollection",require("app/Deprecated/MVC/BaseCollection")),a("CD.BaseView",require("app/Deprecated/MVC/BaseView")),a("CD.Template.View",require("app/Deprecated/MVC/Template/View")),a("CD.Template.Loader",require("app/Deprecated/MVC/Template/Loader")),a("CD.Widget",require("app/Deprecated/MVC/widget")),a("CD.HBHelper",require("app/Deprecated/MVC/HBHelper")),a("CD.Store",require("app/Deprecated/MVC/Store")),a("CD.UI.Helpers",{Viewport:require("app/Deprecated/UI/Helpers/Viewport"),Dates:require("uicore/Helpers/Dates"),Dropdown:require("app/Deprecated/UI/Helpers/Dropdown"),Icons:require("app/Deprecated/UI/Helpers/Icons"),Stylesheet:require("uicore/Helpers/Stylesheet"),Promise:require("uicore/Helpers/Promise")}),a("CD.UI.Helpers.Promise.Action",require("app/Deprecated/UI/Helpers/Promise/Action")),a("CD.UI.Forms.AbstractField",require("app/Deprecated/UI/Forms/AbstractField")),a("CD.UI.Forms.CheckboxField",require("app/Deprecated/UI/Forms/CheckboxField")),a("CD.UI.Forms.DateField",require("app/Deprecated/UI/Forms/DateField")),a("CD.UI.Forms.PickerField",require("app/Deprecated/UI/Forms/PickerField")),a("CD.UI.Forms.RecurrenceField",require("app/Deprecated/UI/Forms/RecurrenceField")),a("CD.UI.Forms.RTEField",require("app/Deprecated/UI/Forms/RTEField")),a("CD.UI.Forms.SelectField",require("app/Deprecated/UI/Forms/SelectField")),a("CD.UI.Forms.TextField",require("app/Deprecated/UI/Forms/TextField")),a("CD.UI.Grid.List",require("app/Deprecated/UI/Grid/List")),a("CD.UI.Grid.Table",require("app/Deprecated/UI/Grid/Table")),a("CD.UI.MasonryWall.Wall",require("app/Deprecated/UI/MasonryWall/Wall")),a("CD.UI.Overlay",{Dialog:require("uicore/Overlay/Dialog"),Bubble:require("uicore/Overlay/Bubble")}),a("CD.UI.Paginator.VScroll",require("app/Deprecated/UI/Paginator/VScroll")),a("CD.UI.Paginator.PageNum",require("app/Deprecated/UI/Paginator/PageNum")),a("CD.UI.Paginator.Continuous",require("app/Deprecated/UI/Paginator/Continuous")),a("CD.UI.Picker.Filter.Match",require("app/Deprecated/UI/Picker/Filter/Match")),a("CD.UI.Picker.Filter.Select",require("app/Deprecated/UI/Picker/Filter/Select")),a("CD.UI.Picker.Picker",require("app/Deprecated/UI/Picker/Picker")),a("CD.UI.Picker.Browser",require("app/Deprecated/UI/Picker/Browser")),a("CD.UI.Initializer",require("app/Deprecated/UI/Initializer")),function(a){b.CD.Handlebars=require("handlebars"),a._=require("underscore"),a.CD=b.CD,a.ns=require("app/Deprecated/lib/ns/ns"),a.resolve=require("app/Deprecated/lib/ns/resolve"),a.define_readonly=require("app/Deprecated/lib/readonly")}}),require.syncdefine()(["app/modules-cache"],function(a){a(window)}),CD="undefined"!=typeof CD?CD:{},CD.ACTIVITY_TYPE_SYSTEM=1,CD.ACTIVITY_TYPE_ITEM=2,CD.ACTIVITY_TYPE_DATABASE=6,CD.ACTIVITY_TYPE_DATABASE_RECORD=22,CD.ACTIVITY_TYPE_EVENT=7,CD.ACTIVITY_TYPE_MILESTONE=8,CD.ACTIVITY_TYPE_TASK=9,CD.ACTIVITY_TYPE_CATEGORY=20,CD.ACTIVITY_TYPE_WORKSPACE=21,CD.ACTIVITY_TYPE_DB_RECORD=22,CD.ACTIVITY_TYPE_USER=23,CD.ACTIVITY_TYPE_STATUS_UPDATE=24,CD.ACTIVITY_TYPE_COMPANY_USER=25,CD.ACTIVITY_TYPE_COMPANY=26,CD.ACTIVITY_TYPE_TASKLIST=32,CD.ACTIVITY_TYPE_ASSET=33,CD.ACTIVITY_TYPE_AUDITLOG=34,CD.ACTIVITY_TYPE_REPORT=35,CD.ITEM_TYPE_WIKI=0,CD.ITEM_TYPE_ONLINE_DOC=1,CD.ITEM_TYPE_SPREADSHEET=2,CD.ITEM_TYPE_LOCAL_FILE=3,CD.ITEM_TYPE_BOOKMARK=4,CD.ITEM_TYPE_DISCUSSION=5,CD.ITEM_TYPE_DB=6,CD.ITEM_TYPE_EVENTS=7,CD.ITEM_TYPE_MILESTONE=8,CD.ITEM_TYPE_TASK=9,CD.ITEM_TYPE_BLOGENTRY=10,CD.ITEM_TYPE_FORUMPOST=11,CD.ITEM_TYPE_FOLDER=20,CD.ITEM_TYPE_WORKSPACE=21,CD.ITEM_TYPE_DB_RECORD=22,CD.ITEM_TYPE_USER=23,CD.ITEM_TYPE_STATUS_UPDATE=24,CD.ITEM_TYPE_COMPANY_USER=25,CD.ITEM_TYPE_COMPANY=26,CD.ITEM_TYPE_TASKLIST=32,CD.ITEM_TYPE_ASSET=33,CD.ITEM_TYPE_AUDITLOG=34,CD.ITEM_TYPE_REPORT=35,CD.AGGREGATE_TYPE_ITEM=1,CD.AGGREGATE_TYPE_WIKI=2,CD.AGGREGATE_TYPE_DISCUSSION=3,CD.AGGREGATE_TYPE_BOOKMARK=4,CD.AGGREGATE_TYPE_BLOGENTRY=5,CD.AGGREGATE_TYPE_FORUMPOST=6,CD.AGGREGATE_TYPE_EVENT=7,CD.AGGREGATE_TYPE_PROJECT=8,CD.AGGREGATE_TYPE_DBREC=9,CD.AGGREGATE_TYPE_MICROBLOG=10,CD.AGGREGATE_TYPE_SPACE=11,CD.AGGREGATE_TYPE_DB=12,cd_static_url=window.cd_static_url||"https://app.imeetcentral.com","function"==typeof Calendar&&"undefined"!=typeof common_tasks&&"undefined"!=typeof ajax_params);else{if("undefined"==typeof spid)var spid="";if("undefined"==typeof CD){var r=parseInt(1e8*rand());document.write('<script type="text/javascript" src="'+cd_static_url+"/s.v"+r+'/js/cc-external.js"></script>')}else{var r=CD&&CD.releaseNumber?CD.releaseNumber.css:".v"+parseInt(1e8*rand());document.write('<link rel="stylesheet" type="text/css" href="'+cd_static_url+"/s"+r+'/js/calendar/calendar-blue.css" />'),document.write('<link rel="stylesheet" type="text/css" href="'+cd_static_url+"/s"+r+'/css/app/isolated/webform.css" />')}}if(Calendar=function(a,b,c,d){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=c||null,this.onClose=d||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof a?a:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=b,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,"undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);for(var e=new Array,f=8;f>0;)e[--f]=Calendar._DN[f].substr(0,Calendar._SDN_len);Calendar._SDN=e,"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3),e=new Array;for(var f=12;f>0;)e[--f]=Calendar._MN[f].substr(0,Calendar._SMN_len);Calendar._SMN=e}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie7=Calendar.is_ie&&/msie 7\.0/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(a){var b=0,c=0,d=/^div$/i.test(a.tagName);d&&a.scrollLeft&&(b=a.scrollLeft),d&&a.scrollTop&&(c=a.scrollTop);var e={x:a.offsetLeft-b,y:a.offsetTop-c};if(a.offsetParent){var f=this.getAbsolutePos(a.offsetParent);e.x+=f.x,e.y+=f.y}return e},Calendar.isRelated=function(a,b){var c=b.relatedTarget;if(!c){var d=b.type;"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement)}for(;c;){if(c==a)return!0;c=c.parentNode}return!1},Calendar.removeClass=function(a,b){if(a&&a.className){for(var c=a.className.split(" "),d=new Array,e=c.length;e>0;)c[--e]!=b&&(d[d.length]=c[e]);a.className=d.join(" ")}},Calendar.addClass=function(a,b){Calendar.removeClass(a,b),a.className+=" "+b},Calendar.getElement=function(a){for(var b=Calendar.is_ie?window.event.srcElement:a.currentTarget;1!=b.nodeType||/^div$/i.test(b.tagName);)b=b.parentNode;return b},Calendar.getTargetElement=function(a){for(var b=Calendar.is_ie?window.event.srcElement:a.target;1!=b.nodeType;)b=b.parentNode;return b},Calendar.stopEvent=function(a){return a||(a=window.event),Calendar.is_ie?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation()),!1},Calendar.addEvent=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!0):a["on"+b]=c},Calendar.removeEvent=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!0):a["on"+b]=null},Calendar.createElement=function(a,b){var c=null;return c=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a),"undefined"!=typeof b&&b.appendChild(c),c},Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),is_ie&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))},Calendar.findMonth=function(a){return"undefined"!=typeof a.month?a:"undefined"!=typeof a.parentNode.month?a.parentNode:null},Calendar.findYear=function(a){return"undefined"!=typeof a.year?a:"undefined"!=typeof a.parentNode.year?a.parentNode:null},Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return!1;var a=a,b=a.activeDiv,c=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite"),a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var d=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(d,"active"),a.activeMonth=d;var e=c.style;if(e.display="block",b.navtype<0)e.left=b.offsetLeft+"px";else{var f=c.offsetWidth;"undefined"==typeof f&&(f=50),e.left=b.offsetLeft+b.offsetWidth-f+"px"}e.top=b.offsetTop+b.offsetHeight+"px"},Calendar.showYearsCombo=function(a){var b=Calendar._C;if(!b)return!1;var b=b,c=b.activeDiv,d=b.yearsCombo;b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite"),b.activeYear&&Calendar.removeClass(b.activeYear,"active"),b.activeYear=null;for(var e=b.date.getFullYear()+(a?1:-1),f=d.firstChild,g=!1,h=12;h>0;--h)e>=b.minYear&&e<=b.maxYear?(f.innerHTML=e,f.year=e,f.style.display="block",g=!0):f.style.display="none",f=f.nextSibling,e+=a?b.yearStep:-b.yearStep;if(g){var i=d.style;if(i.display="block",c.navtype<0)i.left=c.offsetLeft+"px";else{var j=d.offsetWidth;"undefined"==typeof j&&(j=50),i.left=c.offsetLeft+c.offsetWidth-j+"px"}i.top=c.offsetTop+c.offsetHeight+"px"}},Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event),Calendar.removeClass(el,"active"),(target==el||target.parentNode==el)&&Calendar.cellClick(el,ev);var mon=Calendar.findMonth(target),date=null;if(mon)date=new Date(cal.date),mon.month!=date.getMonth()&&(date.setMonth(mon.month),cal.setDate(date),cal.dateClicked=!1,cal.callHandler());else{var year=Calendar.findYear(target);year&&(date=new Date(cal.date),year.year!=date.getFullYear()&&(date.setFullYear(year.year),cal.setDate(date),cal.dateClicked=!1,cal.callHandler()))}with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)},Calendar.tableMouseOver=function(a){var b=Calendar._C;if(b){var c=b.activeDiv,d=Calendar.getTargetElement(a);if(d==c||d.parentNode==c?(Calendar.addClass(c,"hilite active"),Calendar.addClass(c.parentNode,"rowhilite")):(("undefined"==typeof c.navtype||50!=c.navtype&&(0==c.navtype||Math.abs(c.navtype)>2))&&Calendar.removeClass(c,"active"),Calendar.removeClass(c,"hilite"),Calendar.removeClass(c.parentNode,"rowhilite")),a||(a=window.event),50==c.navtype&&d!=c){var e,f=Calendar.getAbsolutePos(c),g=c.offsetWidth,h=a.clientX,i=!0;h>f.x+g?(e=h-f.x-g,i=!1):e=f.x-h,0>e&&(e=0);for(var j=c._range,k=c._current,l=Math.floor(e/10)%j.length,m=j.length;--m>=0&&j[m]!=k;);for(;l-->0;)i?--m<0&&(m=j.length-1):++m>=j.length&&(m=0);var n=j[m];c.innerHTML=n,b.onUpdateTime()}var o=Calendar.findMonth(d);if(o)o.month!=b.date.getMonth()?(b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite"),Calendar.addClass(o,"hilite"),b.hilitedMonth=o):b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite");else{b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite");var p=Calendar.findYear(d);p&&p.year!=b.date.getFullYear()?(b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),b.hilitedYear=p):b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite")}return Calendar.stopEvent(a)}},Calendar.tableMouseDown=function(a){return Calendar.getTargetElement(a)==Calendar.getElement(a)?Calendar.stopEvent(a):void 0},Calendar.calDragIt=function(a){var b=Calendar._C;if(!b||!b.dragging)return!1;var c,d;Calendar.is_ie?(d=window.event.clientY+document.body.scrollTop,c=window.event.clientX+document.body.scrollLeft):(c=a.pageX,d=a.pageY),b.hideShowCovered();var e=b.element.style;return e.left=c-b.xOffs+"px",e.top=d-b.yOffs+"px",Calendar.stopEvent(a)},Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal)return!1;with(cal.dragging=!1,Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev);cal.hideShowCovered()},Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled)return!1;var cal=el.calendar;if(cal.activeDiv=el,Calendar._C=cal,300!=el.navtype)with(Calendar)50==el.navtype?(el._current=el.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(el,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else cal.isPopup&&cal._dragStart(ev);return-1==el.navtype||1==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==el.navtype||2==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):cal.timeout=null,Calendar.stopEvent(ev)},Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(a){var b=Calendar.getElement(a);return Calendar.isRelated(b,a)||Calendar._C||b.disabled?!1:(b.ttip&&("_"==b.ttip.substr(0,1)&&(b.ttip=b.caldate.print(b.calendar.ttDateFormat)+b.ttip.substr(1)),b.calendar.tooltips.innerHTML=b.ttip),300!=b.navtype&&(Calendar.addClass(b,"hilite"),b.caldate&&Calendar.addClass(b.parentNode,"rowhilite")),Calendar.stopEvent(a))},Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return isRelated(el,ev)||_C||el.disabled?!1:(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar&&(el.calendar.tooltips.innerHTML=_TT.SEL_DATE),stopEvent(ev))}},Calendar.cellClick=function(a,b){function c(a){var b=g.getDate(),c=g.getMonthDays(a);b>c&&g.setDate(c),g.setMonth(a)}var d=a.calendar,e=!1,f=!1,g=null;if("undefined"==typeof a.navtype){d.currentDateEl&&(Calendar.removeClass(d.currentDateEl,"selected"),Calendar.addClass(a,"selected"),e=d.currentDateEl==a,e||(d.currentDateEl=a)),d.date.setDateOnly(a.caldate),g=d.date;var h=!(d.dateClicked=!a.otherMonth);h||d.currentDateEl?f=!a.disabled:d._toggleMultipleDate(new Date(g)),h&&d._init(d.firstDayOfWeek,g)}else{if(200==a.navtype)return Calendar.removeClass(a,"hilite"),void d.callCloseHandler();g=new Date(d.date),0==a.navtype&&g.setDateOnly(new Date),d.dateClicked=!1;var i=g.getFullYear(),j=g.getMonth();switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");var k=Calendar._TT.ABOUT;return"undefined"!=typeof k?k+=d.showsTime?Calendar._TT.ABOUT_TIME:"":k='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(k);case-2:i>d.minYear&&g.setFullYear(i-1);break;case-1:j>0?c(j-1):i-->d.minYear&&(g.setFullYear(i),c(11));break;case 1:11>j?c(j+1):i<d.maxYear&&(g.setFullYear(i+1),c(0));break;case 2:i<d.maxYear&&g.setFullYear(i+1);break;case 100:return void d.setFirstDayOfWeek(a.fdow);case 50:for(var l=a._range,m=a.innerHTML,n=l.length;--n>=0&&l[n]!=m;);b&&b.shiftKey?--n<0&&(n=l.length-1):++n>=l.length&&(n=0);var o=l[n];return a.innerHTML=o,void d.onUpdateTime();case 0:if("function"==typeof d.getDateStatus&&d.getDateStatus(g,g.getFullYear(),g.getMonth(),g.getDate()))return!1}g.equalsTo(d.date)?0==a.navtype&&(f=e=!0):(d.setDate(g),f=!0)}f&&b&&d.callHandler(),e&&(Calendar.removeClass(a,"hilite"),b&&d.callCloseHandler())},Calendar.prototype.create=function(a){var b=null;a?(b=a,this.isPopup=!1):(b=document.getElementsByTagName("body")[0],this.isPopup=!0),this.date=this.dateStr?new Date(this.dateStr):new Date;var c=Calendar.createElement("table");this.table=c,c.cellSpacing=0,c.cellPadding=0,c.calendar=this,Calendar.addEvent(c,"mousedown",Calendar.tableMouseDown);var d=Calendar.createElement("div");this.element=d,d.className="calendar",this.isPopup&&(d.style.position="absolute",d.style.display="none"),d.style.zIndex=300500,d.appendChild(c);var e=Calendar.createElement("thead",c),f=null,g=null,h=this,i=function(a,b,c){return f=Calendar.createElement("td",g),f.colSpan=b,f.className="button",0!=c&&Math.abs(c)<=2&&(f.className+=" nav"),Calendar._add_evs(f),f.calendar=h,f.navtype=c,f.innerHTML="<div unselectable='on'>"+a+"</div>",f};g=Calendar.createElement("tr",e);var j=6;this.isPopup&&--j,this.weekNumbers&&++j,i("?",1,400).ttip=Calendar._TT.INFO,this.title=i("",j,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",i("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),g=Calendar.createElement("tr",e),g.className="headrow",this._nav_py=i("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=i("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=i(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=i("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=i("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,g=Calendar.createElement("tr",e),g.className="daynames",this.weekNumbers&&(f=Calendar.createElement("td",g),f.className="name wn",f.innerHTML=Calendar._TT.WK);for(var k=7;k>0;--k)f=Calendar.createElement("td",g),k||(f.navtype=100,f.calendar=this,Calendar._add_evs(f));this.firstdayname=this.weekNumbers?g.firstChild.nextSibling:g.firstChild,this._displayWeekdays();var l=Calendar.createElement("tbody",c);for(this.tbody=l,k=6;k>0;--k){g=Calendar.createElement("tr",l),this.weekNumbers&&(f=Calendar.createElement("td",g));for(var m=7;m>0;--m)f=Calendar.createElement("td",g),f.calendar=this,Calendar._add_evs(f)}this.showsTime?(g=Calendar.createElement("tr",l),g.className="time",f=Calendar.createElement("td",g),f.className="time",f.colSpan=2,f.innerHTML=Calendar._TT.TIME||"&nbsp;",f=Calendar.createElement("td",g),f.className="time",f.colSpan=this.weekNumbers?4:3,function(){function a(a,b,c,d){var e=Calendar.createElement("span",f);if(e.className=a,e.innerHTML=b,e.calendar=h,e.ttip=Calendar._TT.TIME_PART,e.navtype=50,e._range=[],"number"!=typeof c)e._range=c;else for(var g=c;d>=g;++g){var i;i=10>g&&d>=10?"0"+g:""+g,e._range[e._range.length]=i}return Calendar._add_evs(e),e}var b=h.date.getHours(),c=h.date.getMinutes(),d=!h.time24,e=b>12;d&&e&&(b-=12);var i=a("hour",b,d?1:0,d?12:23),j=Calendar.createElement("span",f);j.innerHTML=":",j.className="colon";var k=a("minute",c,0,59),l=null;f=Calendar.createElement("td",g),f.className="time",f.colSpan=2,d?l=a("ampm",e?"pm":"am",["am","pm"]):f.innerHTML="&nbsp;",h.onSetTime=function(){var a,b=this.date.getHours(),c=this.date.getMinutes();d&&(a=b>=12,a&&(b-=12),0==b&&(b=12),l.innerHTML=a?"pm":"am"),i.innerHTML=10>b?"0"+b:b,k.innerHTML=10>c?"0"+c:c},h.onUpdateTime=function(){var a=this.date,b=parseInt(i.innerHTML,10);d&&(/pm/i.test(l.innerHTML)&&12>b?b+=12:/am/i.test(l.innerHTML)&&12==b&&(b=0));var c=a.getDate(),e=a.getMonth(),f=a.getFullYear();a.setHours(b),a.setMinutes(parseInt(k.innerHTML,10)),a.setFullYear(f),a.setMonth(e),a.setDate(c),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var n=Calendar.createElement("tfoot",c);for(g=Calendar.createElement("tr",n),g.className="footrow",f=i(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),f.className="ttip",this.isPopup&&(f.ttip=Calendar._TT.DRAG_TO_MOVE,f.style.cursor="move"),this.tooltips=f,d=Calendar.createElement("div",this.element),this.monthsCombo=d,d.className="combo",k=0;k<Calendar._MN.length;++k){var o=Calendar.createElement("div");o.className=Calendar.is_ie?"label-IEfix":"label",o.month=k,o.innerHTML=Calendar._SMN[k],d.appendChild(o)}for(d=Calendar.createElement("div",this.element),this.yearsCombo=d,d.className="combo",k=12;k>0;--k){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",d.appendChild(p)}this._init(this.firstDayOfWeek,this.date),b.appendChild(this.element)},Calendar._keyEvent=function(a){function b(){l=e.currentDateEl;var a=l.pos;i=15&a,j=a>>4,k=e.ar_days[j][i]}function c(){var a=new Date(e.date);a.setDate(a.getDate()-m),e.setDate(a)}function d(){var a=new Date(e.date);a.setDate(a.getDate()+m),e.setDate(a)}var e=window._dynarch_popupCalendar;if(!e||e.multiple)return!1;Calendar.is_ie&&(a=window.event);var f=Calendar.is_ie||"keypress"==a.type,g=a.keyCode;if(a.ctrlKey)switch(g){case 37:f&&Calendar.cellClick(e._nav_pm);break;case 38:f&&Calendar.cellClick(e._nav_py);break;case 39:f&&Calendar.cellClick(e._nav_nm);break;case 40:f&&Calendar.cellClick(e._nav_ny);break;default:return!1}else switch(g){case 32:Calendar.cellClick(e._nav_now);break;case 27:f&&e.callCloseHandler();break;case 37:case 38:case 39:case 40:if(f){var h,i,j,k,l,m;for(h=37==g||38==g,m=37==g||39==g?1:7,b();;){switch(g){case 37:if(!(--i>=0)){i=6,g=38;continue}k=e.ar_days[j][i];break;case 38:--j>=0?k=e.ar_days[j][i]:(c(),b());break;case 39:if(!(++i<7)){i=0,g=40;continue}k=e.ar_days[j][i];break;case 40:++j<e.ar_days.length?k=e.ar_days[j][i]:(d(),b())}break}k&&(k.disabled?h?c():d():Calendar.cellClick(k))}break;case 13:f&&Calendar.cellClick(e.currentDateEl,a);break;default:return!1}return Calendar.stopEvent(a)},Calendar.prototype._init=function(a,b){var c=new Date,d=c.getFullYear(),e=c.getMonth(),f=c.getDate();this.table.style.visibility="hidden";var g=b.getFullYear();g<this.minYear?(g=this.minYear,b.setFullYear(g)):g>this.maxYear&&(g=this.maxYear,b.setFullYear(g)),this.firstDayOfWeek=a,this.date=new Date(b);{var h=b.getMonth(),i=b.getDate();b.getMonthDays()}b.setDate(1);var j=(b.getDay()-this.firstDayOfWeek)%7;0>j&&(j+=7),b.setDate(j?-j:0),b.setDate(b.getDate()+1);for(var k=this.tbody.firstChild,l=(Calendar._SMN[h],this.ar_days=new Array),m=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,o=0;6>o;++o,k=k.nextSibling){var p=k.firstChild;this.weekNumbers&&(p.className="day wn",p.innerHTML=b.getWeekNumber(),p=p.nextSibling),k.className="daysrow";for(var q,r=!1,s=l[o]=[],t=0;7>t;++t,p=p.nextSibling,b.setDate(q+1)){q=b.getDate();var u=b.getDay();p.className="day",p.pos=o<<4|t,s[t]=p;var v=b.getMonth()==h;if(v)p.otherMonth=!1,r=!0;else{if(!this.showsOtherMonths){p.className="emptycell",p.innerHTML="&nbsp;",p.disabled=!0;continue}p.className+=" othermonth",p.otherMonth=!0}if(p.disabled=!1,p.innerHTML=this.getDateText?this.getDateText(b,q):q,n&&(n[b.print("%Y%m%d")]=p),this.getDateStatus){var w=this.getDateStatus(b,g,h,q);if(this.getDateToolTip){var x=this.getDateToolTip(b,g,h,q);x&&(p.title=x)}w===!0?(p.className+=" disabled",p.disabled=!0):(/disabled/i.test(w)&&(p.disabled=!0),p.className+=" "+w)}p.disabled||(p.caldate=new Date(b),p.ttip="_",!this.multiple&&v&&q==i&&this.hiliteToday&&(p.className+=" selected",this.currentDateEl=p),b.getFullYear()==d&&b.getMonth()==e&&q==f&&(p.className+=" today",p.ttip+=Calendar._TT.PART_TODAY),-1!=m.indexOf(u.toString())&&(p.className+=p.otherMonth?" oweekend":" weekend"))}r||this.showsOtherMonths||(k.className="emptyrow")}this.title.innerHTML=Calendar._MN[h]+", "+g,this.onSetTime(),this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var b=this.datesCells[a],c=this.multiple[a];c&&b&&(b.className+=" selected")}},Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var b=a.print("%Y%m%d"),c=this.datesCells[b];if(c){var d=this.multiple[b];d?(Calendar.removeClass(c,"selected"),delete this.multiple[b]):(Calendar.addClass(c,"selected"),this.multiple[b]=a)}}},Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a},Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a},Calendar.prototype.setRange=function(a,b){this.minYear=a,this.maxYear=b},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this),this.hideShowCovered()},Calendar.prototype.destroy=function(){var a=this.element.parentNode;a.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(a){var b=this.element;b.parentNode.removeChild(b),a.appendChild(b)},Calendar._checkCalendar=function(a){var b=window._dynarch_popupCalendar;if(!b)return!1;for(var c=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);null!=c&&c!=b.element;c=c.parentNode);return null==c?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(a)):void 0},Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),b=a.length;b>0;){var c=a[--b];Calendar.removeClass(c,"rowhilite");for(var d=c.getElementsByTagName("td"),e=d.length;e>0;){var f=d[--e];Calendar.removeClass(f,"hilite"),Calendar.removeClass(f,"active")}}this.element.style.display="block",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)),this.hideShowCovered()},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),this.element.style.display="none",this.hidden=!0,this.hideShowCovered()},Calendar.prototype.showAt=function(a,b){var c=this.element.style;c.left=a+"px",c.top=b+"px",this.show()},Calendar.prototype.showAtElement=function(a,b){var c=this,d={x:0,y:0,width:0,height:0,top:0,left:0},e=$(a).cumulativeOffset(),f=($(a).cumulativeScrollOffset(),{left:document.documentElement.scrollLeft||window.scrollX||0,top:document.documentElement.scrollTop||window.scrollY||0},$(a).getDimensions());d.left=e.left,d.top=e.top,d.width=f.width,d.height=f.height,c.element.style.display="block";var g={x:0,y:0,width:0,height:0,top:0,left:0};switch(g.left=dom.utils.getElementLeft(c.element),g.top=dom.utils.getElementTop(c.element),g.width=dom.utils.getElementWidth(c.element),g.height=dom.utils.getElementHeight(c.element),b){case"L":d.x=d.left-g.width,d.y=d.top;break;case"R":d.x=d.left+d.width,d.y=d.top;break;case"T":case"TR":case"Tr":d.x=d.left,d.y=d.top-g.height;break;case"TL":case"Tl":d.x=d.left+d.width-g.width,d.y=d.top-g.height;break;case"B":case"BR":case"Br":d.x=d.left,d.y=d.top+d.height;break;case"BL":case"Bl":d.x=d.left+d.width-g.width,d.y=d.top+d.height}if(d.x<0&&(d.x=0),d.y<0&&(d.y=0),"BackCompat"!==document.compatMode){var h=d.x+g.width-document.viewport.getWidth();0>h?h=0:h+=15,d.x=d.x-h}c.showAt(d.x,d.y)},Calendar.prototype.setDateFormat=function(a){this.dateFormat=a},Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a},Calendar.prototype.parseDate=function(a,b){b||(b=this.dateFormat),this.setDate(Date.parseDate(a,b))},Calendar.prototype.hideShowCovered=function(){function a(a){var b=a.style.visibility;return b||(b=document.defaultView&&"function"==typeof document.defaultView.getComputedStyle?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:""),b}if(Calendar.is_ie||Calendar.is_opera)for(var b=new Array("applet","iframe","select"),c=this.element,d=Calendar.getAbsolutePos(c),e=d.x,f=c.offsetWidth+e,g=d.y,h=c.offsetHeight+g,i=b.length;i>0;)for(var j=document.getElementsByTagName(b[--i]),k=null,l=j.length;l>0;){k=j[--l],d=Calendar.getAbsolutePos(k);var m=d.x,n=k.offsetWidth+m,o=d.y,p=k.offsetHeight+o;this.hidden||m>f||e>n||o>h||g>p?(k.__msh_save_visibility||(k.__msh_save_visibility=a(k)),k.style.visibility=k.__msh_save_visibility):(k.__msh_save_visibility||(k.__msh_save_visibility=a(k)),k.style.visibility="hidden")}},Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,b=this.firstdayname,c=Calendar._TT.WEEKEND,d=0;7>d;++d){b.className="day name";var e=(d+a)%7;d&&(b.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[e]),b.navtype=100,b.calendar=this,b.fdow=e,Calendar._add_evs(b)),-1!=c.indexOf(e.toString())&&Calendar.addClass(b,"weekend"),b.innerHTML=Calendar._SDN[(d+a)%7],b=b.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(ev){if(!this.dragging){this.dragging=!0;var posX,posY;Calendar.is_ie?(posY=window.event.clientY+document.body.scrollTop,posX=window.event.clientX+document.body.scrollLeft):(posY=ev.clientY+window.scrollY,posX=ev.clientX+window.scrollX);var st=this.element.style;with(this.xOffs=posX-parseInt(st.left),this.yOffs=posY-parseInt(st.top),Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}},Date._hasBeenExtended||(Date._hasBeenExtended=!0,Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.parseDate=function(a,b){var c=new Date,d=0,e=-1,f=0,g=a.split(/\W+/),h=b.match(/%./g),i=0,j=0,k=0,l=0;for(i=0;i<g.length;++i)if(g[i])switch(h[i]){case"%d":case"%e":f=parseInt(g[i],10);break;case"%m":e=parseInt(g[i],10)-1;break;case"%Y":case"%y":d=parseInt(g[i],10),100>d&&(d+=d>29?1900:2e3);break;case"%b":case"%B":for(j=0;12>j;++j)if(Calendar._MN[j].substr(0,g[i].length).toLowerCase()==g[i].toLowerCase()){e=j;break}break;case"%H":case"%I":case"%k":case"%l":k=parseInt(g[i],10);break;case"%P":case"%p":/pm/i.test(g[i])&&12>k?k+=12:/am/i.test(g[i])&&k>=12&&(k-=12);break;case"%M":l=parseInt(g[i],10)}if(isNaN(d)&&(d=c.getFullYear()),isNaN(e)&&(e=c.getMonth()),isNaN(f)&&(f=c.getDate()),isNaN(k)&&(k=c.getHours()),isNaN(l)&&(l=c.getMinutes()),0!=d&&-1!=e&&0!=f)return new Date(d,e,f,k,l,0);for(d=0,e=-1,f=0,i=0;i<g.length;++i)if(-1!=g[i].search(/[a-zA-Z]+/)){var m=-1;for(j=0;12>j;++j)if(Calendar._MN[j].substr(0,g[i].length).toLowerCase()==g[i].toLowerCase()){m=j;break}-1!=m&&(-1!=e&&(f=e+1),e=m)}else parseInt(g[i],10)<=12&&-1==e?e=g[i]-1:parseInt(g[i],10)>31&&0==d?(d=parseInt(g[i],10),100>d&&(d+=d>29?1900:2e3)):0==f&&(f=g[i]);return 0==d&&(d=c.getFullYear()),-1!=e&&0!=f?new Date(d,e,f,k,l,0):c},Date.prototype.getMonthDays=function(a){var b=this.getFullYear();return"undefined"==typeof a&&(a=this.getMonth()),0!=b%4||0==b%100&&0!=b%400||1!=a?Date._MD[a]:29
},Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=new Date(this.getFullYear(),0,0,0,0,0),c=a-b;return Math.floor(c/Date.DAY)},Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=a.getDay();a.setDate(a.getDate()-(b+6)%7+3);var c=a.valueOf();return a.setMonth(0),a.setDate(4),Math.round((c-a.valueOf())/6048e5)+1},Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()},Date.prototype.setDateOnly=function(a){var b=new Date(a);this.setDate(1),this.setFullYear(b.getFullYear()),this.setMonth(b.getMonth()),this.setDate(b.getDate())},Date.prototype.print=function(a){var b=this.getMonth(),c=this.getDate(),d=this.getFullYear(),e=this.getWeekNumber(),f=this.getDay(),g={},h=this.getHours(),i=h>=12,j=i?h-12:h,k=this.getDayOfYear();0==j&&(j=12);var l=this.getMinutes(),m=this.getSeconds();g["%a"]=Calendar._SDN[f],g["%A"]=Calendar._DN[f],g["%b"]=Calendar._SMN[b],g["%B"]=Calendar._MN[b],g["%C"]=1+Math.floor(d/100),g["%d"]=10>c?"0"+c:c,g["%e"]=c,g["%H"]=10>h?"0"+h:h,g["%I"]=10>j?"0"+j:j,g["%j"]=100>k?10>k?"00"+k:"0"+k:k,g["%k"]=h,g["%l"]=j,g["%m"]=9>b?"0"+(1+b):1+b,g["%M"]=10>l?"0"+l:l,g["%n"]="\n",g["%p"]=i?"PM":"AM",g["%P"]=i?"pm":"am",g["%s"]=Math.floor(this.getTime()/1e3),g["%S"]=10>m?"0"+m:m,g["%t"]="	",g["%U"]=g["%W"]=g["%V"]=10>e?"0"+e:e,g["%u"]=f+1,g["%w"]=f,g["%y"]=(""+d).substr(2,2),g["%Y"]=d,g["%%"]="%";var n=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(n,function(a){return g.hasOwnProperty(a)?g[a]:a});for(var o=a.match(n),p=0;p<o.length;p++){var q=g[o[p]];"undefined"!=typeof q&&(n=new RegExp(o[p],"g"),_.isNumber(q)&&(q=q.toPaddedString(2)),a=a.replace(n,q))}return a},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(a){var b=new Date(this);b.__msh_oldSetFullYear(a),b.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear(a)}),window._dynarch_popupCalendar=null,Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"),Calendar._FD=0,Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar._TT={},Calendar._TT.INFO="About the calendar",Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the Â«, Â» buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.",Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.",Calendar._TT.PREV_YEAR="Prev. year (hold for menu)",Calendar._TT.PREV_MONTH="Prev. month (hold for menu)",Calendar._TT.GO_TODAY="Go Today",Calendar._TT.NEXT_MONTH="Next month (hold for menu)",Calendar._TT.NEXT_YEAR="Next year (hold for menu)",Calendar._TT.SEL_DATE="Select date",Calendar._TT.DRAG_TO_MOVE="Drag to move",Calendar._TT.PART_TODAY=" (today)",Calendar._TT.DAY_FIRST="Display %s first",Calendar._TT.WEEKEND="0,6",Calendar._TT.CLOSE="Close",Calendar._TT.TODAY="Today",Calendar._TT.TIME_PART="(Shift-)Click or drag to change value",Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d",Calendar._TT.TT_DATE_FORMAT="%a, %b %e",Calendar._TT.WK="wk",Calendar._TT.TIME="Time:",Calendar.setup=function(a){function b(b,c){"undefined"==typeof a[b]&&(a[b]=c)}function c(a){var b=a.params,c=a.dateClicked||b.electric;c&&b.inputField&&(b.inputField.value=a.date.print(b.ifFormat),"function"==typeof b.inputField.onchange&&b.inputField.onchange()),c&&b.displayArea&&(b.displayArea.innerHTML=a.date.print(b.daFormat)),c&&"function"==typeof b.onUpdate&&b.onUpdate(a),c&&b.flat&&"function"==typeof b.flatCallback&&b.flatCallback(a),c&&b.singleClick&&a.dateClicked&&a.callCloseHandler()}function d(){var b=a.inputField||a.displayArea,d=a.inputField?a.ifFormat:a.daFormat,e=!1,f=window.calendar;if(b&&(a.date=Date.parseDate(b.value||b.innerHTML,d)),f&&a.cache?(a.date&&f.setDate(a.date),f.hide()):(window.calendar=f=new Calendar(a.firstDay,a.date,a.onSelect||c,a.onClose||function(a){a.hide()}),f.showsTime=a.showsTime,f.time24="24"==a.timeFormat,f.weekNumbers=a.weekNumbers,e=!0),a.multiple){f.multiple={};for(var g=a.multiple.length;--g>=0;){var h=a.multiple[g],i=h.print("%Y%m%d");f.multiple[i]=h}}return f.showsOtherMonths=a.showOthers,f.yearStep=a.step,f.setRange(a.range[0],a.range[1]),f.params=a,f.setDateStatusHandler(a.dateStatusFunc),f.getDateText=a.dateText,f.setDateFormat(d),e&&f.create(),f.refresh(),a.position?f.showAt(a.position[0],a.position[1]):f.showAtElement(a.button||a.displayArea||a.inputField,a.align),!1}b("inputField",null),b("displayArea",null),b("button",null),b("eventName","click"),b("ifFormat","%Y/%m/%d"),b("daFormat","%Y/%m/%d"),b("singleClick",!0),b("disableFunc",null),b("dateStatusFunc",a.disableFunc),b("dateText",null),b("firstDay",null),b("align","Br"),b("range",[1900,2999]),b("weekNumbers",!0),b("flat",null),b("flatCallback",null),b("onSelect",null),b("onClose",null),b("onUpdate",null),b("date",null),b("showsTime",!1),b("timeFormat","24"),b("electric",!0),b("step",1),b("position",null),b("cache",!0),b("showOthers",!1),b("multiple",null);var e=["inputField","displayArea","button"];for(var f in e)"string"==typeof a[e[f]]&&(a[e[f]]=document.getElementById(a[e[f]]));if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button),null!=a.flat){if("string"==typeof a.flat&&(a.flat=document.getElementById(a.flat)),!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),!1;var g=new Calendar(a.firstDay,a.date,a.onSelect||c);return g.showsOtherMonths=a.showOthers,g.showsTime=a.showsTime,g.time24="24"==a.timeFormat,g.params=a,g.weekNumbers=a.weekNumbers,g.setRange(a.range[0],a.range[1]),g.setDateStatusHandler(a.dateStatusFunc),g.getDateText=a.dateText,a.ifFormat&&g.setDateFormat(a.ifFormat),a.inputField&&"string"==typeof a.inputField.value&&g.parseDate(a.inputField.value),g.create(a.flat),g.show(),!1}var h=a.button||a.displayArea||a.inputField;return h["on"+a.eventName]=d,h.showCalendar=d,g},"undefined"==typeof dom)var dom=new Object;"undefined"==typeof dom.utils&&(dom.utils=new Object),dom.getNext=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(1==d.nodeType&&d.nodeName.toLowerCase()==b.toLowerCase())return d}return!1},dom.utils.stripIds=function(a){var b=new Array;for(b[b.length]=a;b.length>0;){var c=b.shift();if(a.nodeType==Node.ELEMENT_NODE&&(c.id&&c.removeAttribute("id"),c.hasChildNodes()))for(var d=c.childNodes,e=0;e<d.length;e++)b.push(d[e])}return a},dom.utils.getMouseCoords=function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},dom.utils.getMouseOffset=function(a,b){b=b||window.event;var c=dom.utils.getPosition(a),d=dom.utils.mouseCoords(b);return{x:d.x-c.x,y:d.y-c.y}},dom.utils.scrollTo=function(a){var b=dom.utils.getElementTop(a);window.scrollTo(0,b)},dom.utils.browser=new Object,dom.utils.browser.regexes={overflowX:new Array(/Firefox\/1\.0/),overflowY:new Array(/Firefox\/1\.0/)},dom.utils.browser.supportsOverflowX=function(){for(var a=0;a<dom.utils.browser.regexes.overflowX.length;a++){var b=dom.utils.browser.regexes.overflowX[a];if(navigator.userAgent.match(b))return!1}return!0},dom.utils.browser.supportsOverflowY=function(){for(var a=0;a<dom.utils.browser.regexes.overflowY.length;a++){var b=dom.utils.browser.regexes.overflowY[a];if(navigator.userAgent.match(b))return!1}return!0},dom.utils.browser.supportsDom=function(){return document.getElementById?!0:!1},dom.utils.browser.isIE=function(){return document.all&&navigator.appName.indexOf("Microsoft Internet Explorer")>-1?!0:!1},dom.utils.browser.isSafari=function(){return navigator.userAgent.toLowerCase().indexOf("safari")>-1?!0:!1},dom.utils.removeElement=function(a){if(dom.utils.browser.isIE()){var b=document.getElementById("IELeakGarbageBin");b||(b=document.createElement("DIV"),b.id="IELeakGarbageBin",b.style.display="none",document.body.appendChild(b)),b.appendChild(a),b.innerHTML=""}else a.parentNode.removeChild(a)},dom.utils.getPageWidth=function(){var a=0;return a=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth},dom.utils.getPageHeight=function(){var a=0;return a=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight},dom.utils.getWindowWidth=function(a){return a=a?a:window,parseInt("CSS1Compat"==a.document.compatMode?a.document.body.parentNode.clientWidth:dom.utils.browser.isIE()?a.document.body.clientWidth:a.innerWidth)},dom.utils.getWindowHeight=function(a){return a=a?a:window,parseInt("CSS1Compat"==a.document.compatMode?a.document.body.parentNode.clientHeight:dom.utils.browser.isIE()?a.document.body.clientHeight:a.innerHeight)},dom.utils.getWindowScrollX=function(a){return a=a?a:window,parseInt("CSS1Compat"==document.compatMode&&a.document.body.parentNode.scrollLeft?a.document.body.parentNode.scrollLeft:dom.utils.browser.isIE()?a.document.body.scrollLeft:a.scrollX)},dom.utils.getWindowScrollY=function(a){return a=a?a:window,parseInt("CSS1Compat"==document.compatMode&&a.document.body.parentNode.scrollTop?a.document.body.parentNode.scrollTop:dom.utils.browser.isIE()?a.document.body.scrollTop:a.scrollY)},dom.utils.getElementWidth=function(a){var b,c=0;if("IMG"==a.tagName)c=parseInt(a.width);else if("CSS1Compat"==document.compatMode)c=parseInt(a.offsetWidth);else if("BackCompat"==document.compatMode){b=dom.utils.getCurrentStyle(a),c=parseInt(a.offsetWidth?a.offsetWidth:b.width);var d=parseInt(b.borderLeft),e=parseInt(b.borderRight),f=parseInt(b.paddingLeft),g=parseInt(b.paddingRight);c+=isNaN(d)?0:parseInt(d),c+=isNaN(e)?0:parseInt(e),c+=isNaN(f)?0:parseInt(f),c+=isNaN(g)?0:parseInt(g)}else dom.utils.browser.isSafari()&&(c=parseInt(a.offsetWidth));return c},dom.utils.getElementHeight=function(a){var b,c=0;if(a.tagName&&"IMG"==a.tagName)c=parseInt(a.height);else if("CSS1Compat"==document.compatMode)c=parseInt(a.offsetHeight);else if("BackCompat"==document.compatMode){if(b=dom.utils.getCurrentStyle(a),a.offsetHeight)c=parseInt(a.offsetHeight);else{if(!b)return!1;c=parseInt(b.height)}var d=parseInt(b.borderTop),e=parseInt(b.borderBottom),f=parseInt(b.paddingTop),g=parseInt(b.paddingBottom);dom.utils.browser.isIE()?(c-=isNaN(d)?0:parseInt(d),c-=isNaN(e)?0:parseInt(e)):(c+=isNaN(d)?0:parseInt(d),c+=isNaN(e)?0:parseInt(e),c+=isNaN(f)?0:parseInt(f),c+=isNaN(g)?0:parseInt(g))}else dom.utils.browser.isSafari()&&(c=parseInt(a.offsetHeight));return c},dom.utils.getDimensions=function(a){var b={};return b.height=dom.utils.getElementHeight(a),b.width=dom.utils.getElementWidth(a),b.left=dom.utils.getElementLeft(a),b.top=dom.utils.getElementTop(a),b},dom.utils.getElementLeft=function(a){var b=0;try{if(a.offsetParent)for(;a.offsetParent;)b+=parseInt(a.offsetLeft),a=a.offsetParent;else a.x&&(b+=parseInt(a.x));return b}catch(c){return 0}},dom.utils.getElementTop=function(a){try{var b=0;if(a.offsetParent)for(;a.offsetParent;)b+=parseInt(a.offsetTop),a=a.offsetParent;else a.y&&(b+=parseInt(a.y));return b}catch(c){return 0}},dom.utils.center=function(a){var b=parseInt(dom.utils.getWindowWidth()),c=parseInt(dom.utils.getWindowHeight()),d=parseInt(dom.utils.getElementWidth(a)),e=parseInt(dom.utils.getElementHeight(a)),f=parseInt(dom.utils.getWindowScrollX()),g=parseInt(dom.utils.getWindowScrollY()),h=parseInt(b/2)-parseInt(d/2)+f,i=parseInt(c/2)-parseInt(e/2)+g;0>i&&(i=0),a.style.left=h+"px",a.style.top=i+"px"},dom.utils.getCurrentStyle=function(a){return a&&a.currentStyle?a.currentStyle:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,""):void 0},dom.utils.duplicateStyle=function(elem1,elem2){var style1=dom.utils.getCurrentStyle(elem1);for(prop in style1)try{eval("elem2.style."+prop+" = style1."+prop)}catch(e){}},dom.utils.getZIndex=function(a,b){b=b||!1;var c=dom.utils.getCurrentStyle(a),d=0;if(c.zIndex&&isNaN(c.zIndex)||b){if(a.offsetParent)for(;a.offsetParent;)d=parseInt(a.style.zIndex)>d?parseInt(a.style.zIndex):d,c=dom.utils.getCurrentStyle(a),a=a.offsetParent}else d=parseInt(c.zIndex);return d},dom.utils.getBody=function(){return document.getElementsByTagName("body")[0]},String.prototype.parseColor=function(){var a="#";if("rgb("==this.slice(0,4)){var b=this.slice(4,this.length-1).split(","),c=0;do a+=parseInt(b[c]).toColorPart();while(++c<3)}else if("#"==this.slice(0,1)){if(4==this.length)for(var c=1;4>c;c++)a+=(this.charAt(c)+this.charAt(c)).toLowerCase();7==this.length&&(a=this.toLowerCase())}return 7==a.length?a:arguments[0]||this},Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()?Element.collectTextNodes(a):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()&&!Element.hasClassName(a,b)?Element.collectTextNodesIgnoreClass(a,b):""}).flatten().join("")},Element.setContentZoom=function(a,b){return a=$(a),a.setStyle({fontSize:b/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),a},Element.getInlineOpacity=function(a){return $(a).style.opacity||""},Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b),a.removeChild(b)}catch(c){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+.5},reverse:function(a){return 1-a},flicker:function(a){var a=-Math.cos(a*Math.PI)/4+.75+Math.random()/4;return a>1?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+.5},pulse:function(a,b){return-Math.cos(a*((b||5)-.5)*2*Math.PI)/2+.5},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},none:function(){return 0},full:function(){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";Prototype.Browser.IE&&(b+=";zoom:1"),a=$(a),$A(a.childNodes).each(function(c){3==c.nodeType&&(c.nodeValue.toArray().each(function(d){a.insertBefore(new Element("span",{style:b}).update(" "==d?String.fromCharCode(160):d),c)}),Element.remove(c))})},multiple:function(a,b){var c;c=("object"==typeof a||Object.isFunction(a))&&a.length?a:$(a).childNodes;var d=Object.extend({speed:.1,delay:0},arguments[2]||{}),e=d.delay;$A(c).each(function(a,c){new b(a,Object.extend(d,{delay:c*d.speed+e}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,c){return a=$(a),b=(b||"appear").toLowerCase(),Effect[Effect.PAIRS[b][a.visible()?1:0]](a,Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},c||{}))}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime(),c=Object.isString(a.options.queue)?a.options.queue:a.options.queue.position;switch(c){case"front":this.effects.findAll(function(a){return"idle"==a.state}).each(function(b){b.startOn+=a.finishOn,b.finishOn+=a.finishOn});break;case"with-last":b=this.effects.pluck("startOn").max()||b;break;case"end":b=this.effects.pluck("finishOn").max()||b}a.startOn+=b,a.finishOn+=b,(!a.options.queue.limit||this.effects.length<a.options.queue.limit)&&this.effects.push(a),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(a){this.effects=this.effects.reject(function(b){return b==a}),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var a=(new Date).getTime(),b=0,c=this.effects.length;c>b;b++)this.effects[b]&&this.effects[b].loop(a)}}),Effect.Queues={instances:$H(),get:function(a){return Object.isString(a)?this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue):a}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(a){a&&a.transition===!1&&(a.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,this.render=function(){function a(a,b){a.options[b+"Internal"]&&a.options[b+"Internal"](a),a.options[b]&&a.options[b](a)}return function(b){"idle"===this.state&&(this.state="running",a(this,"beforeSetup"),this.setup&&this.setup(),a(this,"afterSetup")),"running"===this.state&&(b=this.options.transition(b)*this.fromToDelta+this.options.from,this.position=b,a(this,"beforeUpdate"),this.update&&this.update(b),a(this,"afterUpdate"))}}(),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn){if(a>=this.finishOn)return this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),void this.event("afterFinish");var b=(a-this.startOn)/this.totalTime,c=(b*this.totalFrames).round();c>this.currentFrame&&(this.render(b),this.currentFrame=c)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(a){this.options[a+"Internal"]&&this.options[a+"Internal"](this),this.options[a]&&this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(a){this.effects=a||[],this.start(arguments[1])},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1),b.cancel(),b.event("beforeFinish"),b.finish&&b.finish(a),b.event("afterFinish")})}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,c){a=Object.isString(a)?$(a):a;var d=$A(arguments),e=d.last(),f=5==d.length?d[3]:null;this.method=Object.isFunction(e)?e.bind(a):Object.isFunction(a[e])?a[e].bind(a):function(b){a[e]=b},this.start(Object.extend({from:b,to:c},f||{}))},update:function(a){this.method(a)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(a){if(this.element=$(a),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var b=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(b)},update:function(a){this.element.setOpacity(a)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(a){if(this.element=$(a),!this.element)throw Effect._elementDoesNotExistError;var b=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(b)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(a){this.element.setStyle({left:(this.options.x*a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(a,b,c){return new Effect.Move(a,Object.extend({x:c,y:b},arguments[3]||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b){if(this.element=$(a),!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:b},arguments[2]||{});this.start(c)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(a){this.originalStyle[a]=this.element.style[a]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){a.indexOf(b)>0&&(this.fontSize=parseFloat(a),this.fontSizeType=b)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(a){var b=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*b+this.fontSizeType}),this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var c={};if(this.options.scaleX&&(c.width=b.round()+"px"),this.options.scaleY&&(c.height=a.round()+"px"),this.options.scaleFromCenter){var d=(a-this.dims[0])/2,e=(b-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(c.top=this.originalTop-d+"px"),this.options.scaleX&&(c.left=this.originalLeft-e+"px")):(this.options.scaleY&&(c.top=-d+"px"),this.options.scaleX&&(c.left=-e+"px"))}this.element.setStyle(c)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(a){if(this.element=$(a),!this.element)throw Effect._elementDoesNotExistError;var b=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(b)},setup:function(){return"none"==this.element.getStyle("display")?void this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(2*a+1,2*a+3),16)}.bind(this)),void(this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(2*a+1,2*a+3),16)-this._base[a]}.bind(this))))},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,d){return b+(this._base[d]+this._delta[d]*a).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(a){var b=arguments[1]||{},c=document.viewport.getScrollOffsets(),d=$(a).cumulativeOffset();return b.offset&&(d[1]+=b.offset),new Effect.Tween(null,c.top,d[1],b,function(a){scrollTo(c.left,a.round())})},Effect.Fade=function(a){a=$(a);var b=a.getInlineOpacity(),c=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(a){0==a.options.to&&a.element.hide().setStyle({opacity:b})}},arguments[1]||{});return new Effect.Opacity(a,c)},Effect.Appear=function(a){a=$(a);var b=Object.extend({from:"none"==a.getStyle("display")?0:a.getOpacity()||0,to:1,afterFinishInternal:function(a){a.element.forceRerendering()},beforeSetup:function(a){a.element.setOpacity(a.options.from).show()}},arguments[1]||{});return new Effect.Opacity(a,b)},Effect.Puff=function(a){a=$(a);var b={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(a){Position.absolutize(a.effects[0].element)},afterFinishInternal:function(a){a.effects[0].element.hide().setStyle(b)}},arguments[1]||{}))},Effect.BlindUp=function(a){return a=$(a),a.makeClipping(),new Effect.Scale(a,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(a){a.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(a){a=$(a);var b=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(a){a=$(a);var b=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(a){new Effect.Scale(a.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(a){a.element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned().setStyle({opacity:b})}})}},arguments[1]||{}))},Effect.DropOut=function(a){a=$(a);var b={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(a){a.effects[0].element.makePositioned()},afterFinishInternal:function(a){a.effects[0].element.hide().undoPositioned().setStyle(b)}},arguments[1]||{}))},Effect.Shake=function(a){a=$(a);var b=Object.extend({distance:20,duration:.5},arguments[1]||{}),c=parseFloat(b.distance),d=parseFloat(b.duration)/10,e={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:c,y:0,duration:d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:-c,y:0,duration:d,afterFinishInternal:function(a){a.element.undoPositioned().setStyle(e)}})}})}})}})}})}})},Effect.SlideDown=function(a){a=$(a).cleanWhitespace();var b=a.down().getStyle("bottom"),c=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned(),a.element.down().makePositioned(),window.opera&&a.element.setStyle({top:""}),a.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.undoClipping().undoPositioned(),a.element.down().undoPositioned().setStyle({bottom:b})}},arguments[1]||{}))},Effect.SlideUp=function(a){a=$(a).cleanWhitespace();var b=a.down().getStyle("bottom"),c=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned(),a.element.down().makePositioned(),window.opera&&a.element.setStyle({top:""}),a.element.makeClipping().show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned(),a.element.down().undoPositioned().setStyle({bottom:b})}},arguments[1]||{}))},Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(a){a.element.makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping()}})},Effect.Grow=function(a){a=$(a);var b,c,d,e,f=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),g={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},h=a.getDimensions();switch(f.direction){case"top-left":b=c=d=e=0;break;case"top-right":b=h.width,c=e=0,d=-h.width;break;case"bottom-left":b=d=0,c=h.height,e=-h.height;break;case"bottom-right":b=h.width,c=h.height,d=-h.width,e=-h.height;break;case"center":b=h.width/2,c=h.height/2,d=-h.width/2,e=-h.height/2}return new Effect.Move(a,{x:b,y:c,duration:.01,beforeSetup:function(a){a.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(a){new Effect.Parallel([new Effect.Opacity(a.element,{sync:!0,to:1,from:0,transition:f.opacityTransition}),new Effect.Move(a.element,{x:d,y:e,sync:!0,transition:f.moveTransition}),new Effect.Scale(a.element,100,{scaleMode:{originalHeight:h.height,originalWidth:h.width},sync:!0,scaleFrom:window.opera?1:0,transition:f.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(a){a.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.effects[0].element.undoClipping().undoPositioned().setStyle(g)}},f))}})},Effect.Shrink=function(a){a=$(a);var b,c,d=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),e={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},f=a.getDimensions();switch(d.direction){case"top-left":b=c=0;break;case"top-right":b=f.width,c=0;break;case"bottom-left":b=0,c=f.height;break;case"bottom-right":b=f.width,c=f.height;break;case"center":b=f.width/2,c=f.height/2}return new Effect.Parallel([new Effect.Opacity(a,{sync:!0,to:0,from:1,transition:d.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:!0,transition:d.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(a,{x:b,y:c,sync:!0,transition:d.moveTransition})],Object.extend({beforeStartInternal:function(a){a.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.effects[0].element.hide().undoClipping().undoPositioned().setStyle(e)}},d))},Effect.Pulsate=function(a){a=$(a);var b=arguments[1]||{},c=a.getInlineOpacity(),d=b.transition||Effect.Transitions.linear,e=function(a){return 1-d(-Math.cos(a*(b.pulses||5)*2*Math.PI)/2+.5)};return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(a){a.element.setStyle({opacity:c})}},b),{transition:e}))},Effect.Fold=function(a){a=$(a);var b={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};
return a.makeClipping(),new Effect.Scale(a,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(){new Effect.Scale(a,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(a){a.element.hide().undoClipping().setStyle(b)}})}},arguments[1]||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(a){if(this.element=$(a),!this.element)throw Effect._elementDoesNotExistError;var b=Object.extend({style:{}},arguments[1]||{});if(Object.isString(b.style))if(b.style.include(":"))this.style=b.style.parseStyle();else{this.element.addClassName(b.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(b.style);var c=this.element.getStyles();this.style=this.style.reject(function(a){return a.value==c[a.key]}),b.afterFinishInternal=function(a){a.element.addClassName(a.options.style),a.transforms.each(function(b){a.element.style[b.style]=""})}}else this.style=$H(b.style);this.start(b)},setup:function(){function a(a){return(!a||["rgba(0, 0, 0, 0)","transparent"].include(a))&&(a="#ffffff"),a=a.parseColor(),$R(0,2).map(function(b){return parseInt(a.slice(2*b+1,2*b+3),16)})}this.transforms=this.style.map(function(b){var c=b[0],d=b[1],e=null;if("#zzzzzz"!=d.parseColor("#zzzzzz"))d=d.parseColor(),e="color";else if("opacity"==c)d=parseFloat(d),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(d)){var f=d.match(/^([\+\-]?[0-9\.]+)(.*)$/);d=parseFloat(f[1]),e=3==f.length?f[2]:null}var g=this.element.getStyle(c);return{style:c.camelize(),originalValue:"color"==e?a(g):parseFloat(g||0),targetValue:"color"==e?a(d):d,unit:e}}.bind(this)).reject(function(a){return a.originalValue==a.targetValue||"color"!=a.unit&&(isNaN(a.originalValue)||isNaN(a.targetValue))})},update:function(a){for(var b,c={},d=this.transforms.length;d--;)c[(b=this.transforms[d]).style]="color"==b.unit?"#"+Math.round(b.originalValue[0]+(b.targetValue[0]-b.originalValue[0])*a).toColorPart()+Math.round(b.originalValue[1]+(b.targetValue[1]-b.originalValue[1])*a).toColorPart()+Math.round(b.originalValue[2]+(b.targetValue[2]-b.originalValue[2])*a).toColorPart():(b.originalValue+(b.targetValue-b.originalValue)*a).toFixed(3)+(null===b.unit?"":b.unit);this.element.setStyle(c,!0)}}),Effect.Transform=Class.create({initialize:function(a){this.tracks=[],this.options=arguments[1]||{},this.addTracks(a)},addTracks:function(a){return a.each(function(a){a=$H(a);var b=a.values().first();this.tracks.push($H({ids:a.keys().first(),effect:Effect.Morph,options:{style:b}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),c=a.get("effect"),d=a.get("options"),e=[$(b)||$$(b)].flatten();return e.map(function(a){return new c(a,Object.extend({sync:!0},d))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var a,b=$H();return Prototype.Browser.WebKit?a=new Element("div",{style:this}).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',a=String.__parseStyleElement.childNodes[0].style),Element.CSS_PROPERTIES.each(function(c){a[c]&&b.set(c,a[c])}),Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),b},Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(a,c){return a[c]=b[c],a})}:function(a){a=$(a);var b,c=a.currentStyle;return b=Element.CSS_PROPERTIES.inject({},function(a,b){return a[b]=c[b],a}),b.opacity||(b.opacity=a.getOpacity()),b},Effect.Methods={morph:function(a,b){return a=$(a),new Effect.Morph(a,Object.extend({style:b},arguments[2]||{})),a},visualEffect:function(a,b,c){a=$(a);var d=b.dasherize().camelize(),e=d.charAt(0).toUpperCase()+d.substring(1);return new Effect[e](a,c),a},highlight:function(a,b){return a=$(a),new Effect.Highlight(a,b),a}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,c){return b=$(b),Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,c),b}}),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]}),Element.addMethods(Effect.Methods);var Validator=Class.create();Validator.prototype={initialize:function(a,b,c,d){"function"==typeof c?(this.options=$H(d),this._test=c):(this.options=$H(c),this._test=function(){return!0}),this.error=b||"Validation failed.",this.className=a},test:function(a,b){return this._test(a,b)&&this.options.all(function(c){return Validator.methods[c.key]?Validator.methods[c.key](a,b,c.value):!0})}},Validator.methods={pattern:function(a,b,c){return Validation.get("IsEmpty").test(a)||c.test(a)},minLength:function(a,b,c){return a.length>=c},maxLength:function(a,b,c){return a.length<=c},min:function(a,b,c){return a>=parseFloat(c)},max:function(a,b,c){return a<=parseFloat(c)},notOneOf:function(a,b,c){return $A(c).all(function(b){return a!=b})},oneOf:function(a,b,c){return $A(c).any(function(b){return a==b})},is:function(a,b,c){return a==c},isNot:function(a,b,c){return a!=c},equalToField:function(a,b,c){return a==$F(c)},notEqualToField:function(a,b,c){return a!=$F(c)},include:function(a,b,c){return $A(c).all(function(c){return Validation.get(c).test(a,b)})}};var Validation=Class.create();Validation.prototype={initialize:function(a,b){if(this.form=$(a),this.form&&(this.options=Object.extend({onSubmit:!0,stopOnFirst:!1,immediate:!1,focusOnError:!0,useTitles:!1,onFormValidate:function(a){return a},onElementValidate:function(a){return a}},b||{}),this.options.onSubmit&&Event.observe(this.form,"submit",this.onSubmit.bind(this),!1),this.options.immediate)){var c=this.options.useTitles,d=this.options.onElementValidate;Form.getElements(this.form).each(function(a){Event.observe(a,"blur",function(a){Validation.validate(Event.element(a),{useTitle:c,onElementValidate:d})})})}},onSubmit:function(a){this.validate()||Event.stop(a)},validate:function(){var a=!1,b=this.options.useTitles,c=this.options.onElementValidate;a=this.options.stopOnFirst?Form.getElements(this.form).all(function(a){return Validation.validate(a,{useTitle:b,onElementValidate:c})}):Form.getElements(this.form).collect(function(a){return Validation.validate(a,{useTitle:b,onElementValidate:c})}).all(),!a&&this.options.focusOnError&&Form.getElements(this.form).findAll(function(a){return $(a).hasClassName("validation-failed")}).first().focus();var d=this.options.onFormValidate(a,this.form);return"boolean"==typeof d&&(a=a&&d),a},reset:function(){Form.getElements(this.form).each(Validation.reset)}},Object.extend(Validation,{validate:function(a,b){b=Object.extend({useTitle:!1,onElementValidate:function(a){return a}},b||{}),a=$(a);var c=a.classNames();return result=c.all(function(c){var d=Validation.test(c,a,b.useTitle);return b.onElementValidate(d,a)})},test:function(a,b,c){var d=Validation.get(a),e="__advice"+a.camelize();try{if(Validation.isVisible(b)&&!d.test($F(b),b)){if(!b[e]){var f=Validation.getAdvice(a,b),g="";if(null==f){g=c&&b&&b.title?b.title:d.error,f='<div class="attention" id="advice-'+a+"-"+Validation.getElmID(b)+'" style="display:none">'+g+"</div>";var h=b;if(b.hasAttribute("data-ui-advice"))h=$(b.readAttribute("data-ui-advice")),new Insertion.After(h,f);else if(h=b.up(".edt-input"))h.insert({after:f});else switch(b.type.toLowerCase()){case"checkbox":case"radio":var i=b.parentNode;i?new Insertion.Bottom(i,f):new Insertion.After(b,f);break;default:new Insertion.After(b,f)}f=Validation.getAdvice(a,b)}""===f.innerHTML.strip()&&f.update(g),"undefined"==typeof Effect?f.style.display="block":new Effect.Appear(f,{duration:1})}return b[e]=!0,b.removeClassName("validation-passed"),b.addClassName("validation-failed"),!1}var f=Validation.getAdvice(a,b);return null!=f&&f.hide(),b[e]="",b.removeClassName("validation-failed"),b.addClassName("validation-passed"),!0}catch(j){throw j}},isVisible:function(a){for(;"BODY"!=a.tagName&&"undefined"!=typeof a.style;){if("visible"!==a.style.visibility&&""!==a.style.visibility||"none"===a.style.display)return!1;a=a.parentNode}return!0},getAdvice:function(a,b){return $("advice-"+a+"-"+Validation.getElmID(b))||$("advice-"+Validation.getElmID(b))},getElmID:function(a){return a.id?a.id:a.name},reset:function(a){a=$(a);var b=a.classNames();b.each(function(b){var c="__advice"+b.camelize();if(a[c]){var d=Validation.getAdvice(b,a);d.hide(),a[c]=""}a.removeClassName("validation-failed"),a.removeClassName("validation-passed")})},add:function(a,b,c,d){var e={};e[a]=new Validator(a,b,c,d),Object.extend(Validation.methods,e)},addAllThese:function(a){var b={};$A(a).each(function(a){b[a[0]]=new Validator(a[0],a[1],a[2],a.length>3?a[3]:{})}),Object.extend(Validation.methods,b)},get:function(a){return Validation.methods[a]?Validation.methods[a]:Validation.methods._LikeNoIDIEverSaw_},methods:{_LikeNoIDIEverSaw_:new Validator("_LikeNoIDIEverSaw_","",{})}}),Validation.add("IsEmpty","",function(a){return null==a||0==a.length}),Validation.addAllThese([["required","This is a required field.",function(a){return!Validation.get("IsEmpty").test(a)}],["required-file","This is a required field.",function(a,b){return a=b.value,!Validation.get("IsEmpty").test(a)}],["required-boolean-radio-yes","This field must be Yes.",function(a,b){var c=Validation.getElmID(b),d=Validation.getElmID(b).replace("_on","_off");return Validation.reset(d),!Validation.get("IsEmpty").test($F(c))&&Validation.get("IsEmpty").test($F(d))}],["required-boolean-radio-no","This field must be Yes.",function(a,b){var c=Validation.getElmID(b).replace("_off","_on"),d=Validation.getElmID(b);return Validation.reset(c),!Validation.get("IsEmpty").test($F(c))&&Validation.get("IsEmpty").test($F(d))}],["view-name-not-standard",'The name "Standard View" is reserved.',function(a){return!Validation.get("IsEmpty").test(a)&&"Standard View"!=a}],["validate-number","Please enter a valid number in this field.",function(a){return Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)}],["validate-number-nodecimal","Please enter a valid number with no decimals into this field.",function(a){return a=a.replace(",",""),Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)&&!/(\.[0-9]*)$/.test(a)}],["validate-uom","Please enter a valid number in this field.",function(a,b){return a=a.replace(",",""),Validation.get("validate-number").test(a,b)}],["validate-number-more-than-zero","Please enter a number greater than zero.",function(a){return Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)&&a>=0}],["validate-number-more-than-zero-if-required","Please enter a number greater than zero.",function(a,b){return b.hasClassName("required")?Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)&&a>=0:Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)&&a>=0}],["validate-number-zero-or-greater","Please enter a number zero or greater.",function(a){return Validation.get("IsEmpty").test(a)||!isNaN(a)&&!/^\s+$/.test(a)&&a>=0}],["validate-digits","Please use numbers only in this field. please avoid spaces or other characters such as dots or commas.",function(a){return Validation.get("IsEmpty").test(a)||!/[^\d]/.test(a)}],["validate-alpha","Please use letters only (a-z) in this field.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z]+$/.test(a)}],["validate-alpha-num","Please use only letters (a-z) or numbers (0-9) only in this field.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z0-9]+$/.test(a)}],["validate-alphanum","Please use only letters (a-z) or numbers (0-9) only in this field. No spaces or other characters are allowed.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z0-9]+$/.test(a)}],["validate-shortdomain","Please use only lowercase letters (a-z), numbers (0-9), or (-) in this field. No spaces or other characters are allowed.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-z0-9-]+$/.test(a)}],["validate-date","Please enter a valid date.",function(a){var b=new Date(a);return Validation.get("IsEmpty").test(a)||!isNaN(b)}],["validate-date-allow-relative","Please enter a valid date.",function(a){var b=new Date(a);return Validation.get("IsEmpty").test(a)||!isNaN(b)||/^(-|\+)\d+ (day|month|year)(s)?$/i.test(a)}],["validate-email","Please enter a valid email address. For example fred@domain.com .",function(a){return Validation.get("IsEmpty").test(a)||/[\w\.\-]+@[\w\-]+(\.([\w\-]+))+$/.test(a)}],["validate-emails","Please enter valid email addresses. For example fred@domain.com .",function(a){var b=Validation.get("IsEmpty").test(a);if(!b){b=!0;for(var c=a.split(","),d=0;d<c.length;d++)if(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+[\w\-]{0,}\.[A-Za-z]{2,4}\b/.test(c[d].trim())===!1){b=!1;break}}return b}],["validate-email-aliases","Please enter valid email addresses. For example fred@domain.com .",function(a){var b=Validation.get("IsEmpty").test(a);if(!b){b=!0;for(var c=a.split("\n"),d=0;d<c.length;d++)if(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+[\w\-]{0,}\.[A-Za-z]{2,4}\b/.test(c[d].trim())===!1){b=!1;break}}return b}],["validate-url","Please enter a valid URL. For example: www.imeetcentral.com",function(a){return Validation.get("IsEmpty").test(a)||/^((http|https|ftp):\/\/)?(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(a)}],["validate-url-internal","Please enter a valid URL. For example: www.imeetcentral.com",function(a){return Validation.get("IsEmpty").test(a)||/^((http|https|ftp):\/\/)?(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)*)(:(\d+))?\/?/i.test(a)}],["validate-date-au","Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.",function(a){if(Validation.get("IsEmpty").test(a))return!0;var b=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!b.test(a))return!1;var c=new Date(a.replace(b,"$2/$1/$3"));return parseInt(RegExp.$2,10)==1+c.getMonth()&&parseInt(RegExp.$1,10)==c.getDate()&&parseInt(RegExp.$3,10)==c.getFullYear()}],["validate-currency-dollar","Please enter a valid $ amount. For example $100.00 .",function(a){return Validation.get("IsEmpty").test(a)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(a)}],["validate-selection","Please make a selection",function(a,b){return b.options?b.options[b.selectedIndex].value>-1:!Validation.get("IsEmpty").test(a)}],["validate-selection-orig","Please make a selection",function(a,b){return b.options?b.selectedIndex>0&&!Validation.get("IsEmpty").test(a):!Validation.get("IsEmpty").test(a)}],["validate-is-not-addon","Please enter a new choice (click on the drop down to activate input)",function(a){return Validation.get("IsEmpty").test(a)||!/^~new~$/.test(a)}],["validate-one-required","Please select one of the above options.",function(a,b){var c=b.up(".db-record-field-value");c||(c=b.up(".validation-group")),c||(c=b.up("body"));var d=!1;return c.select(".validate-one-required").each(function(a){a.checked&&(d=!0)}),d}],["validate-phone","Please enter only numbers and dashes, optionally including area / country code. For example: 1-555-555-5555.",function(a){return Validation.get("IsEmpty").test(a)?!0:-1!==a.indexOf("-")?/^[0-9\-]{12,}$/.test(a):/^[0-9]{7,}$/.test(a)}],["validate-min-length","Please enter the minimum number of characters or more.",function(a,b){var c=b.getAttribute("minlength");return c?parseInt(b.getAttribute("minlength"))<=a.length:!0}],["validate-password-complex","Your password must contain at least ONE lower case character, ONE UPPER CASE character, ONE digit AND ONE special character such as @#$%^&+=-!.",function(a,b){var c=[];return password_complexity_req&&!check_password_complexity(b.value)&&c.push(password_complexity_description),0==c.length}],["validate-password-match","Your password and password verification fields do not match!",function(a,b){var c=b.getAttribute("match");return c&&b.form.elements[c]?b.form.elements[c].value==b.value:!0}],["validate-subdomain-available","That subdomain is already taken. Please choose a different one.",function(a){var b=CD.Signup.checkDomainAvailability(a);return b}],["validate-username-available","That username is already taken. Please choose a different one.",function(a){var b=CD.Signup.checkUsernameAvailability(a);return b}],["validate-email-available","That email address is already registered and in use.",function(a){var b=CD.Signup.checkEmailAvailability(a);return b}],["validate-start-date","Start date date can not be after due date",function(a,b){var c;return c=$(b).hasClassName("csvimport")?$(b).up(".column").select(".validate-due-date").first():$(b).up("form").select(".validate-due-date").first(),c=c?c.getValue():"",""===a||""===c||new Date(a)<=new Date(c)}],["validate-due-date","Due date can not be before start date",function(a,b){var c;return c=$(b).hasClassName("csvimport")?$(b).up(".column").select(".validate-start-date").first():$(b).up("form").select(".validate-start-date").first(),c=c?c.getValue():"",""===a||""===c||new Date(a)>=new Date(c)}],["validate-rangestart-date","This date must be earlier than the next.",function(a,b){b.value=a=CD.Date.Model.resolveDate(a);var c;return c=$(b).up("form").select(".validate-rangeend-date").first(),c.value=CD.Date.Model.resolveDate(c.value),c=""===c.value?null:c.value,""!==a&&""!==c&&new Date(a)<=new Date(c)}],["validate-rangeend-date","This date must be set to the same or later value than the previous date.",function(a,b){var c;return c=$(b).up("form").select(".validate-rangestart-date").first(),c=""===c.value?null:c.value,""!==a&&""!==c&&new Date(a)>=new Date(c)}],["validate-not-past-date","Please enter a date in the future.",function(a){return("none"===a.toLowerCase()||"+1 day"===a.toLowerCase()||"+1 month"===a.toLowerCase())&&(a=""),!a||new Date(a)>=new Date}],["validate-future-date","Please enter a date in the future.",function(a){return("never"===a.toLowerCase()||"none"===a.toLowerCase()||a.match(/\+[0-9]+ (day|days|week|weeks|month|months|year|years)$/i))&&(a=""),!a||new Date(a)>new Date}]]);var databases=databases?databases:{};databases=_.extend(databases,{clean_prompt_input_box:function(a){var b="",c=a.length;for(i=0;c>i;i++){var d=a.charCodeAt(i);b+=43==d?"%2b":d>128?a.charAt(i):escape(a.charAt(i))}return b},add_new_choice:function(a,b,c,d){if("~new~"==b){null==d&&(d=spid),Validation.reset(c);var e="Enter the New Value Below",f=window.prompt(e,"");if(null!=f&&"null"!=f&&""!=f){var g=this.clean_prompt_input_box(f),h=document.getElementById(c),i=h.length;h.options[i]=new Option(unescape(g),unescape(g)),h.selectedIndex=i,setTimeout(function(){Validation.reset(c),Validation.validate(c)},300)}else Validation.reset(c),document.getElementById(c).selectedIndex=0,Validation.reset(c)}},validate_webform:function(a){var b=new Validation(a,{immediate:!0});return b.validate()}});